{"ast":null,"code":"var _jsxFileName = \"/Users/cramj/Documents/New PWA/GIT/src/pwa/view/Profile.js\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { Link, Switch, Route, Redirect } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { find } from \"lodash\";\nimport * as Section from \"./profile/\";\nimport { User, Inbox, Transaction } from \"../../service/\";\nimport { withAuth } from \"../util/\";\nimport { UIAlertSA } from \"../component/\";\nimport { vipProgress } from \"./vip/values\";\nimport { getAuthKey } from \"../../util\";\nimport \"../assets/scss/ProfileSA.scss\";\nimport \"react-image-crop/lib/ReactCrop.scss\";\nimport CropDemo from \"./profile/UploadAvatar\";\nimport { avatarClass, MenuItem } from \"./profile/options\";\n\nfunction Menu(props) {\n  const {\n    setUserAuthFN,\n    userAuth\n  } = useContext(User.Context);\n  const userData = User.read();\n  const [inboxCount, setInboxCount] = useState(0);\n  const [vipDays, setVipDays] = useState(0);\n  const [vipCount, setVipCount] = useState(0);\n  const [vipLevel, setVipLevel] = useState(1);\n  const [vipAmount, setVipAmount] = useState(0.0);\n  const [viProgVal, setViProgVal] = useState(0);\n  const [avatar, setAvatar] = useState(false);\n  const [selectedAvatar, setSelectedAvatar] = useState();\n  const [customURL, setCustomURL] = useState();\n  const [imageSource, setImageSource] = useState();\n\n  function checkImage(imageSrc, good, bad) {\n    var img = new Image();\n    img.onload = good;\n    img.onerror = bad;\n    img.src = imageSrc;\n  }\n\n  useEffect(() => {\n    if (userData && userData.username) {\n      const response = Transaction.read({ ...User.read(),\n        type: \"get_imgurl\"\n      });\n      response.promise.then(r => {\n        // console.log(r)\n        if (r.info) {\n          const URL = `https://u2daszapp.u2d8899.com/newpwa/${r.info}`;\n          setCustomURL(URL);\n        }\n      }, e => {\n        console.log('No Image found');\n      });\n    }\n  }, [customURL]);\n  useEffect(() => {\n    const q = Inbox.count();\n    q.promise.then(r => {\n      setInboxCount(+r.info);\n    }, e => {\n      if (!e.is_aborted) {\n        console.info(e);\n      }\n    });\n    return () => q.cancel();\n  }, []);\n  useEffect(() => {\n    const response = Transaction.read({ ...User.read(),\n      type: \"get_vip_level\"\n    });\n    response.promise.then(r => {\n      // console.log(r);\n      if (r.status === 1) {\n        const vlvp = Number(r.info.viplevel);\n        const vamn = Number(r.info.accountnum);\n        setVipCount(vlvp);\n        setVipLevel(vlvp);\n        const vpP = find(vipProgress, obj => obj.level === vlvp);\n        setVipAmount(vpP.amount - vamn);\n        const valPer = vamn * 100 / vpP.amount;\n        setViProgVal(valPer);\n\n        if (vlvp < 10) {\n          setVipLevel(Number(vlvp) + 1);\n        }\n      }\n    }, e => {}); // console.log( )\n\n    if (userAuth && userAuth.data) {\n      var a = moment(userAuth.data.regTime).format(\"MM/DD/YYYY\");\n      var b = moment();\n      var diffDays = b.diff(a, \"days\");\n      setVipDays(diffDays);\n    }\n  }, []);\n\n  const logout = async () => {\n    await User.logout();\n    props.history.push('login'); // console.log(props)\n    // window.location.reload();\n  };\n\n  function toDataURL(url, callback) {\n    const xhr = new XMLHttpRequest();\n\n    xhr.onload = function () {\n      callback(xhr.response);\n    };\n\n    xhr.open(\"GET\", url);\n    xhr.responseType = \"blob\";\n    xhr.send();\n  }\n\n  const Avatar = ({\n    className,\n    url\n  }) => /*#__PURE__*/React.createElement(\"i\", {\n    className: className,\n    onClick: () => {\n      setSelectedAvatar(className);\n      toDataURL(url, function (dataUrl) {\n        updateCustomPhoto(dataUrl, \"url\");\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: selectedAvatar === className ? \"active-avatar\" : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }));\n\n  function onChangeAvatar(e) {\n    if (e.target.files[0] > 200000) {\n      console.warn(\"File is too big!\");\n    } else {\n      const fileReader = new FileReader();\n\n      fileReader.onloadend = () => {\n        setImageSource(fileReader.result);\n      };\n\n      fileReader.readAsDataURL(e.target.files[0]);\n    }\n  }\n\n  function updateCustomPhoto(file, text) {\n    const imageFile = file;\n    const blob = window.URL.createObjectURL(file);\n\n    if (file.constructor === Blob) {\n      const data = new FormData();\n      data.append(\"file\", imageFile, \"sam.jpg\");\n      data.append(\"username\", userData.username);\n      data.append(\"account\", userData.account);\n      data.append(\"password\", userData.password);\n      data.append(\"auth\", getAuthKey());\n      data.append(\"type\", \"upload_pictures\");\n      const res = Transaction.read({\n        body: data,\n        type: \"upload_pictures\"\n      });\n      res.promise.then(r => {\n        console.log(\"Upload sucessful\", r); // requestAvatar()\n\n        setCustomURL(blob);\n        localStorage.setItem(\"avatar\", JSON.stringify(blob));\n\n        if (text === \"custom\") {\n          setImageSource(\"\");\n          setAvatar(false);\n        } // window.location.reload();\n\n      }, e => {\n        console.log(\"Upload failed\", e);\n      });\n    }\n  } // console.log(userAuth)\n\n\n  const onSetAvatar = () => {\n    if (!userAuth.data) {\n      logout();\n      return false;\n    }\n\n    setAvatar(true);\n  };\n\n  const onClick = e => {\n    if (!userAuth.data) {\n      e.preventDefault();\n      setUserAuthFN(userAuth.status, userAuth.data, true);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-header-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-header-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-info-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-avatar\",\n    onClick: onSetAvatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${customURL ? \"avatar\" : \"default\"}`,\n    style: {\n      backgroundImage: customURL ? `url(${customURL})` : null\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 19\n    }\n  }, userAuth.data && userAuth.data.account), /*#__PURE__*/React.createElement(\"span\", {\n    className: `vip-badge-${vipCount}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 17\n    }\n  }, \"\\u52A0\\u5165U\\u4F53\\u80B2\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 24\n    }\n  }, vipDays), \"\\u5929\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-bar-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      width: `${viProgVal}%`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 19\n    }\n  }, \"VIP\", vipLevel), /*#__PURE__*/React.createElement(Link, {\n    className: \"profile-vip\",\n    to: \"/vip\",\n    onClick: onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 21\n    }\n  }), \"VIP\\u8BE6\\u60C5\")), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 17\n    }\n  }, \"\\u5347\\u7EA7\\u8FD8\\u5DEE\\xA5 \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 25\n    }\n  }, vipAmount), \"\\u5143\\u6D41\\u6C34\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-widget\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-widget-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 15\n    }\n  }, userAuth.data && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-widget-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 19\n    }\n  }, \"\\u4E2D\\u5FC3:\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 21\n    }\n  }, \"\\uFFE5\"), userAuth.data.balance)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-hr\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-widget-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"profiel-sa-widget-item\",\n    to: \"/profile/deposit?a=1\",\n    onClick: onClick,\n    target: \"_blank\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"topup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 21\n    }\n  }, \"\\u5145\\u503C\")), /*#__PURE__*/React.createElement(Link, {\n    className: \"profiel-sa-widget-item\",\n    to: \"/profile/transfer\",\n    onClick: onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"transfer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 21\n    }\n  }, \"\\u8F6C\\u8D26\")), /*#__PURE__*/React.createElement(Link, {\n    className: \"profiel-sa-widget-item\",\n    to: \"/profile/withdraw\",\n    onClick: onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"withdraw\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 21\n    }\n  }, \"\\u63D0\\u6B3E\")), /*#__PURE__*/React.createElement(Link, {\n    className: \"profiel-sa-widget-item\",\n    to: \"/inbox\",\n    onClick: onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"information\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 21\n    }\n  }, inboxCount ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 25\n    }\n  }, inboxCount) : null), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 21\n    }\n  }, \"\\u4FE1\\u606F\")))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: `profile-sa-content ${!userAuth.data ? 'not' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-sa-menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n5 betting-history\",\n    to: \"/transaction-record\",\n    name: \"\\u4EA4\\u6613\\u8BB0\\u5F55\",\n    onClick: onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n tag collection\",\n    to: \"/collection\",\n    name: \"\\u4F18\\u60E0\\u9886\\u53D6\",\n    onClick: onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n reward\",\n    to: \"/referral\",\n    name: \"\\u9080\\u8BF7\\u5956\\u52B1\",\n    onClick: onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n personal group top\",\n    to: \"/profile/personal\",\n    name: \"\\u4E2A\\u4EBA\\u8D44\\u6599\",\n    onClick: onClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n joinus group\",\n    to: \"/join-us\",\n    name: \"\\u52A0\\u5165\\u6211\\u4EEC\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n about group\",\n    to: \"/about\",\n    name: \"\\u5173\\u4E8E\\u6211\\u4EEC\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n speedapp group bottom\",\n    to: \"/speed-app\",\n    name: \"\\u6781\\u901FAPP\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n feedback\",\n    to: \"/feedback\",\n    name: \"\\u610F\\u89C1\\u53CD\\u9988\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 11\n    }\n  }), userAuth.data && userAuth.data.is_agent === \"1\" ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n11 qr\",\n    to: \"/profile/agency/qr\",\n    name: \"\\u4EE3\\u7406\\u63A8\\u5E7F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n12 agent-report\",\n    to: \"/profile/agency/agent-report\",\n    name: \"\\u4EE3\\u7406\\u5546\\u62A5\\u544A\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n13 comission\",\n    to: \"/profile/agency/comission-report\",\n    name: \"\\u4F63\\u91D1\\u62A5\\u544A\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n14 members \",\n    to: \"/profile/agency/members\",\n    name: \"\\u4F1A\\u5458\\u540D\\u5355\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 15\n    }\n  })) : null, /*#__PURE__*/React.createElement(MenuItem, {\n    className: \"n10\",\n    onClick: logout,\n    name: \"\\u9000\\u51FA\\u767B\\u5F55\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(UIAlertSA, {\n    onClose: () => setTimeout(() => {\n      setAvatar(false);\n    }, 200),\n    shown: avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-avatar-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-avatar-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 11\n    }\n  }, avatarClass.map((data, i) => /*#__PURE__*/React.createElement(Avatar, {\n    className: data.name,\n    url: data.url,\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"imgAvatar\",\n    className: \"select-image\",\n    onClick: () => setSelectedAvatar(\"custom\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"imgAvatar\",\n    name: \"imgAvatar\",\n    accept: \" image/jpeg, image/png\",\n    onChange: e => {\n      onChangeAvatar(e);\n      setAvatar(false);\n    },\n    style: {\n      opacity: 0,\n      zIndex: -1,\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 13\n    }\n  })))), imageSource ? /*#__PURE__*/React.createElement(CropDemo, {\n    onClose: () => {\n      setImageSource(\"\");\n      setAvatar(true);\n    },\n    src: imageSource,\n    updateCustomPhoto: updateCustomPhoto,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 9\n    }\n  }) : null);\n}\n\nfunction Profile() {\n  const {\n    userAuth\n  } = useContext(User.Context); // console.log(userAuth)\n\n  return /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/profile\",\n    component: Menu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/deposit\",\n    component: Section.Deposit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/transfer\",\n    component: Section.Transfer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/withdraw\",\n    component: Section.Withdraw,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/personal\",\n    component: Section.Personal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/password\",\n    component: Section.Password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/fullname\",\n    component: Section.Fullname,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/birthdate\",\n    component: Section.Birthdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/cellphone\",\n    component: Section.Cellphone,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/email\",\n    component: Section.Email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/payment\",\n    component: Section.Card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/betting-history\",\n    component: Section.Betting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/transactions/:type\",\n    component: Section.Transactions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 7\n    }\n  }), userAuth.data && userAuth.data.is_agent === \"1\" ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/agency/qr\",\n    component: Section.QR,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/agency/agent-report\",\n    component: Section.AgentReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/agency/comission-report\",\n    component: Section.ComissionReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/profile/agency/members\",\n    component: Section.Members,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 11\n    }\n  })) : null, /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default withAuth(Profile, 0);","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/GIT/src/pwa/view/Profile.js"],"names":["React","useEffect","useState","useContext","Link","Switch","Route","Redirect","moment","find","Section","User","Inbox","Transaction","withAuth","UIAlertSA","vipProgress","getAuthKey","CropDemo","avatarClass","MenuItem","Menu","props","setUserAuthFN","userAuth","Context","userData","read","inboxCount","setInboxCount","vipDays","setVipDays","vipCount","setVipCount","vipLevel","setVipLevel","vipAmount","setVipAmount","viProgVal","setViProgVal","avatar","setAvatar","selectedAvatar","setSelectedAvatar","customURL","setCustomURL","imageSource","setImageSource","checkImage","imageSrc","good","bad","img","Image","onload","onerror","src","username","response","type","promise","then","r","info","URL","e","console","log","q","count","is_aborted","cancel","status","vlvp","Number","viplevel","vamn","accountnum","vpP","obj","level","amount","valPer","data","a","regTime","format","b","diffDays","diff","logout","history","push","toDataURL","url","callback","xhr","XMLHttpRequest","open","responseType","send","Avatar","className","dataUrl","updateCustomPhoto","onChangeAvatar","target","files","warn","fileReader","FileReader","onloadend","result","readAsDataURL","file","text","imageFile","blob","window","createObjectURL","constructor","Blob","FormData","append","account","password","res","body","localStorage","setItem","JSON","stringify","onSetAvatar","onClick","preventDefault","backgroundImage","width","balance","is_agent","setTimeout","map","i","name","opacity","zIndex","display","Profile","Deposit","Transfer","Withdraw","Personal","Password","Fullname","Birthdate","Cellphone","Email","Card","Betting","Transactions","QR","AgentReport","ComissionReport","Members"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { Link, Switch, Route, Redirect } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\nimport { find } from \"lodash\";\r\nimport * as Section from \"./profile/\";\r\nimport { User, Inbox, Transaction } from \"../../service/\";\r\nimport { withAuth } from \"../util/\";\r\nimport { UIAlertSA } from \"../component/\";\r\nimport { vipProgress } from \"./vip/values\";\r\nimport { getAuthKey } from \"../../util\";\r\n\r\nimport \"../assets/scss/ProfileSA.scss\";\r\nimport \"react-image-crop/lib/ReactCrop.scss\";\r\n\r\nimport CropDemo from \"./profile/UploadAvatar\";\r\nimport { avatarClass, MenuItem } from \"./profile/options\";\r\n\r\nfunction Menu(props) {\r\n  const { setUserAuthFN ,userAuth } = useContext(User.Context);\r\n  const userData = User.read();\r\n\r\n  const [inboxCount, setInboxCount] = useState(0);\r\n\r\n  const [vipDays, setVipDays] = useState(0);\r\n  const [vipCount, setVipCount] = useState(0);\r\n  const [vipLevel, setVipLevel] = useState(1);\r\n  const [vipAmount, setVipAmount] = useState(0.0);\r\n  const [viProgVal, setViProgVal] = useState(0);\r\n\r\n  const [avatar, setAvatar] = useState(false);\r\n  const [selectedAvatar, setSelectedAvatar] = useState();\r\n  const [customURL, setCustomURL] = useState();\r\n  const [imageSource, setImageSource] = useState();\r\n\r\n  function checkImage(imageSrc, good, bad) {\r\n    var img = new Image();\r\n    img.onload = good;\r\n    img.onerror = bad;\r\n    img.src = imageSrc;\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(userData && userData.username){\r\n      const response = Transaction.read({\r\n        ...User.read(),\r\n        type: \"get_imgurl\",\r\n      });\r\n      response.promise.then(r => {\r\n        // console.log(r)\r\n        if(r.info){\r\n          const URL = `https://u2daszapp.u2d8899.com/newpwa/${r.info}`;\r\n          setCustomURL(URL);\r\n        }\r\n        \r\n      }, e =>{\r\n        console.log('No Image found')\r\n      })\r\n\r\n    }\r\n    \r\n  }, [customURL]);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const q = Inbox.count();\r\n    q.promise.then(\r\n      (r) => {\r\n        setInboxCount(+r.info);\r\n      },\r\n      (e) => {\r\n        if (!e.is_aborted) {\r\n          console.info(e);\r\n        }\r\n      }\r\n    );\r\n    return () => q.cancel();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const response = Transaction.read({\r\n      ...User.read(),\r\n      type: \"get_vip_level\",\r\n    });\r\n\r\n    response.promise.then(\r\n      (r) => {\r\n        // console.log(r);\r\n\r\n        if (r.status === 1) {\r\n          const vlvp = Number(r.info.viplevel);\r\n          const vamn = Number(r.info.accountnum);\r\n          setVipCount(vlvp);\r\n          setVipLevel(vlvp);\r\n          const vpP = find(vipProgress, (obj) => obj.level === vlvp);\r\n          setVipAmount(vpP.amount - vamn);\r\n          const valPer = (vamn * 100) / vpP.amount;\r\n          setViProgVal(valPer);\r\n\r\n          if (vlvp < 10) {\r\n            setVipLevel(Number(vlvp) + 1);\r\n          }\r\n        }\r\n      },\r\n      (e) => {}\r\n    );\r\n\r\n    // console.log( )\r\n    if(userAuth && userAuth.data){\r\n      var a = moment(userAuth.data.regTime).format(\"MM/DD/YYYY\");\r\n      var b = moment();\r\n      var diffDays = b.diff(a, \"days\");\r\n      setVipDays(diffDays);\r\n    }\r\n    \r\n  }, []);\r\n\r\n  const logout = async () => {\r\n    await User.logout();\r\n\r\n    props.history.push('login')\r\n    // console.log(props)\r\n    // window.location.reload();\r\n  };\r\n\r\n  function toDataURL(url, callback) {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.onload = function () {\r\n      callback(xhr.response);\r\n    };\r\n    xhr.open(\"GET\", url);\r\n    xhr.responseType = \"blob\";\r\n    xhr.send();\r\n  }\r\n\r\n  const Avatar = ({ className, url }) => (\r\n    <i\r\n      className={className}\r\n      onClick={() => {\r\n        setSelectedAvatar(className);\r\n        toDataURL(url, function (dataUrl) {\r\n          updateCustomPhoto(dataUrl, \"url\");\r\n        });\r\n      }}\r\n    >\r\n      <span className={selectedAvatar === className ? \"active-avatar\" : \"\"} />\r\n    </i>\r\n  );\r\n\r\n  function onChangeAvatar(e) {\r\n    if (e.target.files[0] > 200000) {\r\n      console.warn(\"File is too big!\");\r\n    } else {\r\n      const fileReader = new FileReader();\r\n      fileReader.onloadend = () => {\r\n        setImageSource(fileReader.result);\r\n      };\r\n      fileReader.readAsDataURL(e.target.files[0]);\r\n    }\r\n  }\r\n\r\n  function updateCustomPhoto(file, text) {\r\n    const imageFile = file;\r\n    const blob = window.URL.createObjectURL(file);\r\n    if (file.constructor === Blob) {\r\n      const data = new FormData();\r\n      data.append(\"file\", imageFile, \"sam.jpg\");\r\n      data.append(\"username\", userData.username);\r\n      data.append(\"account\", userData.account);\r\n      data.append(\"password\", userData.password);\r\n      data.append(\"auth\", getAuthKey());\r\n      data.append(\"type\", \"upload_pictures\");\r\n\r\n      const res = Transaction.read({\r\n        body: data,\r\n        type: \"upload_pictures\",\r\n      });\r\n      res.promise.then(\r\n        (r) => {\r\n          console.log(\"Upload sucessful\", r);\r\n          // requestAvatar()\r\n          setCustomURL(blob);\r\n          localStorage.setItem(\"avatar\", JSON.stringify(blob));\r\n\r\n          if (text === \"custom\") {\r\n            setImageSource(\"\");\r\n            setAvatar(false);\r\n          }\r\n          // window.location.reload();\r\n        },\r\n        (e) => {\r\n          console.log(\"Upload failed\", e);\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  // console.log(userAuth)\r\n\r\n  const onSetAvatar = () =>{\r\n    if(!userAuth.data){\r\n      logout()\r\n      return false\r\n    }\r\n    setAvatar(true)\r\n  }\r\n\r\n  const onClick = (e) =>{\r\n    if(!userAuth.data){\r\n      e.preventDefault()\r\n      setUserAuthFN(userAuth.status , userAuth.data , true)\r\n    }\r\n  }\r\n\r\n\r\n  \r\n  return (\r\n    <div className=\"profile-sa\">\r\n      {/* ============ EDIT ============ */}\r\n      <div className=\"profile-sa-header\">\r\n        <div className=\"profile-sa-header-wrap\">\r\n          <div className=\"profile-sa-header-content\">\r\n            <div className=\"profile-sa-info-content\">\r\n              <div\r\n                className=\"profile-sa-avatar\"\r\n                onClick={onSetAvatar}\r\n              >\r\n                <div\r\n                  className={`${customURL ? \"avatar\" : \"default\"}`}\r\n                  style={{\r\n                    backgroundImage: customURL ? `url(${customURL})` : null,\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"profile-sa-text\">\r\n                <p>\r\n                  <label>{userAuth.data && userAuth.data.account}</label>\r\n                  <span className={`vip-badge-${vipCount}`} />\r\n                </p>\r\n                <span>\r\n                  加入U体育<span>{vipDays}</span>天\r\n                </span>\r\n                <div className=\"profile-sa-bar-wrap\">\r\n                  <div className=\"profile-bar\">\r\n                    <span style={{ width: `${viProgVal}%` }} />\r\n                  </div>\r\n                  <span>VIP{vipLevel}</span>\r\n\r\n                  <Link className=\"profile-vip\" to={\"/vip\"} onClick={onClick}>\r\n                    <i />\r\n                    VIP详情\r\n                  </Link>\r\n                </div>\r\n                <span>\r\n                  升级还差¥ <span>{vipAmount}</span>元流水\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div className=\"profile-sa-widget\">\r\n              <div className=\"profile-sa-widget-wrap\">\r\n                {userAuth.data && \r\n                <div className=\"profile-sa-widget-value\">\r\n                  <span>中心:</span>\r\n                  <p>\r\n                    <span>￥</span>\r\n                    {userAuth.data.balance}\r\n                  </p>\r\n                </div>\r\n                }\r\n                \r\n                <div className=\"profile-sa-hr\" />\r\n\r\n                <div className=\"profile-sa-widget-list\">\r\n                  <Link className=\"profiel-sa-widget-item\" to={\"/profile/deposit?a=1\"} onClick={onClick} target=\"_blank\">\r\n                    <i className=\"topup\" />\r\n                    <span>充值</span>\r\n                  </Link>\r\n                  <Link className=\"profiel-sa-widget-item\" to={\"/profile/transfer\"} onClick={onClick}>\r\n                    <i className=\"transfer\" />\r\n                    <span>转账</span>\r\n                  </Link>\r\n                  <Link className=\"profiel-sa-widget-item\" to={\"/profile/withdraw\"} onClick={onClick}>\r\n                    <i className=\"withdraw\" />\r\n                    <span>提款</span>\r\n                  </Link>\r\n                  <Link className=\"profiel-sa-widget-item\" to={\"/inbox\"} onClick={onClick}>\r\n                    <i className=\"information\">\r\n                      {inboxCount ? (\r\n                        <span className=\"count\">{inboxCount}</span>\r\n                      ) : null}\r\n                    </i>\r\n                    <span>信息</span>\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* ============ EDIT ============ */}\r\n\r\n      <div className={`profile-sa-content ${!userAuth.data ? 'not' : '' }`}>\r\n        <div className=\"profile-sa-menu\">\r\n          <MenuItem className=\"n5 betting-history\" to=\"/transaction-record\" name=\"交易记录\" onClick={onClick} />\r\n          <MenuItem className=\"n tag collection\" to=\"/collection\" name=\"优惠领取\" onClick={onClick}/>\r\n          <MenuItem className=\"n reward\" to=\"/referral\" name=\"邀请奖励\" onClick={onClick}/>\r\n          <MenuItem className=\"n personal group top\" to=\"/profile/personal\" name=\"个人资料\" onClick={onClick}/>\r\n          <MenuItem className=\"n joinus group\" to=\"/join-us\" name=\"加入我们\" />\r\n          <MenuItem className=\"n about group\" to=\"/about\" name=\"关于我们\" />\r\n          <MenuItem className=\"n speedapp group bottom\" to=\"/speed-app\" name=\"极速APP\" />\r\n          <MenuItem className=\"n feedback\" to=\"/feedback\" name=\"意见反馈\" />\r\n          {userAuth.data && userAuth.data.is_agent === \"1\" ? (\r\n            <>\r\n              <MenuItem className=\"n11 qr\" to=\"/profile/agency/qr\" name=\"代理推广\"\r\n              />\r\n              <MenuItem className=\"n12 agent-report\" to=\"/profile/agency/agent-report\" name=\"代理商报告\"\r\n              />\r\n              <MenuItem className=\"n13 comission\" to=\"/profile/agency/comission-report\" name=\"佣金报告\" />\r\n              <MenuItem className=\"n14 members \" to=\"/profile/agency/members\" name=\"会员名单\"\r\n              />\r\n            </>\r\n          ) : null}\r\n          <MenuItem className=\"n10\" onClick={logout} name=\"退出登录\" />\r\n        </div>\r\n      </div>\r\n\r\n      <UIAlertSA\r\n        onClose={() =>\r\n          setTimeout(() => {\r\n            setAvatar(false);\r\n          }, 200)\r\n        }\r\n        shown={avatar}\r\n      >\r\n        <div className=\"modal-avatar-wrap\">\r\n          <div className=\"modal-avatar-content\">\r\n            {avatarClass.map((data, i) => (\r\n              <Avatar className={data.name} url={data.url} key={i} />\r\n            ))}\r\n            <label\r\n              htmlFor=\"imgAvatar\"\r\n              className=\"select-image\"\r\n              onClick={() => setSelectedAvatar(\"custom\")}\r\n            />\r\n            <input\r\n              type=\"file\"\r\n              id=\"imgAvatar\"\r\n              name=\"imgAvatar\"\r\n              accept=\" image/jpeg, image/png\"\r\n              onChange={(e) => {\r\n                onChangeAvatar(e);\r\n                setAvatar(false);\r\n              }}\r\n              style={{ opacity: 0, zIndex: -1, display: \"none\" }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </UIAlertSA>\r\n      {imageSource ? (\r\n        <CropDemo\r\n          onClose={() => {\r\n            setImageSource(\"\");\r\n            setAvatar(true);\r\n          }}\r\n          src={imageSource}\r\n          updateCustomPhoto={updateCustomPhoto}\r\n        />\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Profile() {\r\n  const { userAuth } = useContext(User.Context);\r\n\r\n  // console.log(userAuth)\r\n  return (\r\n    <Switch>\r\n      <Route exact path=\"/profile\" component={Menu} />\r\n      <Route path=\"/profile/deposit\" component={Section.Deposit} />\r\n      <Route path=\"/profile/transfer\" component={Section.Transfer} />\r\n      <Route path=\"/profile/withdraw\" component={Section.Withdraw} />\r\n      <Route path=\"/profile/personal\" component={Section.Personal} />\r\n      <Route path=\"/profile/password\" component={Section.Password} />\r\n      <Route path=\"/profile/fullname\" component={Section.Fullname} />\r\n      <Route path=\"/profile/birthdate\" component={Section.Birthdate} />\r\n      <Route path=\"/profile/cellphone\" component={Section.Cellphone} />\r\n      <Route path=\"/profile/email\" component={Section.Email} />\r\n      <Route path=\"/profile/payment\" component={Section.Card} />\r\n      <Route path=\"/profile/betting-history\" component={Section.Betting} />\r\n      <Route\r\n        path=\"/profile/transactions/:type\"\r\n        component={Section.Transactions}\r\n      />\r\n      {userAuth.data && userAuth.data.is_agent === \"1\" ? (\r\n        <>\r\n          <Route path=\"/profile/agency/qr\" component={Section.QR} />\r\n          <Route path=\"/profile/agency/agent-report\" component={Section.AgentReport} />\r\n          <Route path=\"/profile/agency/comission-report\" component={Section.ComissionReport}/>\r\n          <Route path=\"/profile/agency/members\" component={Section.Members} />\r\n        </>\r\n      ) : null}\r\n      <Redirect to=\"/profile\" />\r\n    </Switch>\r\n  );\r\n}\r\n\r\nexport default withAuth(Profile, 0);\r\n"]},"metadata":{},"sourceType":"module"}