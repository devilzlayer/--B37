{"ast":null,"code":"import _objectSpread from\"/Users/cramj/Documents/New PWA/GIT/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cramj/Documents/New PWA/GIT/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{withAuth}from\"../util/\";import{User,Promotions as Service}from\"../../service/\";import\"../assets/scss/PromotionsSA.scss\";function Promotions(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),promotions=_useState2[0],setPromotions=_useState2[1];useEffect(function(){window.scrollTo(0,0);document.body.classList.add(\"promotions-page\");return function(){return document.body.classList.remove(\"promotions-page\");};},[]);useEffect(function(){var req=Service.read_updated(_objectSpread({},User.read()));req.promise.then(function(r){console.info(\"Got promotions:\",r);setPromotions(r.info);},function(e){console.warn(\"Unable to get promotions:\",e);});return function(){return req.cancel();};},[]);return/*#__PURE__*/React.createElement(\"div\",{className:\"promotions-sa\"},/*#__PURE__*/React.createElement(\"div\",{className:\"promotions-sa-head\"},/*#__PURE__*/React.createElement(\"div\",{className:\"promotions-sa-title\"},/*#__PURE__*/React.createElement(\"h1\",null,\"\\u4FC3\\u9500\\u6D3B\\u52A8\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"promotions-sa-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"decor-n0\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"decor-n1\"}),promotions.map(function(promotion,i){return/*#__PURE__*/React.createElement(Link,{className:\"banner\",to:\"/promotion/\".concat(promotion.id),key:i},/*#__PURE__*/React.createElement(\"div\",{className:\"banner-inner\"},/*#__PURE__*/React.createElement(\"div\",{className:\"banner-inner-wrap\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://\".concat(promotion.bannerurl),alt:promotion.title})),/*#__PURE__*/React.createElement(\"div\",{className:\"banner-body\"},/*#__PURE__*/React.createElement(\"p\",null,\"\\u79BB\\u6D3B\\u52A8\\u7ED3\\u675F: \",promotion.endTime,/*#__PURE__*/React.createElement(\"span\",{className:\"arrow\"},\"\\u66F4\\u591A\\u5185\\u5BB9\")))));})));}export default withAuth(Promotions,0);","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/GIT/src/pwa/view/Promotions.js"],"names":["React","useState","useEffect","Link","withAuth","User","Promotions","Service","promotions","setPromotions","window","scrollTo","document","body","classList","add","remove","req","read_updated","read","promise","then","r","console","info","e","warn","cancel","map","promotion","i","id","bannerurl","title","endTime"],"mappings":"+RAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,OAASC,QAAT,KAAyB,UAAzB,CACA,OAASC,IAAT,CAAeC,UAAU,GAAIC,CAAAA,OAA7B,KAA4C,gBAA5C,CAEA,MAAO,kCAAP,CAEA,QAASD,CAAAA,UAAT,EAAsB,eACgBL,QAAQ,CAAC,EAAD,CADxB,wCACbO,UADa,eACDC,aADC,eAGpBP,SAAS,CAAC,UAAM,CACdQ,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EAEAC,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,iBAA5B,EAEA,MAAO,kBAAMH,CAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBE,MAAxB,CAA+B,iBAA/B,CAAN,EAAP,CACD,CANQ,CAMN,EANM,CAAT,CAQAd,SAAS,CAAC,UAAM,CACd,GAAMe,CAAAA,GAAG,CAAGV,OAAO,CAACW,YAAR,kBACPb,IAAI,CAACc,IAAL,EADO,EAAZ,CAIAF,GAAG,CAACG,OAAJ,CAAYC,IAAZ,CACE,SAACC,CAAD,CAAO,CACLC,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAgCF,CAAhC,EAEAb,aAAa,CAACa,CAAC,CAACE,IAAH,CAAb,CACD,CALH,CAME,SAACC,CAAD,CAAO,CACLF,OAAO,CAACG,IAAR,CAAa,2BAAb,CAA0CD,CAA1C,EACD,CARH,EAWA,MAAO,kBAAMR,CAAAA,GAAG,CAACU,MAAJ,EAAN,EAAP,CACD,CAjBQ,CAiBN,EAjBM,CAAT,CAmBA,mBACE,2BAAK,SAAS,CAAC,eAAf,eACE,2BAAK,SAAS,CAAC,oBAAf,eACE,2BAAK,SAAS,CAAC,qBAAf,eACE,yDADF,CADF,CADF,cAME,2BAAK,SAAS,CAAC,uBAAf,eACE,2BAAK,SAAS,CAAC,UAAf,EADF,cAEE,2BAAK,SAAS,CAAC,UAAf,EAFF,CAGGnB,UAAU,CAACoB,GAAX,CAAe,SAACC,SAAD,CAAYC,CAAZ,qBACd,oBAAC,IAAD,EAAM,SAAS,CAAC,QAAhB,CAAyB,EAAE,sBAAgBD,SAAS,CAACE,EAA1B,CAA3B,CAA2D,GAAG,CAAED,CAAhE,eACE,2BAAK,SAAS,CAAC,cAAf,eAIE,2BAAK,SAAS,CAAC,mBAAf,eACE,2BACE,GAAG,mBAAaD,SAAS,CAACG,SAAvB,CADL,CAEE,GAAG,CAAEH,SAAS,CAACI,KAFjB,EADF,CAJF,cAUE,2BAAK,SAAS,CAAC,aAAf,eACE,gEACUJ,SAAS,CAACK,OADpB,cAEE,4BAAM,SAAS,CAAC,OAAhB,6BAFF,CADF,CAVF,CADF,CADc,EAAf,CAHH,CANF,CADF,CAkCD,CAED,cAAe9B,CAAAA,QAAQ,CAACE,UAAD,CAAa,CAAb,CAAvB","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { withAuth } from \"../util/\";\r\nimport { User, Promotions as Service } from \"../../service/\";\r\n\r\nimport \"../assets/scss/PromotionsSA.scss\";\r\n\r\nfunction Promotions() {\r\n  const [promotions, setPromotions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n\r\n    document.body.classList.add(\"promotions-page\");\r\n\r\n    return () => document.body.classList.remove(\"promotions-page\");\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const req = Service.read_updated({\r\n      ...User.read(),\r\n    });\r\n\r\n    req.promise.then(\r\n      (r) => {\r\n        console.info(\"Got promotions:\", r);\r\n\r\n        setPromotions(r.info);\r\n      },\r\n      (e) => {\r\n        console.warn(\"Unable to get promotions:\", e);\r\n      }\r\n    );\r\n\r\n    return () => req.cancel();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"promotions-sa\">\r\n      <div className=\"promotions-sa-head\">\r\n        <div className=\"promotions-sa-title\">\r\n          <h1>促销活动</h1>\r\n        </div>\r\n      </div>\r\n      <div className=\"promotions-sa-content\">\r\n        <div className=\"decor-n0\"></div>\r\n        <div className=\"decor-n1\"></div>\r\n        {promotions.map((promotion, i) => (\r\n          <Link className=\"banner\" to={`/promotion/${promotion.id}`} key={i}>\r\n            <div className=\"banner-inner\">\r\n              {/* <div className=\"banner-title\">\r\n\t\t\t\t\t\t\t<h4>{promotion.title}</h4>\r\n\t\t\t\t\t\t</div> */}\r\n              <div className=\"banner-inner-wrap\">\r\n                <img\r\n                  src={`https://${promotion.bannerurl}`}\r\n                  alt={promotion.title}\r\n                />\r\n              </div>\r\n              <div className=\"banner-body\">\r\n                <p>\r\n                  离活动结束: {promotion.endTime}\r\n                  <span className=\"arrow\">更多内容</span>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withAuth(Promotions, 0);\r\n"]},"metadata":{},"sourceType":"module"}