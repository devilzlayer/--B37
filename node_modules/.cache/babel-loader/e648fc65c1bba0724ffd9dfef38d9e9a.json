{"ast":null,"code":"import _objectSpread from\"/Users/cramj/Documents/New PWA/GIT/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cramj/Documents/New PWA/GIT/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{map}from\"lodash\";import{useHistory}from\"react-router-dom\";import{Wrap}from\"../view/profile/\";import\"../assets/scss/Collection.scss\";import{User,Transaction}from\"../../service\";import{withAuth}from\"../util/\";import{UIAlertSA}from\"../component\";var CardItem=function CardItem(props){var label=props.label,value=props.value,className=props.className,onClick=props.onClick;return/*#__PURE__*/React.createElement(\"div\",{className:\"collection-card-item \".concat(className?className:\"\")},/*#__PURE__*/React.createElement(\"div\",{className:\"cl-item collection-card-text\"},label),/*#__PURE__*/React.createElement(\"div\",{className:\"cl-item collection-card-value\"},value?value:\"0.00\"),/*#__PURE__*/React.createElement(\"div\",{className:\"cl-item collection-card-button\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:onClick},\"\\u9886\\u53D6\")));};var PaoCont=function PaoCont(){};var Collection=function Collection(){var history=useHistory();// washcodeself_list\nvar _useState=useState(0),_useState2=_slicedToArray(_useState,2),key=_useState2[0],setKey=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),bonus=_useState4[0],setBonus=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),angpao=_useState6[0],setAngpao=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),level=_useState8[0],setLevel=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),grab=_useState10[0],setGrab=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),yuan=_useState12[0],setYuan=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),gift=_useState14[0],setGift=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),monthly=_useState16[0],setMonthly=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),success=_useState18[0],setSuccess=_useState18[1];var _useState19=useState([1,2,3,4,5,6,7,8,9,10]),_useState20=_slicedToArray(_useState19,2),UpgradeBonus=_useState20[0],setUpgradeBonus=_useState20[1];var upgradeData=[\"gid1903\",\"gid1905\",\"gid1909\",\"gid1910\",\"gid1911\",\"gid1912\",\"gid1913\",\"gid1914\",\"gid1915\",\"gid1916\"];function receiveBonus(recipient){var response=User.receiveBonus(_objectSpread(_objectSpread({},User.read()),{},{id:recipient}));response.promise.then(function(result){console.log(\"Bonus received\",result);setYuan(false);setSuccess(true);setAngpao(bonus.gid1908);var response=User.collection(_objectSpread({},User.read()));response.promise.then(function(result){console.log(result);if(result.status===1){setBonus(result.info);}},function(e){console.log(\"Unable to response:\",e);});},function(e){console.log(\"Unable to response:\",e);});}useEffect(function(){var response=User.collection(_objectSpread({},User.read()));response.promise.then(function(result){console.log(result);if(result.status===1){setBonus(result.info);setAngpao(result.info.gid1908);}},function(e){console.log(\"Unable to response:\",e);});var responseLvl=Transaction.read(_objectSpread(_objectSpread({},User.read()),{},{type:\"get_vip_level\"}));responseLvl.promise.then(function(r){console.log(r);if(r.status===1){setLevel(r.info.viplevel);}},function(e){});},[]);// console.log(level)\nreturn/*#__PURE__*/React.createElement(Wrap,{className:\"collection-wrap\",centerName:\"\\u4F18\\u60E0\\u9886\\u53D6\",faq:false// isLoading={true}\n,sublevel:[true,function(){return history.goBack();}]},/*#__PURE__*/React.createElement(\"div\",{className:\"collection-wrap-inner\"},/*#__PURE__*/React.createElement(\"div\",{className:\"collection-wrap-inner-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"collection-card\"},bonus&&/*#__PURE__*/React.createElement(\"div\",{className:\"collection-card-head\"},/*#__PURE__*/React.createElement(\"div\",{className:\"collection-card-title \".concat(key==0?\"active\":\"\"),onClick:function onClick(){return setKey(0);}},/*#__PURE__*/React.createElement(\"span\",null,\"\\u62A2\\u7EA2\\u5305\")),/*#__PURE__*/React.createElement(\"div\",{className:\"collection-card-title \".concat(key==1?\"active\":\"\"),onClick:function onClick(){return setKey(1);}},/*#__PURE__*/React.createElement(\"span\",null,\"\\u6BCF\\u6708\\u793C\\u91D1\")),/*#__PURE__*/React.createElement(\"div\",{className:\"collection-card-title \".concat(key==2?\"active\":\"\"),onClick:function onClick(){return setKey(2);}},/*#__PURE__*/React.createElement(\"span\",null,\"\\u5347\\u7EA7\\u793C\\u91D1\")),/*#__PURE__*/React.createElement(\"div\",{className:\"collection-card-title \".concat(key==3?\"active\":\"\"),onClick:function onClick(){return setKey(3);}},/*#__PURE__*/React.createElement(\"span\",null,\"\\u751F\\u65E5\\u793C\\u91D1\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"collection-card-body\"},bonus?/*#__PURE__*/React.createElement(\"div\",{className:\"collection-tabs col-tabs\".concat(key)},/*#__PURE__*/React.createElement(\"div\",{className:\"col-tab \".concat(key==0?\"active\":\"\")},/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box-icon\"},/*#__PURE__*/React.createElement(\"i\",{className:\"grab\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box col-pao-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-pao-box-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-pao-caption\"},\"\\u62A2\\u5230\\u7EA2\\u5305\\u91D1\\u989D\"),grab&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-pao-value\"},/*#__PURE__*/React.createElement(\"span\",null,angpao),\" RMB\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-pao-box-clip\"}),!grab&&!yuan&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-pao-box-chip\",onClick:function onClick(){setYuan(true);setTimeout(function(){receiveBonus(\"gid1908\");},2000);setTimeout(function(){setGrab(true);setYuan(false);},2500);}},\"\\u62A2\\u7EA2\\u5305\"),yuan&&!success?/*#__PURE__*/React.createElement(\"div\",{className:\"col-pao-box-yuan\"}):null))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-tab \".concat(key==1?\"active\":\"\")},/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box-icon\"},/*#__PURE__*/React.createElement(\"i\",{className:\"monthly\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box-title\"},\"\\u6BCF\\u6708\\u793C\\u91D1\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box-span\"},\"\\u60A8\\u83B7\\u5F97 \",/*#__PURE__*/React.createElement(\"span\",null,bonus.gid1906,\" \\u5143\\u7EA2\\u5305.\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box-action \".concat(monthly||bonus.gid1906==0?\"redeemed\":\"\")},/*#__PURE__*/React.createElement(\"span\",{onClick:bonus.gid1906==0?function(){return null;}:function(){receiveBonus(\"gid1906\");setMonthly(true);}},\"\\u7533\\u8BF7\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-tab \".concat(key==2?\"active\":\"\")},UpgradeBonus&&map(UpgradeBonus,function(obj,i){var identifier=upgradeData[i];return/*#__PURE__*/React.createElement(CardItem,{key:i,label:\"VIP\".concat(obj,\"\\u5347\\u7EA7\\u793C\\u91D1\"),value:bonus[identifier],className:bonus[identifier]&&bonus[identifier]!==\"0.00\"?\"active\":\"\",onClick:function onClick(){receiveBonus(identifier);}});})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-tab \".concat(key==3?\"active\":\"\")},/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box-icon\"},/*#__PURE__*/React.createElement(\"i\",{className:\"gift\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box-title\"},\"\\u751F\\u65E5\\u5FEB\\u4E50\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box-span\"},\"\\u60A8\\u83B7\\u5F97 \",/*#__PURE__*/React.createElement(\"span\",null,bonus.gid1907,\" \\u5143\\u7EA2\\u5305.\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-bonus-box-action \".concat(gift||bonus.gid1907==0?\"redeemed\":\"\")},/*#__PURE__*/React.createElement(\"span\",{onClick:bonus.gid1907==0?function(){return null;}:function(){receiveBonus(\"gid1907\");setGift(true);}},\"\\u7533\\u8BF7\")))))):/*#__PURE__*/React.createElement(\"div\",{className:\"no-transactions\"},/*#__PURE__*/React.createElement(\"div\",{className:\"image-box\"}),/*#__PURE__*/React.createElement(\"span\",null,\"\\u6682\\u65E0\\u8BB0\\u5F55\")))))),/*#__PURE__*/React.createElement(UIAlertSA,{onClose:function onClose(){return null;},shown:success},/*#__PURE__*/React.createElement(\"div\",{className:\"game-sa-overlay\"},/*#__PURE__*/React.createElement(\"div\",{className:\"overlay-layer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form response\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-head\"},/*#__PURE__*/React.createElement(\"i\",null),/*#__PURE__*/React.createElement(\"h2\",null,\"\\u606D\\u559C\\u60A8 \\u9886\\u53D6\\u6210\\u529F\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-body\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return setSuccess(false);}},\"\\u786E\\u8BA4\")))))));};export default withAuth(Collection,1);","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/GIT/src/pwa/view/Collection.js"],"names":["React","useState","useEffect","map","useHistory","Wrap","User","Transaction","withAuth","UIAlertSA","CardItem","props","label","value","className","onClick","PaoCont","Collection","history","key","setKey","bonus","setBonus","angpao","setAngpao","level","setLevel","grab","setGrab","yuan","setYuan","gift","setGift","monthly","setMonthly","success","setSuccess","UpgradeBonus","setUpgradeBonus","upgradeData","receiveBonus","recipient","response","read","id","promise","then","result","console","log","gid1908","collection","status","info","e","responseLvl","type","r","viplevel","goBack","setTimeout","gid1906","obj","i","identifier","gid1907"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { map } from \"lodash\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { Wrap } from \"../view/profile/\";\r\n\r\nimport \"../assets/scss/Collection.scss\";\r\nimport { User, Transaction } from \"../../service\";\r\nimport { withAuth } from \"../util/\";\r\nimport { UIAlertSA } from \"../component\";\r\n\r\nconst CardItem = (props) => {\r\n  const { label, value, className, onClick } = props;\r\n  return (\r\n    <div className={`collection-card-item ${className ? className : \"\"}`}>\r\n      <div className=\"cl-item collection-card-text\">{label}</div>\r\n      <div className=\"cl-item collection-card-value\">\r\n        {value ? value : \"0.00\"}\r\n      </div>\r\n      <div className=\"cl-item collection-card-button\">\r\n        <button type=\"button\" onClick={onClick}>\r\n          领取\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst PaoCont = () => {};\r\n\r\nconst Collection = () => {\r\n  const history = useHistory();\r\n  // washcodeself_list\r\n  const [key, setKey] = useState(0);\r\n  const [bonus, setBonus] = useState(null);\r\n  const [angpao, setAngpao] = useState(null);\r\n  const [level, setLevel] = useState(0);\r\n\r\n  const [grab, setGrab] = useState(false);\r\n  const [yuan, setYuan] = useState(false);\r\n  const [gift, setGift] = useState(false);\r\n  const [monthly, setMonthly] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const [UpgradeBonus, setUpgradeBonus] = useState([\r\n    1,\r\n    2,\r\n    3,\r\n    4,\r\n    5,\r\n    6,\r\n    7,\r\n    8,\r\n    9,\r\n    10,\r\n  ]);\r\n\r\n  const upgradeData = [\r\n    \"gid1903\",\r\n    \"gid1905\",\r\n    \"gid1909\",\r\n    \"gid1910\",\r\n    \"gid1911\",\r\n    \"gid1912\",\r\n    \"gid1913\",\r\n    \"gid1914\",\r\n    \"gid1915\",\r\n    \"gid1916\",\r\n  ];\r\n\r\n  function receiveBonus(recipient) {\r\n    const response = User.receiveBonus({\r\n      ...User.read(),\r\n      id: recipient,\r\n    });\r\n\r\n    response.promise.then(\r\n      (result) => {\r\n        console.log(\"Bonus received\", result);\r\n\r\n        setYuan(false);\r\n        setSuccess(true);\r\n        setAngpao(bonus.gid1908);\r\n\r\n        const response = User.collection({\r\n          ...User.read(),\r\n        });\r\n\r\n        response.promise.then(\r\n          (result) => {\r\n            console.log(result);\r\n            if (result.status === 1) {\r\n              setBonus(result.info);\r\n            }\r\n          },\r\n          (e) => {\r\n            console.log(\"Unable to response:\", e);\r\n          }\r\n        );\r\n      },\r\n      (e) => {\r\n        console.log(\"Unable to response:\", e);\r\n      }\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    const response = User.collection({\r\n      ...User.read(),\r\n    });\r\n\r\n    response.promise.then(\r\n      (result) => {\r\n        console.log(result);\r\n        if (result.status === 1) {\r\n          setBonus(result.info);\r\n          setAngpao(result.info.gid1908);\r\n        }\r\n      },\r\n      (e) => {\r\n        console.log(\"Unable to response:\", e);\r\n      }\r\n    );\r\n\r\n    const responseLvl = Transaction.read({\r\n      ...User.read(),\r\n      type: \"get_vip_level\",\r\n    });\r\n\r\n    responseLvl.promise.then(\r\n      (r) => {\r\n        console.log(r);\r\n        if (r.status === 1) {\r\n          setLevel(r.info.viplevel);\r\n        }\r\n      },\r\n      (e) => {}\r\n    );\r\n  }, []);\r\n\r\n  // console.log(level)\r\n  return (\r\n    <Wrap\r\n      className=\"collection-wrap\"\r\n      centerName=\"优惠领取\"\r\n      faq={false}\r\n      // isLoading={true}\r\n      sublevel={[true, () => history.goBack()]}\r\n    >\r\n      <div className=\"collection-wrap-inner\">\r\n        <div className=\"collection-wrap-inner-content\">\r\n          <div className=\"collection-card\">\r\n            {/* ==========================\tTEMPORARY COMMENT ========================== */}\r\n            {bonus && (\r\n              <div className=\"collection-card-head\">\r\n                <div\r\n                  className={`collection-card-title ${\r\n                    key == 0 ? \"active\" : \"\"\r\n                  }`}\r\n                  onClick={() => setKey(0)}\r\n                >\r\n                  <span>抢红包</span>\r\n                </div>\r\n                <div\r\n                  className={`collection-card-title ${\r\n                    key == 1 ? \"active\" : \"\"\r\n                  }`}\r\n                  onClick={() => setKey(1)}\r\n                >\r\n                  <span>每月礼金</span>\r\n                </div>\r\n                <div\r\n                  className={`collection-card-title ${\r\n                    key == 2 ? \"active\" : \"\"\r\n                  }`}\r\n                  onClick={() => setKey(2)}\r\n                >\r\n                  <span>升级礼金</span>\r\n                </div>\r\n                <div\r\n                  className={`collection-card-title ${\r\n                    key == 3 ? \"active\" : \"\"\r\n                  }`}\r\n                  onClick={() => setKey(3)}\r\n                >\r\n                  <span>生日礼金</span>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"collection-card-body\">\r\n              {bonus ? (\r\n                <div className={`collection-tabs col-tabs${key}`}>\r\n                  <div className={`col-tab ${key == 0 ? \"active\" : \"\"}`}>\r\n                    <div className=\"col-bonus-box-wrap\">\r\n                      <div className=\"col-bonus-box-icon\">\r\n                        <i className=\"grab\" />\r\n                      </div>\r\n                      <div className=\"col-bonus-box col-pao-box\">\r\n                        <div className=\"col-pao-box-body\">\r\n                          <div className=\"col-pao-caption\">抢到红包金额</div>\r\n                          {grab && (\r\n                            <div className=\"col-pao-value\">\r\n                              <span>{angpao}</span> RMB\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        <div className=\"col-pao-box-clip\" />\r\n\r\n                        {!grab && !yuan && (\r\n                          <div\r\n                            className=\"col-pao-box-chip\"\r\n                            onClick={() => {\r\n                              setYuan(true);\r\n                              setTimeout(() => {\r\n                                receiveBonus(\"gid1908\");\r\n                              }, 2000);\r\n                              setTimeout(() => {\r\n                                setGrab(true);\r\n                                setYuan(false);\r\n                              }, 2500);\r\n                            }}\r\n                          >\r\n                            抢红包\r\n                          </div>\r\n                        )}\r\n                        {yuan && !success ? (\r\n                          <div className=\"col-pao-box-yuan\" />\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className={`col-tab ${key == 1 ? \"active\" : \"\"}`}>\r\n                    <div className=\"col-bonus-box-wrap\">\r\n                      <div className=\"col-bonus-box-icon\">\r\n                        <i className=\"monthly\" />\r\n                      </div>\r\n                      <div className=\"col-bonus-box\">\r\n                        <div className=\"col-bonus-box-title\">每月礼金</div>\r\n                        <div className=\"col-bonus-box-span\">\r\n                          您获得 <span>{bonus.gid1906} 元红包.</span>\r\n                        </div>\r\n                        <div\r\n                          className={`col-bonus-box-action ${\r\n                            monthly || bonus.gid1906 == 0 ? \"redeemed\" : \"\"\r\n                          }`}\r\n                        >\r\n                          {/* <i /> */}\r\n                          <span\r\n                            onClick={\r\n                              bonus.gid1906 == 0\r\n                                ? () => null\r\n                                : () => {\r\n                                    receiveBonus(\"gid1906\");\r\n                                    setMonthly(true);\r\n                                  }\r\n                            }\r\n                          >\r\n                            申请\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className={`col-tab ${key == 2 ? \"active\" : \"\"}`}>\r\n                    {UpgradeBonus &&\r\n                      map(UpgradeBonus, (obj, i) => {\r\n                        const identifier = upgradeData[i];\r\n                        return (\r\n                          <CardItem\r\n                            key={i}\r\n                            label={`VIP${obj}升级礼金`}\r\n                            value={bonus[identifier]}\r\n                            className={\r\n                              bonus[identifier] && bonus[identifier] !== \"0.00\"\r\n                                ? \"active\"\r\n                                : \"\"\r\n                            }\r\n                            onClick={() => {\r\n                              receiveBonus(identifier);\r\n                            }}\r\n                          />\r\n                        );\r\n                      })}\r\n                  </div>\r\n                  <div className={`col-tab ${key == 3 ? \"active\" : \"\"}`}>\r\n                    <div className=\"col-bonus-box-wrap\">\r\n                      <div className=\"col-bonus-box-icon\">\r\n                        <i className=\"gift\" />\r\n                      </div>\r\n                      <div className=\"col-bonus-box\">\r\n                        <div className=\"col-bonus-box-title\">生日快乐</div>\r\n                        <div className=\"col-bonus-box-span\">\r\n                          您获得 <span>{bonus.gid1907} 元红包.</span>\r\n                        </div>\r\n                        <div\r\n                          className={`col-bonus-box-action ${\r\n                            gift || bonus.gid1907 == 0 ? \"redeemed\" : \"\"\r\n                          }`}\r\n                        >\r\n                          {/* <i /> */}\r\n                          <span\r\n                            onClick={\r\n                              bonus.gid1907 == 0\r\n                                ? () => null\r\n                                : () => {\r\n                                    receiveBonus(\"gid1907\");\r\n                                    setGift(true);\r\n                                  }\r\n                            }\r\n                          >\r\n                            申请\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"no-transactions\">\r\n                  <div className=\"image-box\" />\r\n                  <span>暂无记录</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <UIAlertSA onClose={() => null} shown={success}>\r\n        <div className={`game-sa-overlay`}>\r\n          <div className=\"overlay-layer\">\r\n            <div className=\"form response\">\r\n              <div className=\"form-head\">\r\n                <i />\r\n                <h2>恭喜您 领取成功</h2>\r\n              </div>\r\n              <div className=\"form-body\">\r\n                <button onClick={() => setSuccess(false)}>确认</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </UIAlertSA>\r\n    </Wrap>\r\n  );\r\n};\r\n\r\nexport default withAuth(Collection, 1);\r\n"]},"metadata":{},"sourceType":"module"}