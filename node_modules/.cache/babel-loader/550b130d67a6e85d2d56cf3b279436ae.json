{"ast":null,"code":"import _objectSpread from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useParams,useHistory,useLocation}from'react-router-dom';import{withAuth}from'../util/';import{User}from'../service';import{Game as Service}from'../service';var externals=[1204,1209,1211];function Game(){var history=useHistory();var _useParams=useParams(),id=_useParams.id;var isExternal=externals.includes(+id);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),iframe=_useState2[0],setIframe=_useState2[1];var _useLocation=useLocation(),search=_useLocation.search;// eslint-disable-next-line\nvar _useState3=useState(search.includes('from_home=1')),_useState4=_slicedToArray(_useState3,2),fromHome=_useState4[0],setFromHome=_useState4[1];useEffect(function(){if(fromHome){history.replace({search:''});}},[history,fromHome]);useEffect(function(){window.scrollTo(0,0);},[]);useEffect(function(){var user=User.read();var req=Service.activate(_objectSpread(_objectSpread({},user),{},{num:1,gameid:id}));function LogIn(){Service.login(_objectSpread(_objectSpread({},user),{},{num:1,gameid:id})).promise.then(function(r){console.log(r);// setIframe(r.info);\nif(!isExternal){setIframe(r.info);}else{if(fromHome){window.location.href=r.info;}else{history.push('/');}}},function(e){console.error('Unable to login to the game',e);});}req.promise.then(function(r){console.log(r);LogIn();},function(e){if(!e.is_aborted){console.error('Unable to activate the game:',e);LogIn();}});return function(){return req.cancel();};},[history,id,fromHome,isExternal]);return/*#__PURE__*/React.createElement(React.Fragment,null,iframe?/*#__PURE__*/React.createElement(\"iframe\",{style:{height:800,overflow:'auto'},title:\"IFRAME-N\".concat(id),src:iframe}):null);}export default withAuth(Game,1);","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/ubet-project (1)/src/view/Game.js"],"names":["React","useState","useEffect","useParams","useHistory","useLocation","withAuth","User","Game","Service","externals","history","id","isExternal","includes","iframe","setIframe","search","fromHome","setFromHome","replace","window","scrollTo","user","read","req","activate","num","gameid","LogIn","login","promise","then","r","console","log","info","location","href","push","e","error","is_aborted","cancel","height","overflow"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useHistory, useLocation } from 'react-router-dom';\r\n\r\nimport { withAuth } from '../util/';\r\nimport { User } from '../service';\r\nimport { Game as Service } from '../service';\r\n\r\nconst externals = [ 1204, 1209, 1211 ];\r\n\r\nfunction Game () {\r\n\r\n\tconst history = useHistory();\r\n\r\n\tconst { id } = useParams();\r\n\tconst isExternal = externals.includes(+ id);\r\n\tconst [ iframe, setIframe ] = useState(null);\r\n\r\n\tconst { search } = useLocation();\r\n\t// eslint-disable-next-line\r\n\tconst [ fromHome, setFromHome ] = useState(search.includes('from_home=1'));\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tif (fromHome) {\r\n\t\t\thistory.replace({ search: '' });\r\n\t\t}\r\n\r\n\t}, [ history, fromHome ]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\twindow.scrollTo(0, 0);\r\n\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconst user = User.read();\r\n\r\n\t\tconst req = Service.activate({\r\n\t\t\t...user,\r\n\t\t\tnum: 1,\r\n\t\t\tgameid: id,\r\n\t\t});\r\n\r\n\t\tfunction LogIn () {\r\n\r\n\t\t\tService.login({\r\n\t\t\t\t...user,\r\n\t\t\t\tnum: 1,\r\n\t\t\t\tgameid: id,\r\n\t\t\t}).promise.then(r => {\r\n\r\n\t\t\t\tconsole.log(r);\r\n\r\n\t\t\t\t// setIframe(r.info);\r\n\r\n\t\t\t\tif (!isExternal) {\r\n\r\n\t\t\t\t\tsetIframe(r.info);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif (fromHome) {\r\n\t\t\t\t\t\twindow.location.href = r.info;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\thistory.push('/');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, e => {\r\n\r\n\t\t\t\tconsole.error('Unable to login to the game', e);\r\n\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t\treq.promise.then(r => {\r\n\r\n\t\t\tconsole.log(r);\r\n\r\n\t\t\tLogIn();\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tif (!e.is_aborted) {\r\n\r\n\t\t\t\tconsole.error('Unable to activate the game:', e);\r\n\r\n\t\t\t\tLogIn();\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn () => req.cancel();\r\n\r\n\t}, [ history, id, fromHome, isExternal ]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{iframe ? (\r\n\t\t\t<iframe \r\n\t\t\t\tstyle={{ height: 800, overflow: 'auto' }}\r\n\t\t\t\ttitle={`IFRAME-N${id}`}\r\n\t\t\t\tsrc={iframe}>\r\n\t\t\t</iframe>\r\n\t\t\t) : null}\r\n\t\t</>\r\n\t);\r\n\r\n}\r\n\r\nexport default withAuth(Game, 1);\r\n"]},"metadata":{},"sourceType":"module"}