{"ast":null,"code":"import _objectSpread from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Wrap,Service}from'./';var Betting=function Betting(){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),game=_useState4[0],setGame=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),history=_useState6[0],setHistory=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),activeItem=_useState8[0],setActiveItem=_useState8[1];var games=Service.Game.list();var Filter={bti:function bti(i){return{created_ts:i.creat_date,name:'',amount:\"\".concat(i.win,\"\\u5143\"),status:+i.win>0,raw:i,sub:[{name:'投注金额',value:i.bet},{name:'赢/输',value:i.win},{name:'状态',value:i.status},{name:'结算状态',value:i.line_type_name},{name:'投注类型',value:i.bet_type_name},{name:'细节',value:i.branch_name},{name:'创立日期',value:i.creat_date},{name:'票据编号',value:i.game_board}]};},im:function im(i){return{created_ts:i.creat_time,name:'',amount:\"\".concat(i.win,\"\\u5143\"),status:+i.win>0,raw:i,sub:[{name:'投注金额',value:i.bet},{name:'赢/输',value:i.win},{name:'主队',value:i.hometeamname},{name:'客队',value:i.awayteamname},{name:'投注类型',value:i.bettype},{name:'活动名称',value:i.eventname},{name:'更新时间',value:i.update_time},{name:'票据编号',value:i.id}]};},ag:function ag(i){return{created_ts:i.created_time,name:'',amount:\"\".concat(i.win,\"\\u5143\"),status:+i.win>0,raw:i,sub:[{name:'游戏名称',value:i.game_name},{name:'投注金额',value:i.bet},{name:'赢/输',value:i.win},{name:'票据编号',value:i.game_board},{name:'创立日期',value:i.created_time}]};}};var _setGame=function _setGame(game){if(!game.betting_key){console.warn('No betting key provided for this game:',game);return;}setGame(game);setStatus(0);setHistory([]);Service.Game.getBettingHistory(_objectSpread(_objectSpread({},Service.User.read()),{},{type:game.betting_key})).promise.then(function(r){console.log(r);var history=r.info.list.map(Filter[game.betting_key]);setHistory(history);setStatus(1);},function(e){console.warn('Unable to get betting history records:',e);setHistory([]);setStatus(1);});};return/*#__PURE__*/React.createElement(Wrap,{className:\"profile-betting-history\",name:\"\\u6295\\u6CE8\\u5386\\u53F2\",sublevel:[game,function(){setGame(null);setActiveItem(null);}],isLoading:!status},game?/*#__PURE__*/React.createElement(\"div\",{className:\"game-history\"},history.map(function(item,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"game-history--item\".concat(i===activeItem?' opened':''),key:i,onClick:function onClick(){return setActiveItem(activeItem!==null?null:i);}},/*#__PURE__*/React.createElement(\"div\",{className:\"game-history--item-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"p\",{className:\"content--item timestamp\"},item.created_ts),/*#__PURE__*/React.createElement(\"p\",{className:\"content--item name\"},item.name),/*#__PURE__*/React.createElement(\"p\",{className:\"content--item amount\"},item.amount)),/*#__PURE__*/React.createElement(\"div\",{className:\"status status--\".concat(item.status?'green':'red')},/*#__PURE__*/React.createElement(\"p\",null,item.status?'赢得':'失利'))),i===activeItem?/*#__PURE__*/React.createElement(\"div\",{className:\"game-history--item-subwrap\"},/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"tbody\",null,item.sub.map(function(param,i){return/*#__PURE__*/React.createElement(\"tr\",{key:i},/*#__PURE__*/React.createElement(\"td\",null,param.name),/*#__PURE__*/React.createElement(\"td\",null,param.value));})))):null);})):/*#__PURE__*/React.createElement(\"div\",{className:\"games-list\"},games.filter(function(g){return g.betting_key;}).map(function(g,i){return/*#__PURE__*/React.createElement(\"button\",{key:i,className:\"game game--\".concat(g.name),onClick:function onClick(e){return _setGame(g);}},/*#__PURE__*/React.createElement(\"div\",{className:\"game-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"})));})));};export default Betting;","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/ubet-project (1)/src/pwa/view/profile/Betting.jsx"],"names":["React","useState","Wrap","Service","Betting","status","setStatus","game","setGame","history","setHistory","activeItem","setActiveItem","games","Game","list","Filter","bti","i","created_ts","creat_date","name","amount","win","raw","sub","value","bet","line_type_name","bet_type_name","branch_name","game_board","im","creat_time","hometeamname","awayteamname","bettype","eventname","update_time","id","ag","created_time","game_name","_setGame","betting_key","console","warn","getBettingHistory","User","read","type","promise","then","r","log","info","map","e","item","param","filter","g"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\n\r\nimport { Wrap, Service } from './';\r\n\r\nconst Betting = () => {\r\n\r\n\tconst [ status, setStatus ] = useState(1);\r\n\r\n\tconst [ game, setGame ] = useState(null);\r\n\tconst [ history, setHistory ] = useState([]);\r\n\r\n\tconst [ activeItem, setActiveItem ] = useState(null);\r\n\r\n\tconst games = Service.Game.list();\r\n\r\n\tconst Filter = {\r\n\t\tbti (i) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcreated_ts: i.creat_date,\r\n\t\t\t\tname: '',\r\n\t\t\t\tamount: `${i.win}元`,\r\n\t\t\t\tstatus: (+ i.win) > 0,\r\n\t\t\t\traw: i,\r\n\t\t\t\tsub: [\r\n\t\t\t\t\t{ name: '投注金额', value: i.bet, },\r\n\t\t\t\t\t{ name: '赢/输', value: i.win, },\r\n\t\t\t\t\t{ name: '状态', value: i.status, },\r\n\t\t\t\t\t{ name: '结算状态', value: i.line_type_name, },\r\n\t\t\t\t\t{ name: '投注类型', value: i.bet_type_name, },\r\n\t\t\t\t\t{ name: '细节', value: i.branch_name, },\r\n\t\t\t\t\t{ name: '创立日期', value: i.creat_date, },\r\n\t\t\t\t\t{ name: '票据编号', value: i.game_board, },\r\n\t\t\t\t],\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tim (i) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcreated_ts: i.creat_time,\r\n\t\t\t\tname: '',\r\n\t\t\t\tamount: `${i.win}元`,\r\n\t\t\t\tstatus: (+ i.win) > 0,\r\n\t\t\t\traw: i,\r\n\t\t\t\tsub: [\r\n\t\t\t\t\t{ name: '投注金额', value: i.bet },\r\n\t\t\t\t\t{ name: '赢/输', value: i.win },\r\n\t\t\t\t\t{ name: '主队', value: i.hometeamname },\r\n\t\t\t\t\t{ name: '客队', value: i.awayteamname },\r\n\t\t\t\t\t{ name: '投注类型', value: i.bettype },\r\n\t\t\t\t\t{ name: '活动名称', value: i.eventname },\r\n\t\t\t\t\t{ name: '更新时间', value: i.update_time },\r\n\t\t\t\t\t{ name: '票据编号', value: i.id },\r\n\t\t\t\t],\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tag (i) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcreated_ts: i.created_time,\r\n\t\t\t\tname: '',\r\n\t\t\t\tamount: `${i.win}元`,\r\n\t\t\t\tstatus: (+ i.win) > 0,\r\n\t\t\t\traw: i,\r\n\t\t\t\tsub: [\r\n\t\t\t\t\t{ name: '游戏名称', value: i.game_name, },\r\n\t\t\t\t\t{ name: '投注金额', value: i.bet, },\r\n\t\t\t\t\t{ name: '赢/输', value: i.win, },\r\n\t\t\t\t\t{ name: '票据编号', value: i.game_board, },\r\n\t\t\t\t\t{ name: '创立日期', value: i.created_time, },\r\n\t\t\t\t],\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t};\r\n\r\n\tconst _setGame = game => {\r\n\r\n\t\tif (!game.betting_key) {\r\n\t\t\tconsole.warn('No betting key provided for this game:', game);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetGame(game);\r\n\t\tsetStatus(0);\r\n\t\tsetHistory([]);\r\n\r\n\t\tService.Game.getBettingHistory({\r\n\t\t\t...Service.User.read(),\r\n\t\t\ttype: game.betting_key,\r\n\t\t}).promise.then(r => {\r\n\r\n\t\t\tconsole.log(r);\r\n\r\n\t\t\tconst history = r.info.list.map(Filter[game.betting_key]);\r\n\r\n\t\t\tsetHistory(history);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tconsole.warn('Unable to get betting history records:', e);\r\n\r\n\t\t\tsetHistory([]);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Wrap className=\"profile-betting-history\" name=\"投注历史\" sublevel={[ game, () => { setGame(null); setActiveItem(null); } ]} isLoading={!status}>\r\n\t\t\t{game ? (\r\n\t\t\t<div className=\"game-history\">\r\n\t\t\t\t{history.map((item, i) => (\r\n\t\t\t\t<div className={`game-history--item${i === activeItem ? ' opened' : ''}`} key={i} onClick={() => setActiveItem((activeItem !== null ? null : i))}>\r\n\t\t\t\t\t<div className=\"game-history--item-wrap\">\r\n\t\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t\t<p className=\"content--item timestamp\">{item.created_ts}</p>\r\n\t\t\t\t\t\t\t<p className=\"content--item name\">{item.name}</p>\r\n\t\t\t\t\t\t\t<p className=\"content--item amount\">{item.amount}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={`status status--${item.status ? 'green' : 'red'}`}>\r\n\t\t\t\t\t\t\t<p>{item.status ? '赢得' : '失利'}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{i === activeItem ? (\r\n\t\t\t\t\t<div className=\"game-history--item-subwrap\">\r\n\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t{item.sub.map((param, i) => (\r\n\t\t\t\t\t\t\t\t<tr key={i}>\r\n\t\t\t\t\t\t\t\t\t<td>{param.name}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{param.value}</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t<div className=\"games-list\">\r\n\t\t\t\t{games.filter(g => g.betting_key).map((g, i) => (\r\n\t\t\t\t<button key={i} className={`game game--${g.name}`} onClick={e => _setGame(g)}>\r\n\t\t\t\t\t<div className=\"game-content\">\r\n\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</button>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Wrap>\r\n\t);\r\n\r\n\r\n\r\n}\r\n\r\nexport default Betting;\r\n"]},"metadata":{},"sourceType":"module"}