{"ast":null,"code":"import _objectSpread from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{map,isEmpty}from'lodash';import{Service}from'../';var CardItem=function CardItem(props){var label=props.label,time=props.time,value=props.value,status=props.status,className=props.className;return/*#__PURE__*/React.createElement(\"div\",{className:\"deposity-history-card-item \".concat(className?className:\"\")},/*#__PURE__*/React.createElement(\"div\",{className:\"cl-item deposity-history-card-text\"},/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-text\"},label),/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-time\"},time)),/*#__PURE__*/React.createElement(\"div\",{className:\"cl-item deposity-history-card-value\"},/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-amount\"},\"\\u91D1\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,value)),/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-status \".concat(status===\"成功\"?\"success\":\"failure\")},/*#__PURE__*/React.createElement(\"span\",null,status))));};var RebateHistory=function RebateHistory(props){var id=props.id,refresh=props.refresh,onStop=props.onStop;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];useEffect(function(){if(refresh==id){setLoad(true);}},[refresh]);useEffect(function(){var fetch=function fetch(){// console.log(User.read())\nvar req=Service.Transaction.read(_objectSpread(_objectSpread({},Service.User.read()),{},{record_type:\"deposit\",type:\"record_list\"}));req.promise.then(function(result){if(result.status===1){setItems(result.info);setLoad(false);onStop();}},function(e){console.log(\"Unable to response:\",e);});};fetch();},[load]);if(!isEmpty(items)){return/*#__PURE__*/React.createElement(\"div\",{className:\"deposit-history-card-body\"},map(items,function(obj,i){return/*#__PURE__*/React.createElement(CardItem,{key:i,label:obj.payType,time:obj.endTime,value:obj.amount,status:obj.status});}));}return/*#__PURE__*/React.createElement(\"div\",{className:\"no-transactions\"},/*#__PURE__*/React.createElement(\"div\",{className:\"image-box\"}),/*#__PURE__*/React.createElement(\"span\",null,\"\\u6682\\u65E0\\u8BB0\\u5F55\"));};export default RebateHistory;","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/ubet-project (1)/src/view/profile/transferhistory/deposityhistory.js"],"names":["React","useEffect","useState","map","isEmpty","Service","CardItem","props","label","time","value","status","className","RebateHistory","id","refresh","onStop","items","setItems","load","setLoad","fetch","req","Transaction","read","User","record_type","type","promise","then","result","info","e","console","log","obj","i","payType","endTime","amount"],"mappings":"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","sourcesContent":["import React  ,{ useEffect, useState }from \"react\";\r\nimport { map , isEmpty} from 'lodash'\r\n\r\nimport { Service } from '../'\r\n\r\n\r\n\r\nconst CardItem = (props) => {\r\n    const { label, time, value, status, className } = props;\r\n    return (\r\n      <div className={`deposity-history-card-item ${className ? className : \"\"}`}>\r\n        <div className=\"cl-item deposity-history-card-text\">\r\n          <p className=\"cl-card-text\">{label}</p>\r\n          <p className=\"cl-card-time\">{time}</p>\r\n        </div>\r\n        <div className=\"cl-item deposity-history-card-value\">\r\n          <p className=\"cl-card-amount\">\r\n            金额: <span>{value}</span>\r\n          </p>\r\n          <p\r\n            className={`cl-card-status ${\r\n              status === \"成功\" ? \"success\" : \"failure\"\r\n            }`}\r\n          >\r\n            {/* <span>\t{status? \"成功\" : \"失败\"}</span> */}\r\n            <span>{status}</span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\nconst RebateHistory = (props) => {\r\n    const { id ,refresh , onStop } = props\r\n\r\n    const [items, setItems] = useState([]);\r\n    const [load, setLoad] = useState(false);\r\n\r\n    useEffect(() =>{\r\n      if(refresh == id ){\r\n        setLoad(true)\r\n      }\r\n    },[refresh])\r\n\r\n    useEffect(() => {\r\n        const fetch = () => {\r\n          // console.log(User.read())\r\n          const req = Service.Transaction.read({\r\n              ...Service.User.read(),\r\n              record_type: \"deposit\",\r\n              type: \"record_list\",\r\n          });\r\n\r\n          req.promise.then((result) => {\r\n              if (result.status === 1) {\r\n                  setItems(result.info);\r\n                  setLoad(false)\r\n                  onStop()\r\n              }\r\n          },(e) => {\r\n              console.log(\"Unable to response:\", e);\r\n          })\r\n        };\r\n        fetch();\r\n    }, [load]);\r\n\r\n    if(!isEmpty(items)){\r\n        return  <div className=\"deposit-history-card-body\">\r\n                    {\r\n                    map(items, (obj, i) => {\r\n                        return (\r\n                        <CardItem\r\n                            key={i}\r\n                            label={obj.payType}\r\n                            time={obj.endTime}\r\n                            value={obj.amount}\r\n                            status={obj.status}\r\n                          />\r\n                        );\r\n                    })\r\n                    }\r\n\r\n                </div>\r\n    }\r\n\r\n    return  <div className=\"no-transactions\">\r\n                <div className=\"image-box\" />\r\n                <span>暂无记录</span>\r\n            </div>\r\n\r\n\r\n}\r\n\r\nexport default RebateHistory"]},"metadata":{},"sourceType":"module"}