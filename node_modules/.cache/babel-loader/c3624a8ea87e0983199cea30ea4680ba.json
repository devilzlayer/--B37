{"ast":null,"code":"import _slicedToArray from\"/Users/cramj/Documents/New PWA/GIT/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,useCallback,useContext}from\"react\";import{NavLink,useLocation}from\"react-router-dom\";import cx from\"classnames\";import{User}from'../../service/';import{Icon}from\"../../component/\";import\"../assets/scss/MenuSA.scss\";var FrameURL=\"https://vm.providesupport.com/01kenrfglk04u0n305fdg0321r\";function MenuSAItem(props){if(props.open){return/*#__PURE__*/React.createElement(\"button\",{className:\"menu--item \".concat(props.liveChat?\"active\":\"\"),onClick:props.open},/*#__PURE__*/React.createElement(\"div\",{className:\"icon \".concat(props.icon)}),/*#__PURE__*/React.createElement(\"div\",{className:\"name\"},props.name));}if(props.to===\"/profile\"){return/*#__PURE__*/React.createElement(NavLink,{exact:true,className:\"menu--item\",to:props.to,isActive:function isActive(match,location){var path=location.pathname.split(\"/\")[1];return path===\"profile\";}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon \".concat(props.icon)}),/*#__PURE__*/React.createElement(\"div\",{className:\"name\"},props.name));}if(props.to===\"/promotions\"){return/*#__PURE__*/React.createElement(NavLink,{exact:true,className:\"menu--item\",to:props.to,isActive:function isActive(match,location){var path=location.pathname.split(\"/\")[1];return path===\"promotion\"||path===\"promotions\";}},/*#__PURE__*/React.createElement(\"div\",{className:\"icon \".concat(props.icon)}),/*#__PURE__*/React.createElement(\"div\",{className:\"name\"},props.name));}return/*#__PURE__*/React.createElement(NavLink,{exact:true,className:\"menu--item\",to:props.to},/*#__PURE__*/React.createElement(\"div\",{className:\"icon \".concat(props.icon)}),/*#__PURE__*/React.createElement(\"div\",{className:\"name\"},props.name));}function MenuSA(){var menuSwitch=useRef(null);var _useState=useState(0),_useState2=_slicedToArray(_useState,2),menuSwitchOffset=_useState2[0],menuSwitchOffsetSet=_useState2[1];var _useContext=useContext(User.Context),setUserAuthFN=_useContext.setUserAuthFN,userAuth=_useContext.userAuth;var location=useLocation();var resize=useCallback(function(path){var item=document.querySelector(\"a[href='\".concat(path,\"'].menu--item\"));if(!item){menuSwitchOffsetSet(0);return function(){};}menuSwitchOffsetSet(item.offsetLeft+2);},[]);useEffect(function(){var path=location.pathname;if(path.split(\"/\")[1]===\"promotion\"){path=\"/promotions\";}if(path.split(\"/\")[1]===\"profile\"){path=\"/profile\";}resize(path);window.addEventListener(\"resize\",function(){return resize(path);});setLiveChat(false);return function(){return window.removeEventListener(\"resize\",function(){return resize(path);});};},[location.pathname,resize]);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),liveChat=_useState4[0],setLiveChat=_useState4[1];var onSetLive=function onSetLive(){if(!userAuth.data){setUserAuthFN(userAuth.status,userAuth.data,true);return false;}setLiveChat(!liveChat);};return/*#__PURE__*/React.createElement(\"div\",{className:\"menu-sa\"},liveChat?/*#__PURE__*/React.createElement(\"div\",{className:cx(\"menu-sa-live-chat\",{shown:liveChat})},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return setLiveChat(false);}},/*#__PURE__*/React.createElement(Icon,{name:\"close-circle-sharp\"})),/*#__PURE__*/React.createElement(\"iframe\",{title:\"live chat\",src:FrameURL,frameBorder:\"0\"})):null,/*#__PURE__*/React.createElement(\"div\",{className:\"menu-sa-inner\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu-sa-wrap\"},/*#__PURE__*/React.createElement(MenuSAItem,{icon:\"home\",name:\"\\u9996\\u9875\",to:\"/\"}),/*#__PURE__*/React.createElement(MenuSAItem,{icon:\"promotions\",name:\"\\u4F18\\u60E0\",to:\"/promotions\"}),/*#__PURE__*/React.createElement(MenuSAItem,{icon:\"faq\",name:\"\\u5BA2\\u670D\",open:onSetLive,liveChat:liveChat}),/*#__PURE__*/React.createElement(MenuSAItem,{icon:\"profile\",name:\"\\u6211\\u7684\",to:\"/profile\"}),/*#__PURE__*/React.createElement(\"div\",{ref:menuSwitch,style:{transform:\"translateX(\".concat(menuSwitchOffset,\"px)\"),display:menuSwitchOffset>0?\"block\":\"none\"},className:\"menu--switch\"}))));}export default MenuSA;","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/GIT/src/pwa/component/MenuSA.js"],"names":["React","useState","useEffect","useRef","useCallback","useContext","NavLink","useLocation","cx","User","Icon","FrameURL","MenuSAItem","props","open","liveChat","icon","name","to","match","location","path","pathname","split","MenuSA","menuSwitch","menuSwitchOffset","menuSwitchOffsetSet","Context","setUserAuthFN","userAuth","resize","item","document","querySelector","offsetLeft","window","addEventListener","setLiveChat","removeEventListener","onSetLive","data","status","shown","transform","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useCallback  ,useContext} from \"react\";\r\nimport { NavLink, useLocation } from \"react-router-dom\";\r\nimport cx from \"classnames\";\r\nimport { User } from '../../service/';\r\n\r\nimport { Icon } from \"../../component/\";\r\n\r\nimport \"../assets/scss/MenuSA.scss\";\r\n\r\nconst FrameURL = \"https://vm.providesupport.com/01kenrfglk04u0n305fdg0321r\";\r\n\r\nfunction MenuSAItem(props) {\r\n  if (props.open) {\r\n    return (\r\n      <button\r\n        className={`menu--item ${props.liveChat ? \"active\" : \"\"}`}\r\n        onClick={props.open}\r\n      >\r\n        <div className={`icon ${props.icon}`}>{/* {icons[props.icon]} */}</div>\r\n        <div className=\"name\">{props.name}</div>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  if (props.to === \"/profile\") {\r\n    return (\r\n      <NavLink\r\n        exact\r\n        className=\"menu--item\"\r\n        to={props.to}\r\n        isActive={(match, location) => {\r\n          const path = location.pathname.split(\"/\")[1];\r\n          return path === \"profile\";\r\n        }}\r\n      >\r\n        <div className={`icon ${props.icon}`}>{/* {icons[props.icon]} */}</div>\r\n        <div className=\"name\">{props.name}</div>\r\n      </NavLink>\r\n    );\r\n  }\r\n\r\n  if (props.to === \"/promotions\") {\r\n    return (\r\n      <NavLink\r\n        exact\r\n        className=\"menu--item\"\r\n        to={props.to}\r\n        isActive={(match, location) => {\r\n          const path = location.pathname.split(\"/\")[1];\r\n          return path === \"promotion\" || path === \"promotions\";\r\n        }}\r\n      >\r\n        <div className={`icon ${props.icon}`}>{/* {icons[props.icon]} */}</div>\r\n        <div className=\"name\">{props.name}</div>\r\n      </NavLink>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <NavLink exact className=\"menu--item\" to={props.to}>\r\n      <div className={`icon ${props.icon}`}>{/* {icons[props.icon]} */}</div>\r\n      <div className=\"name\">{props.name}</div>\r\n    </NavLink>\r\n  );\r\n}\r\n\r\nfunction MenuSA() {\r\n  const menuSwitch = useRef(null);\r\n  const [menuSwitchOffset, menuSwitchOffsetSet] = useState(0);\r\n  const { setUserAuthFN ,userAuth } = useContext(User.Context);\r\n\r\n  const location = useLocation();\r\n\r\n  const resize = useCallback((path) => {\r\n    const item = document.querySelector(`a[href='${path}'].menu--item`);\r\n\r\n    if (!item) {\r\n      menuSwitchOffsetSet(0);\r\n      return () => {};\r\n    }\r\n\r\n    menuSwitchOffsetSet(item.offsetLeft + 2);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let path = location.pathname;\r\n\r\n    if (path.split(\"/\")[1] === \"promotion\") {\r\n      path = \"/promotions\";\r\n    }\r\n\r\n    if (path.split(\"/\")[1] === \"profile\") {\r\n      path = \"/profile\";\r\n    }\r\n\r\n    resize(path);\r\n\r\n    window.addEventListener(\"resize\", () => resize(path));\r\n\r\n    setLiveChat(false);\r\n\r\n    return () => window.removeEventListener(\"resize\", () => resize(path));\r\n  }, [location.pathname, resize]);\r\n\r\n  const [liveChat, setLiveChat] = useState(false);\r\n\r\n\r\n  const onSetLive = () => {\r\n    if(!userAuth.data){\r\n      setUserAuthFN(userAuth.status , userAuth.data , true)\r\n      return false\r\n    }\r\n    setLiveChat(!liveChat)\r\n  }\r\n\r\n  return (\r\n    <div className=\"menu-sa\">\r\n      {liveChat ? (\r\n        <div className={cx(\"menu-sa-live-chat\", { shown: liveChat })}>\r\n          <button onClick={() => setLiveChat(false)}>\r\n            <Icon name=\"close-circle-sharp\" />\r\n          </button>\r\n          <iframe title=\"live chat\" src={FrameURL} frameBorder=\"0\" />\r\n        </div>\r\n      ) : null}\r\n      <div className=\"menu-sa-inner\">\r\n        <div className=\"menu-sa-wrap\">\r\n          <MenuSAItem icon=\"home\" name=\"首页\" to=\"/\" />\r\n          <MenuSAItem icon=\"promotions\" name=\"优惠\" to=\"/promotions\" />\r\n          <MenuSAItem\r\n            icon=\"faq\"\r\n            name=\"客服\"\r\n            open={onSetLive}\r\n            liveChat={liveChat}\r\n          />\r\n          <MenuSAItem icon=\"profile\" name=\"我的\" to=\"/profile\" />\r\n          <div\r\n            ref={menuSwitch}\r\n            style={{\r\n              transform: `translateX(${menuSwitchOffset}px)`,\r\n              display: menuSwitchOffset > 0 ? \"block\" : \"none\",\r\n            }}\r\n            className=\"menu--switch\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MenuSA;\r\n"]},"metadata":{},"sourceType":"module"}