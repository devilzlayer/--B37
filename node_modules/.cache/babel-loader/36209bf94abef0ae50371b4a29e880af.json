{"ast":null,"code":"\"use strict\";\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  result[\"default\"] = mod;\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst react_1 = __importStar(require(\"react\"));\n\nconst styled_components_1 = __importDefault(require(\"styled-components\"));\n\nconst WheelPickerItem_1 = __importDefault(require(\"../components/WheelPickerItem\"));\n\nconst useObserver_1 = __importDefault(require(\"../hooks/useObserver\"));\n\nconst optionID_1 = require(\"../constants/optionID\");\n\nconst useHandleKeyboard_1 = __importDefault(require(\"../hooks/useHandleKeyboard\"));\n\nconst List = styled_components_1.default.ul`\n  position: relative;\n  margin: 0;\n  padding: 0;\n  display: inline-block;\n  list-style: none;\n  overflow-y: scroll;\n  will-change: transform;\n  overflow-x: hidden;\n  text-align: center;\n  padding: 0 20px;\n  ${props => `\n    height: ${props.height}px;\n    width: ${props.width};\n    background-color: ${props.backgroundColor};\n    box-shadow: 1px 3px 10px ${props.shadowColor} inset;\n    &:focus {\n      outline: 2px solid ${props.focusColor};\n    }\n  `}\n`;\n\nconst calculateSpaceHeight = (height, itemHeight) => {\n  const limit = height / itemHeight / 2 - 0.5;\n  return itemHeight * limit;\n};\n\nconst setStyles = styles => {\n  const _color = styles.color || \"#fff\";\n\n  return {\n    color: _color,\n    activeColor: styles.activeColor || _color,\n    fontSize: styles.fontSize || 16,\n    backgroundColor: styles.backgroundColor || \"#555\",\n    shadowColor: styles.shadowColor || \"#333\",\n    width: styles.width ? `${styles.width}px` : \"100%\",\n    focusColor: styles.focusColor ? styles.focusColor : \"blue\"\n  };\n};\n\nconst WheelPicker = ({\n  data,\n  selectedID,\n  onChange,\n  height,\n  itemHeight,\n  idName,\n  titleID,\n  titleText,\n  width,\n  color,\n  activeColor,\n  fontSize,\n  backgroundColor,\n  shadowColor,\n  focusColor,\n  required\n}, ref) => {\n  const [_itemHeight, setItemHeight] = react_1.useState(itemHeight);\n  const {\n    onKeyUp,\n    onKeyPress\n  } = useHandleKeyboard_1.default(_itemHeight);\n  const {\n    root,\n    refs,\n    activeID,\n    onFocus\n  } = useObserver_1.default(data, selectedID, _itemHeight, onChange);\n  const styles = react_1.useMemo(() => setStyles({\n    width,\n    color,\n    activeColor,\n    fontSize,\n    backgroundColor,\n    shadowColor,\n    focusColor\n  }), [activeColor, backgroundColor, color, focusColor, fontSize, shadowColor, width]);\n  const spaceHeight = react_1.useMemo(() => calculateSpaceHeight(height, _itemHeight), [_itemHeight, height]);\n  const ariaActivedescendant = react_1.useMemo(() => {\n    return `${optionID_1.OPTION_ID}${activeID}`;\n  }, [activeID]);\n  const handleOnClick = react_1.useCallback(e => {\n    if (root.current) {\n      root.current.scrollTo(0, e.currentTarget.offsetTop - spaceHeight);\n    }\n  }, [root, spaceHeight]);\n  react_1.useImperativeHandle(ref, () => ({\n    focus: () => {\n      root.current && root.current.focus();\n    },\n    blur: () => {\n      root.current && root.current.blur();\n    }\n  }), [root]);\n  react_1.useEffect(() => {\n    const adjustItemHeight = () => {\n      let maxHeight = itemHeight;\n      Object.keys(refs).map(id => {\n        const elm = refs[id].current;\n\n        if (!elm) {\n          return;\n        }\n\n        const h = elm.clientHeight;\n\n        if (h > maxHeight) {\n          maxHeight = h;\n        }\n      });\n      return maxHeight;\n    };\n\n    setItemHeight(adjustItemHeight());\n  }, [itemHeight, refs]);\n  return react_1.default.createElement(List, {\n    id: idName,\n    tabIndex: 0,\n    role: \"listbox\",\n    \"aria-labelledby\": titleID,\n    \"aria-label\": titleText,\n    \"aria-required\": required,\n    \"aria-activedescendant\": ariaActivedescendant,\n    ref: root,\n    \"data-testid\": \"picker-list\",\n    height: height,\n    width: styles.width,\n    backgroundColor: styles.backgroundColor,\n    shadowColor: styles.shadowColor,\n    focusColor: styles.focusColor,\n    onKeyUp: onKeyUp,\n    onKeyPress: onKeyPress,\n    onKeyDown: onKeyPress\n  }, react_1.default.createElement(\"div\", {\n    style: {\n      height: spaceHeight\n    }\n  }), data.map(item => react_1.default.createElement(WheelPickerItem_1.default, Object.assign({\n    key: item.id\n  }, item, styles, {\n    height: _itemHeight,\n    activeID: activeID,\n    onClick: handleOnClick,\n    onFocus: onFocus,\n    ref: refs[item.id]\n  }))), react_1.default.createElement(\"div\", {\n    style: {\n      height: spaceHeight\n    }\n  }));\n};\n\nexports.default = react_1.forwardRef(WheelPicker);","map":{"version":3,"sources":["../../src/components/WheelPicker.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importStar(require(\"react\"));\nconst styled_components_1 = __importDefault(require(\"styled-components\"));\nconst WheelPickerItem_1 = __importDefault(require(\"../components/WheelPickerItem\"));\nconst useObserver_1 = __importDefault(require(\"../hooks/useObserver\"));\nconst optionID_1 = require(\"../constants/optionID\");\nconst useHandleKeyboard_1 = __importDefault(require(\"../hooks/useHandleKeyboard\"));\nconst List = styled_components_1.default.ul `\n  position: relative;\n  margin: 0;\n  padding: 0;\n  display: inline-block;\n  list-style: none;\n  overflow-y: scroll;\n  will-change: transform;\n  overflow-x: hidden;\n  text-align: center;\n  padding: 0 20px;\n  ${(props) => `\n    height: ${props.height}px;\n    width: ${props.width};\n    background-color: ${props.backgroundColor};\n    box-shadow: 1px 3px 10px ${props.shadowColor} inset;\n    &:focus {\n      outline: 2px solid ${props.focusColor};\n    }\n  `}\n`;\nconst calculateSpaceHeight = (height, itemHeight) => {\n    const limit = height / itemHeight / 2 - 0.5;\n    return itemHeight * limit;\n};\nconst setStyles = (styles) => {\n    const _color = styles.color || \"#fff\";\n    return {\n        color: _color,\n        activeColor: styles.activeColor || _color,\n        fontSize: styles.fontSize || 16,\n        backgroundColor: styles.backgroundColor || \"#555\",\n        shadowColor: styles.shadowColor || \"#333\",\n        width: styles.width ? `${styles.width}px` : \"100%\",\n        focusColor: styles.focusColor ? styles.focusColor : \"blue\"\n    };\n};\nconst WheelPicker = ({ data, selectedID, onChange, height, itemHeight, idName, titleID, titleText, width, color, activeColor, fontSize, backgroundColor, shadowColor, focusColor, required }, ref) => {\n    const [_itemHeight, setItemHeight] = react_1.useState(itemHeight);\n    const { onKeyUp, onKeyPress } = useHandleKeyboard_1.default(_itemHeight);\n    const { root, refs, activeID, onFocus } = useObserver_1.default(data, selectedID, _itemHeight, onChange);\n    const styles = react_1.useMemo(() => setStyles({\n        width,\n        color,\n        activeColor,\n        fontSize,\n        backgroundColor,\n        shadowColor,\n        focusColor\n    }), [\n        activeColor,\n        backgroundColor,\n        color,\n        focusColor,\n        fontSize,\n        shadowColor,\n        width\n    ]);\n    const spaceHeight = react_1.useMemo(() => calculateSpaceHeight(height, _itemHeight), [\n        _itemHeight,\n        height\n    ]);\n    const ariaActivedescendant = react_1.useMemo(() => {\n        return `${optionID_1.OPTION_ID}${activeID}`;\n    }, [activeID]);\n    const handleOnClick = react_1.useCallback((e) => {\n        if (root.current) {\n            root.current.scrollTo(0, e.currentTarget.offsetTop - spaceHeight);\n        }\n    }, [root, spaceHeight]);\n    react_1.useImperativeHandle(ref, () => ({\n        focus: () => {\n            root.current && root.current.focus();\n        },\n        blur: () => {\n            root.current && root.current.blur();\n        }\n    }), [root]);\n    react_1.useEffect(() => {\n        const adjustItemHeight = () => {\n            let maxHeight = itemHeight;\n            Object.keys(refs).map(id => {\n                const elm = refs[id].current;\n                if (!elm) {\n                    return;\n                }\n                const h = elm.clientHeight;\n                if (h > maxHeight) {\n                    maxHeight = h;\n                }\n            });\n            return maxHeight;\n        };\n        setItemHeight(adjustItemHeight());\n    }, [itemHeight, refs]);\n    return (react_1.default.createElement(List, { id: idName, tabIndex: 0, role: \"listbox\", \"aria-labelledby\": titleID, \"aria-label\": titleText, \"aria-required\": required, \"aria-activedescendant\": ariaActivedescendant, ref: root, \"data-testid\": \"picker-list\", height: height, width: styles.width, backgroundColor: styles.backgroundColor, shadowColor: styles.shadowColor, focusColor: styles.focusColor, onKeyUp: onKeyUp, onKeyPress: onKeyPress, onKeyDown: onKeyPress },\n        react_1.default.createElement(\"div\", { style: { height: spaceHeight } }),\n        data.map(item => (react_1.default.createElement(WheelPickerItem_1.default, Object.assign({ key: item.id }, item, styles, { height: _itemHeight, activeID: activeID, onClick: handleOnClick, onFocus: onFocus, ref: refs[item.id] })))),\n        react_1.default.createElement(\"div\", { style: { height: spaceHeight } })));\n};\nexports.default = react_1.forwardRef(WheelPicker);\n//# sourceMappingURL=WheelPicker.js.map"]},"metadata":{},"sourceType":"script"}