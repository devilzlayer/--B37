{"ast":null,"code":"import _defineProperty from\"/Users/cramj/Documents/New PWA/GIT/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/cramj/Documents/New PWA/GIT/node_modules/react-scripts/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/cramj/Documents/New PWA/GIT/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/cramj/Documents/New PWA/GIT/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/cramj/Documents/New PWA/GIT/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useMemo,useContext}from\"react\";// import { Link } from \"react-router-dom\";\n// import Picker from \"react-mobile-picker\";\nimport DatePicker from\"react-mobile-datepicker\";import cx from\"classnames\";import*as moment from\"moment\";import BigNumber from\"bignumber.js\";import{reverse,isEmpty,size}from\"lodash\";import{Wrap}from\"./\";import{toDate}from\"../../../util/\";import{FormField//  UITabs\n}from\"../../../component/\";import{UIAlertSA}from\"../../component/\";import{Service}from\"./\";import NewCard from\"./withdrawal/newCard\";import{withAuth}from\"../../util\";var CardItem=function CardItem(props){var label=props.label,time=props.time,value=props.value,status=props.status,index=props.index,className=props.className,obj=props.obj,onSetKey=props.onSetKey,setKey=props.setKey;//成功 SUCCESS\n//失败 FAILURE\n//未审核 UNREVIEWED\n//出款中 WITHDRAWING\nvar statusText=\"\";var classStatus=\"\";var cancel=false;var fail=false;if(status===\"成功\"){statusText=\"成功\";classStatus=\"success\";}if(status===\"失败\"){statusText=\"失败\";classStatus=\"failure\";fail=true;}if(status===\"未审核\"){statusText=\"未审核\";classStatus=\"unreviewed\";cancel=true;}if(status===\"出款中\"){statusText=\"出款中\";classStatus=\"withdrawing\";}if(status===\"汇款中\"){statusText=\"汇款中\";classStatus=\"remittance\";}return/*#__PURE__*/React.createElement(\"div\",{className:\"withdrawal-history-card-item \".concat(className?className:\"\")},/*#__PURE__*/React.createElement(\"div\",{className:\"cl-item withdrawal-history-card-text\"},/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-text\"},label),/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-time\"},time)),/*#__PURE__*/React.createElement(\"div\",{className:\"cl-item withdrawal-history-card-value\"},cancel&&/*#__PURE__*/React.createElement(\"span\",{className:\"cancel\",onClick:function onClick(){return props.onCancel(obj);}},\"\\u53D6\\u6D88\\u63D0\\u6B3E\"),/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-amount\"},\"\\u91D1\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,value)),/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-status \".concat(classStatus)},/*#__PURE__*/React.createElement(\"span\",null,statusText,fail&&/*#__PURE__*/React.createElement(\"span\",{className:\"fail\",onClick:function onClick(){return onSetKey(index);}},setKey===index&&/*#__PURE__*/React.createElement(\"span\",null,obj.verifyComment),/*#__PURE__*/React.createElement(\"i\",null))))));};var Withdraws=function Withdraws(_ref){var update=_ref.update,alert=_ref.alert;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),key=_useState2[0],setKey=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),reload=_useState4[0],setReload=_useState4[1];var _useState5=useState({status:0,list:[]}),_useState6=_slicedToArray(_useState5,2),withdraws=_useState6[0],setWithdraws=_useState6[1];useEffect(function(){var fetch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var r;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Service.Transaction.read(_objectSpread({record_type:\"debit\"},Service.User.read())).promise;case 3:r=_context.sent;// console.log(\"R\", r);\nsetWithdraws({status:1,list:r.info.map(function(t){return _objectSpread(_objectSpread({},t),{},{ts:toDate(t.requestTime,true)});})});setReload(false);_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(!_context.t0.is_aborted){console.warn(_context.t0);}setReload(false);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetch(){return _ref2.apply(this,arguments);};}();fetch();},[update,reload]);var _useState7=useState(\"today\"),_useState8=_slicedToArray(_useState7,2),range=_useState8[0],setRange=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),customI=_useState10[0],setCustomI=_useState10[1];var _useState11=useState({from:moment().subtract(30,\"days\").toDate(),to:moment().toDate()}),_useState12=_slicedToArray(_useState11,2),customRange=_useState12[0],setCustomRange=_useState12[1];var _useState13=useState({from:false,to:false}),_useState14=_slicedToArray(_useState13,2),customRangeOpened=_useState14[0],openCustomRange=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),overlayShown=_useState16[0],setOverlay=_useState16[1];var __withdraws=useMemo(function(){var _rangeMap={today:function today(){var today=moment();return[today.startOf(\"day\").unix(),today.endOf(\"day\").unix()];},yesterday:function yesterday(){var yesterday=moment().subtract(1,\"days\");return[yesterday.startOf(\"day\").unix(),yesterday.endOf(\"day\").unix()];},week:function week(){return[moment().subtract(1,\"weeks\").startOf(\"day\").unix(),moment().endOf(\"day\").unix()];},month:function month(){return[moment().subtract(30,\"days\").startOf(\"day\").unix(),moment().endOf(\"day\").unix()];},custom:function custom(){var from=customRange.from,to=customRange.to;return[moment(from).startOf(\"day\").unix(),moment(to).endOf(\"day\").unix()];}};var _rangeMap$range=_rangeMap[range](),_rangeMap$range2=_slicedToArray(_rangeMap$range,2),from=_rangeMap$range2[0],to=_rangeMap$range2[1];return withdraws.list.filter(function(t){return t.ts>=from&&t.ts<to;});},[withdraws.list,customRange,range]);var UI={cancel:function cancel(w){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var r;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return Service.User.withdrawCancel({id:w.id}).promise;case 3:r=_context2.sent;console.info(r);setWithdraws(function(ws){return _objectSpread(_objectSpread({},ws),{},{list:ws.list.map(function(ws){return ws.id===w.id?_objectSpread(_objectSpread({},w),{},{status:\"失败\"}):ws;})});});alert.showAlert(\"系统提示\",r.info);_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.warn(_context2.t0);alert.showAlert(\"系统提示\",_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}))();},toggle:function toggle(w){setWithdraws(function(ws){return _objectSpread(_objectSpread({},ws),{},{list:ws.list.map(function(ws){return ws.id===w.id?_objectSpread(_objectSpread({},w),{},{shown:!w.shown}):ws;})});});},applyCustomRange:function applyCustomRange(){setOverlay(false);setCustomI(customI+1);setRange(\"custom\");}};var monthMap={\"1\":\"一月\",\"2\":\"二月\",\"3\":\"三月\",\"4\":\"四月\",\"5\":\"五月\",\"6\":\"六月\",\"7\":\"七月\",\"8\":\"八月\",\"9\":\"九月\",\"10\":\"十月\",\"11\":\"十一月\",\"12\":\"十二月\"};var DatePickerWrap=function DatePickerWrap(_ref3){var type=_ref3.type,header=_ref3.header,min=_ref3.min;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",{onClick:function onClick(e){return openCustomRange(_objectSpread(_objectSpread({},customRangeOpened),{},_defineProperty({},type,true)));}},moment(customRange[type]).format(\"YYYY-MM-DD\")),/*#__PURE__*/React.createElement(DatePicker,{theme:\"ios\",confirmText:\"\\u597D\\u5427\",headerFormat:header,value:customRange[type],isOpen:customRangeOpened[type],min:min,dateConfig:{year:{format:\"YYYY\"},month:{format:function format(v){return monthMap[v.getMonth()+1];}},date:{format:\"D\"}},onSelect:function onSelect(date){openCustomRange(_objectSpread(_objectSpread({},customRangeOpened),{},_defineProperty({},type,false)));setCustomRange(_objectSpread(_objectSpread({},customRange),{},_defineProperty({},type,date)));},onCancel:function onCancel(e){return openCustomRange(_objectSpread(_objectSpread({},customRangeOpened),{},_defineProperty({},type,false)));}}));};var _withdraws=withdraws.list.map(function(withdraw,i){// console.log(withdraw)\nvar _onSetKey=function onSetKey(value){setKey(null);if(key!==value)setKey(value);};return/*#__PURE__*/React.createElement(CardItem,{key:i,obj:withdraw,index:i,label:withdraw.cardNumber,time:withdraw.requestTime,value:withdraw.amount,status:withdraw.status,onCancel:function onCancel(val){return UI.cancel(val);},onSetKey:function onSetKey(val){return _onSetKey(val);},setKey:key});});// console.log(_withdraws)\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"withdraws transactions-sa\"},/*#__PURE__*/React.createElement(\"div\",{className:\"withdrawal-history-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"withdrawal-history-wrap-inner\"},/*#__PURE__*/React.createElement(\"div\",{className:\"withdrawal-history-wrap-inner-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"withdrawal-history-card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"withdrawal-history-card-head\"},/*#__PURE__*/React.createElement(\"div\",{className:\"withdrawal-history-card-title\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u6700\\u8FD130\\u5929\"),/*#__PURE__*/React.createElement(\"i\",{className:reload?\"reload\":\"\",onClick:function onClick(){return setReload(true);}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"withdrawal-history-card-body\"},!isEmpty(_withdraws)?_withdraws:/*#__PURE__*/React.createElement(\"div\",{className:\"no-transactions\"},/*#__PURE__*/React.createElement(\"div\",{className:\"image-box\"}),/*#__PURE__*/React.createElement(\"span\",null,\"\\u6682\\u65E0\\u8BB0\\u5F55\"))))))),/*#__PURE__*/React.createElement(\"div\",{className:cx(\"transactions-overlay\",{shown:overlayShown})},/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-overlay--inner\"},/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-overlay--wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"custom-range-form\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u9009\\u62E9\\u5F00\\u59CB\\u65F6\\u95F4\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u5F00\\u59CB\\u65E5\\u671F\"),/*#__PURE__*/React.createElement(DatePickerWrap,{type:\"from\",header:\"\\u9009\\u62E9\\u5F00\\u59CB\\u65F6\\u95F4\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u7ED3\\u675F\\u65E5\\u671F\"),/*#__PURE__*/React.createElement(DatePickerWrap,{type:\"to\",min:customRange.from,header:\"\\u9009\\u62E9\\u7ED3\\u675F\\u65F6\\u95F4\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-buttons\"},/*#__PURE__*/React.createElement(\"button\",{className:\"cancel\",onClick:function onClick(e){return setOverlay(false);}},\"\\u53D6\\u6D88\"),/*#__PURE__*/React.createElement(\"button\",{className:\"update\",onClick:function onClick(e){return UI.applyCustomRange();}},\"\\u786E\\u8BA4\")))))));};var Withdraw=function Withdraw(){var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),balanceTransferred=_useState18[0],setBalanceTransferred=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),showVenue=_useState20[0],setShowVenue=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),showNewCard=_useState22[0],setShowNewCard=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),showDelCard=_useState24[0],setShowDelCard=_useState24[1];var _useState25=useState(1),_useState26=_slicedToArray(_useState25,2),status=_useState26[0],setStatus=_useState26[1];var _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),balancesRaw=_useState28[0],setBalancesRaw=_useState28[1];var _useContext=useContext(Service.User.Context),userAuth=_useContext.userAuth;var _useState29=useState(0),_useState30=_slicedToArray(_useState29,2),update=_useState30[0],setUpdate=_useState30[1];var _useState31=useState([]),_useState32=_slicedToArray(_useState31,2),cards=_useState32[0],setCards=_useState32[1];var _useState33=useState({}),_useState34=_slicedToArray(_useState33,2),cardsMap=_useState34[0],setCardsMap=_useState34[1];var _useState35=useState({debit_bank:\"\",amount:\"\"}),_useState36=_slicedToArray(_useState35,2),form=_useState36[0],setForm=_useState36[1];var _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),cardPicker=_useState38[0],toggleCardPicker=_useState38[1];var _useState39=useState({shown:false,title:\"\",message:\"\",onClose:function onClose(){return hideAlert();}}),_useState40=_slicedToArray(_useState39,2),alert=_useState40[0],setAlert=_useState40[1];var showAlert=function showAlert(title,message){setAlert(function(a){return _objectSpread(_objectSpread({},a),{},{shown:true,title:title,message:message});});};var hideAlert=function hideAlert(){setAlert(function(a){return _objectSpread(_objectSpread({},a),{},{shown:false});});};useEffect(function(){// const r = Service.User.withdraw({\n// \trecord_type: 'debit',\n// \t...Service.User.read(),\n// });\n// r.promise.then( result =>{\n// \tconsole.log('result',result)\n// } , e =>{\n// \tconsole.log(e)\n// })\nService.Game.balances(_objectSpread({},Service.User.read())).then(function(balances){// console.log(balances)\nsetBalancesRaw(balances.filter(function(b){return!b.error;}));});var req=Service.Card.read(_objectSpread({},Service.User.read()));setStatus(0);req.promise.then(function(r){// console.log(\"Got cards:\", r);\nvar _cardsMap={};var _cards=r.info.map(function(c){if(!_cardsMap[c.debit_bank]){_cardsMap[c.debit_bank]=c.id;}return c.debit_bank;});setCardsMap(_cardsMap);if(!_cards.length){_cards.push(\"\");}setForm(function(f){return _objectSpread(_objectSpread({},f),{},{debit_bank:_cards[0]||\"\"});});setCards(_cards);setStatus(1);},function(e){console.warn(\"Unable to get cards:\",e);setStatus(1);});return function(){return req.cancel();};},[]);var fields=[{id:\"debit_bank\",label:\"选择银行卡\",placeholder:\"银行卡号\"}];var fieldss=[{id:\"amount\",label:\"￥\",placeholder:\"金额\"}];var withdraw=function withdraw(){var debit_bank=form.debit_bank,amount=form.amount;if(!debit_bank){// return void showAlert(\"系统提示\", \"必须选择一张卡\");\nreturn void showAlert(\"系统提示\",\"必须选择一张银行卡\");}var _amount=+amount;if(!_amount||isNaN(_amount)){return void showAlert(\"系统提示\",\"取款金额不能为空\");}// if (_amount < 100 || _amount > 60000) {\n//   return void showAlert(\"系统提示\", \"系统提示\");\n// }\nif(_amount<100){return void showAlert(\"系统提示\",\"取款金额最低100元\");}console.info(\"You're about to withdraw \".concat(amount,\"\\xA5\"));setStatus(0);var _form=_objectSpread({},form);_form.debit_bank=cardsMap[debit_bank]||\"\";Service.User.withdraw(_objectSpread(_objectSpread({},Service.User.read()),_form)).promise.then(function(r){console.log(\"You've successfully withdrawn:\",r);showAlert(\"系统提示\",r.info);setStatus(1);setUpdate(function(u){return u+1;});},function(e){console.warn(\"Unable to withdraw:\",e);showAlert(\"系统提示\",e);setStatus(1);});};var wallet=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setStatus(0);Service.Game.transferToWallet().promise.then(function(r){// console.log(r)\nsetStatus(1);setBalanceTransferred(true);},function(e){console.warn(e);setStatus(1);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function wallet(_x){return _ref4.apply(this,arguments);};}();var onMax=function onMax(){setForm(_objectSpread(_objectSpread({},form),{},{amount:Math.floor(userAuth.data.balance)}));};var _onNewAddCard=function onNewAddCard(){var req=Service.Card.read(_objectSpread({},Service.User.read()));setStatus(0);req.promise.then(function(r){var _cardsMap={};var _cards=reverse(r.info).map(function(c){if(!_cardsMap[c.debit_bank]){_cardsMap[c.debit_bank]=c.id;}return c.debit_bank;});setCardsMap(_cardsMap);if(!_cards.length){_cards.push(\"\");}setForm(function(f){return _objectSpread(_objectSpread({},f),{},{debit_bank:_cards[0]||\"\"});});setCards(_cards);setStatus(1);},function(e){console.warn(\"Unable to get cards:\",e);setStatus(1);});return function(){return req.cancel();};};// console.log(form)\nvar onShowVenue=function onShowVenue(){setShowVenue(!showVenue);};var onlyNumbers=function onlyNumbers(e){var _e$currentTarget=e.currentTarget,name=_e$currentTarget.name,value=_e$currentTarget.value;var regexp=/^[0-9\\b]+$/;if(!value||regexp.test(value)){setForm(function(f){return _objectSpread(_objectSpread({},f),{},_defineProperty({},name,value));});}};// console.log(update)\nreturn/*#__PURE__*/React.createElement(Wrap,{className:\"profile-withdraw\",name:\"\\u9A6C\\u4E0A\\u63D0\\u6B3E\",isLoading:!status},/*#__PURE__*/React.createElement(\"div\",{className:\"form-field user-balance\"},/*#__PURE__*/React.createElement(\"div\",{className:\"user-balance-wrap wallet\"},/*#__PURE__*/React.createElement(\"span\",{className:\"user-balance-label\"},/*#__PURE__*/React.createElement(\"i\",null),\" \\u4E2D\\u5FC3\\u94B1\\u5305\"),/*#__PURE__*/React.createElement(\"span\",{className:\"user-balance-amount\"},userAuth.data.balance)),/*#__PURE__*/React.createElement(\"div\",{className:\"user-balance-wrap hr\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"user-balance-wrap refresh\",onClick:wallet},/*#__PURE__*/React.createElement(\"i\",null),/*#__PURE__*/React.createElement(\"span\",{className:\"user-balance-label\"},\"\\u4E00\\u952E\\u56DE\\u6536\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-field-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-field balances-list\"},balancesRaw.map(function(balance,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"balances-list--item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"game-name\"},balance.game.name),/*#__PURE__*/React.createElement(\"div\",{className:\"game-balance\"},BigNumber(balance.balance).toFormat(2)));})),/*#__PURE__*/React.createElement(\"div\",{className:\"balances-list-load-more\",onClick:function onClick(){return onShowVenue();}},/*#__PURE__*/React.createElement(\"span\",{className:showVenue?\"show\":\"\"},\"\\u663E\\u793A\\u6240\\u6709\\u573A\\u9986\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"withdraw-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fields\"},fields.map(function(f,i){return/*#__PURE__*/React.createElement(FormField,{key:i,field:{label:f.label,placeholder:f.placeholder,select:f.id===\"debit_bank\",onClick:function onClick(){return toggleCardPicker(!cardPicker);}},input:_objectSpread(_objectSpread({},f),{},{name:f.id,value:form[f.id],onChange:function onChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setForm(function(f){return _objectSpread(_objectSpread({},f),{},_defineProperty({},name,value));});}})});}),cardPicker&&/*#__PURE__*/React.createElement(\"div\",{className:\"cardtogglepicker\"},cards&&cards.map(function(obj,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"cardtogglepicker-wrap \".concat(form.debit_bank===obj?\"active\":\"\"),onClick:function onClick(){return[setForm(_objectSpread(_objectSpread({},form),{},{debit_bank:obj})),toggleCardPicker(false)];}},obj);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"withdraw-two-buttons\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return setShowNewCard(true);},className:\"w-t-btn new-button-card\"},\"\\u65B0\\u589E\\u94F6\\u884C\\u5361\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return setShowDelCard(true);},className:\"w-t-btn untie-button-card\"},\"\\u89E3\\u7ED1\\u94F6\\u884C\\u5361\")),/*#__PURE__*/React.createElement(\"div\",{className:\"fields-fields\"},fieldss.map(function(f,i){return/*#__PURE__*/React.createElement(FormField,{key:i,field:{label:f.label,placeholder:f.placeholder,select:f.id===\"debit_bank\",onClick:function onClick(){return toggleCardPicker(true);}},input:_objectSpread(_objectSpread({},f),{},{name:f.id,value:form[f.id],onChange:function onChange(e){return onlyNumbers(e);}// onKeyDown: (e) => onlyNumbers(e)  \n})});}),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return onMax();},className:\"btn-field-max\"},\"\\u6700\\u5927\\u91D1\\u989D\")),/*#__PURE__*/React.createElement(\"div\",{className:\"submit\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button-stylized\",onClick:withdraw},\"\\u63D0\\u4EA4\"))),/*#__PURE__*/React.createElement(\"div\",{className:cx(\"withdraw-list\")},/*#__PURE__*/React.createElement(Withdraws,{update:update,alert:{showAlert:showAlert,hideAlert:hideAlert}})),/*#__PURE__*/React.createElement(UIAlertSA,alert),/*#__PURE__*/React.createElement(NewCard,{show:showNewCard,delCard:showDelCard,onHide:function onHide(){return[setShowNewCard(false),setShowDelCard(false)];},onNewAddCard:function onNewAddCard(){return _onNewAddCard();}}),/*#__PURE__*/React.createElement(UIAlertSA,{onClose:function onClose(){return null;},shown:balanceTransferred},/*#__PURE__*/React.createElement(\"div\",{className:\"game-sa-overlay\"},/*#__PURE__*/React.createElement(\"div\",{className:\"overlay-layer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form response\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-head\"},/*#__PURE__*/React.createElement(\"i\",null),/*#__PURE__*/React.createElement(\"h2\",null,\"\\u8F6C\\u8D26\\u6210\\u529F\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-body\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return setBalanceTransferred(false);}},\"\\u786E\\u8BA4\")))))));};export default withAuth(Withdraw,1);","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/GIT/src/pwa/view/profile/Withdraw.jsx"],"names":["React","useState","useEffect","useMemo","useContext","DatePicker","cx","moment","BigNumber","reverse","isEmpty","size","Wrap","toDate","FormField","UIAlertSA","Service","NewCard","withAuth","CardItem","props","label","time","value","status","index","className","obj","onSetKey","setKey","statusText","classStatus","cancel","fail","onCancel","verifyComment","Withdraws","update","alert","key","reload","setReload","list","withdraws","setWithdraws","fetch","Transaction","read","record_type","User","promise","r","info","map","t","ts","requestTime","is_aborted","console","warn","range","setRange","customI","setCustomI","from","subtract","to","customRange","setCustomRange","customRangeOpened","openCustomRange","overlayShown","setOverlay","__withdraws","_rangeMap","today","startOf","unix","endOf","yesterday","week","month","custom","filter","UI","w","withdrawCancel","id","ws","showAlert","toggle","shown","applyCustomRange","monthMap","DatePickerWrap","type","header","min","e","format","year","v","getMonth","date","_withdraws","withdraw","i","cardNumber","amount","val","Withdraw","balanceTransferred","setBalanceTransferred","showVenue","setShowVenue","showNewCard","setShowNewCard","showDelCard","setShowDelCard","setStatus","balancesRaw","setBalancesRaw","Context","userAuth","setUpdate","cards","setCards","cardsMap","setCardsMap","debit_bank","form","setForm","cardPicker","toggleCardPicker","title","message","onClose","hideAlert","setAlert","a","Game","balances","then","b","error","req","Card","_cardsMap","_cards","c","length","push","f","fields","placeholder","fieldss","_amount","isNaN","_form","log","u","wallet","transferToWallet","onMax","Math","floor","data","balance","onNewAddCard","onShowVenue","onlyNumbers","currentTarget","name","regexp","test","game","toFormat","select","onClick","onChange","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useMemo, useContext } from \"react\";\r\n// import { Link } from \"react-router-dom\";\r\n// import Picker from \"react-mobile-picker\";\r\nimport DatePicker from \"react-mobile-datepicker\";\r\nimport cx from \"classnames\";\r\nimport * as moment from \"moment\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport { reverse, isEmpty, size } from \"lodash\";\r\n\r\nimport { Wrap } from \"./\";\r\nimport { toDate } from \"../../../util/\";\r\nimport {\r\n  FormField,\r\n  //  UITabs\r\n} from \"../../../component/\";\r\nimport { UIAlertSA } from \"../../component/\";\r\nimport { Service } from \"./\";\r\n\r\nimport NewCard from \"./withdrawal/newCard\";\r\nimport { withAuth } from \"../../util\";\r\n\r\n\r\nconst CardItem = (props) => {\r\n  const {\r\n    label,\r\n    time,\r\n    value,\r\n    status,\r\n    index,\r\n    className,\r\n    obj,\r\n    onSetKey,\r\n    setKey,\r\n  } = props;\r\n  //成功 SUCCESS\r\n  //失败 FAILURE\r\n  //未审核 UNREVIEWED\r\n  //出款中 WITHDRAWING\r\n  let statusText = \"\";\r\n  let classStatus = \"\";\r\n  let cancel = false;\r\n  let fail = false;\r\n  if (status === \"成功\") {\r\n    statusText = \"成功\";\r\n    classStatus = \"success\";\r\n  }\r\n\r\n  if (status === \"失败\") {\r\n    statusText = \"失败\";\r\n    classStatus = \"failure\";\r\n    fail = true;\r\n  }\r\n\r\n  if (status === \"未审核\") {\r\n    statusText = \"未审核\";\r\n    classStatus = \"unreviewed\";\r\n    cancel = true;\r\n  }\r\n\r\n  if (status === \"出款中\") {\r\n    statusText = \"出款中\";\r\n    classStatus = \"withdrawing\";\r\n  }\r\n\r\n  if (status === \"汇款中\") {\r\n    statusText = \"汇款中\";\r\n    classStatus = \"remittance\";\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`withdrawal-history-card-item ${className ? className : \"\"}`}\r\n    >\r\n      <div className=\"cl-item withdrawal-history-card-text\">\r\n        <p className=\"cl-card-text\">{label}</p>\r\n        <p className=\"cl-card-time\">{time}</p>\r\n      </div>\r\n      <div className=\"cl-item withdrawal-history-card-value\">\r\n        {cancel && (\r\n          <span className=\"cancel\" onClick={() => props.onCancel(obj)}>\r\n            取消提款\r\n          </span>\r\n        )}\r\n        <p className=\"cl-card-amount\">\r\n          金额: <span>{value}</span>\r\n        </p>\r\n        <p className={`cl-card-status ${classStatus}`}>\r\n          <span>\r\n            {statusText}\r\n            {fail && (\r\n              <span className=\"fail\" onClick={() => onSetKey(index)}>\r\n                {setKey === index && <span>{obj.verifyComment}</span>}\r\n                <i />\r\n              </span>\r\n            )}\r\n          </span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Withdraws = ({ update, alert }) => {\r\n  const [key, setKey] = useState(null);\r\n  const [reload, setReload] = useState(null);\r\n\r\n  const [withdraws, setWithdraws] = useState({\r\n    status: 0,\r\n    list: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetch = async () => {\r\n      try {\r\n        const r = await Service.Transaction.read({\r\n          record_type: \"debit\",\r\n          ...Service.User.read(),\r\n        }).promise;\r\n\r\n        // console.log(\"R\", r);\r\n\r\n        setWithdraws({\r\n          status: 1,\r\n          list: r.info.map((t) => ({ ...t, ts: toDate(t.requestTime, true) })),\r\n        });\r\n        setReload(false);\r\n      } catch (e) {\r\n        if (!e.is_aborted) {\r\n          console.warn(e);\r\n        }\r\n        setReload(false);\r\n      }\r\n    };\r\n\r\n    fetch();\r\n  }, [update, reload]);\r\n\r\n  const [range, setRange] = useState(\"today\");\r\n\r\n  const [customI, setCustomI] = useState(0);\r\n\r\n  const [customRange, setCustomRange] = useState({\r\n    from: moment().subtract(30, \"days\").toDate(),\r\n    to: moment().toDate(),\r\n  });\r\n\r\n  const [customRangeOpened, openCustomRange] = useState({\r\n    from: false,\r\n    to: false,\r\n  });\r\n\r\n  const [overlayShown, setOverlay] = useState(false);\r\n\r\n  const __withdraws = useMemo(() => {\r\n    const _rangeMap = {\r\n      today: () => {\r\n        const today = moment();\r\n        return [today.startOf(\"day\").unix(), today.endOf(\"day\").unix()];\r\n      },\r\n      yesterday: () => {\r\n        const yesterday = moment().subtract(1, \"days\");\r\n        return [yesterday.startOf(\"day\").unix(), yesterday.endOf(\"day\").unix()];\r\n      },\r\n      week: () => {\r\n        return [\r\n          moment().subtract(1, \"weeks\").startOf(\"day\").unix(),\r\n          moment().endOf(\"day\").unix(),\r\n        ];\r\n      },\r\n      month: () => {\r\n        return [\r\n          moment().subtract(30, \"days\").startOf(\"day\").unix(),\r\n          moment().endOf(\"day\").unix(),\r\n        ];\r\n      },\r\n      custom: () => {\r\n        let { from, to } = customRange;\r\n        return [\r\n          moment(from).startOf(\"day\").unix(),\r\n          moment(to).endOf(\"day\").unix(),\r\n        ];\r\n      },\r\n    };\r\n\r\n    const [from, to] = _rangeMap[range]();\r\n\r\n    return withdraws.list.filter((t) => t.ts >= from && t.ts < to);\r\n  }, [withdraws.list, customRange, range]);\r\n\r\n  const UI = {\r\n    async cancel(w) {\r\n      try {\r\n        const r = await Service.User.withdrawCancel({ id: w.id }).promise;\r\n\r\n        console.info(r);\r\n\r\n        setWithdraws((ws) => ({\r\n          ...ws,\r\n          list: ws.list.map((ws) =>\r\n            ws.id === w.id ? { ...w, status: \"失败\" } : ws\r\n          ),\r\n        }));\r\n\r\n        alert.showAlert(\"系统提示\", r.info);\r\n      } catch (e) {\r\n        console.warn(e);\r\n\r\n        alert.showAlert(\"系统提示\", e);\r\n      }\r\n    },\r\n    toggle(w) {\r\n      setWithdraws((ws) => ({\r\n        ...ws,\r\n        list: ws.list.map((ws) =>\r\n          ws.id === w.id ? { ...w, shown: !w.shown } : ws\r\n        ),\r\n      }));\r\n    },\r\n    applyCustomRange() {\r\n      setOverlay(false);\r\n\r\n      setCustomI(customI + 1);\r\n\r\n      setRange(\"custom\");\r\n    },\r\n  };\r\n\r\n  const monthMap = {\r\n    \"1\": \"一月\",\r\n    \"2\": \"二月\",\r\n    \"3\": \"三月\",\r\n    \"4\": \"四月\",\r\n    \"5\": \"五月\",\r\n    \"6\": \"六月\",\r\n    \"7\": \"七月\",\r\n    \"8\": \"八月\",\r\n    \"9\": \"九月\",\r\n    \"10\": \"十月\",\r\n    \"11\": \"十一月\",\r\n    \"12\": \"十二月\",\r\n  };\r\n\r\n  const DatePickerWrap = ({ type, header, min }) => (\r\n    <>\r\n      <p\r\n        onClick={(e) =>\r\n          openCustomRange({\r\n            ...customRangeOpened,\r\n            [type]: true,\r\n          })\r\n        }\r\n      >\r\n        {moment(customRange[type]).format(\"YYYY-MM-DD\")}\r\n      </p>\r\n      <DatePicker\r\n        theme=\"ios\"\r\n        confirmText=\"好吧\"\r\n        headerFormat={header}\r\n        value={customRange[type]}\r\n        isOpen={customRangeOpened[type]}\r\n        min={min}\r\n        dateConfig={{\r\n          year: {\r\n            format: \"YYYY\",\r\n          },\r\n          month: {\r\n            format: (v) => monthMap[v.getMonth() + 1],\r\n          },\r\n          date: {\r\n            format: \"D\",\r\n          },\r\n        }}\r\n        onSelect={(date) => {\r\n          openCustomRange({\r\n            ...customRangeOpened,\r\n            [type]: false,\r\n          });\r\n          setCustomRange({\r\n            ...customRange,\r\n            [type]: date,\r\n          });\r\n        }}\r\n        onCancel={(e) =>\r\n          openCustomRange({\r\n            ...customRangeOpened,\r\n            [type]: false,\r\n          })\r\n        }\r\n      />\r\n    </>\r\n  );\r\n\r\n  const _withdraws = withdraws.list.map((withdraw, i) => {\r\n    // console.log(withdraw)\r\n\r\n    const onSetKey = (value) => {\r\n      setKey(null);\r\n      if (key !== value) setKey(value);\r\n    };\r\n\r\n    return (\r\n      <CardItem\r\n        key={i}\r\n        obj={withdraw}\r\n        index={i}\r\n        label={withdraw.cardNumber}\r\n        time={withdraw.requestTime}\r\n        value={withdraw.amount}\r\n        status={withdraw.status}\r\n        onCancel={(val) => UI.cancel(val)}\r\n        onSetKey={(val) => onSetKey(val)}\r\n        setKey={key}\r\n      />\r\n    );\r\n  });\r\n\r\n  // console.log(_withdraws)\r\n\r\n  return (\r\n    <div className=\"withdraws transactions-sa\">\r\n      {/* <h1>提款记录</h1>\r\n\t\t\t<div className=\"transactions-range\">\r\n\t\t\t\t<UITabs\r\n\t\t\t\t\ttab={range}\r\n\t\t\t\t\tonSet={r => r !== 'custom' ? setRange(r) : setOverlay(true)}\r\n\t\t\t\t\ttabs={[\r\n\t\t\t\t\t\t{ index: 'today', name: '今天' },\r\n\t\t\t\t\t\t{ index: 'yesterday', name: '昨天' },\r\n\t\t\t\t\t\t{ index: 'week', name: '本周' },\r\n\t\t\t\t\t\t{ index: 'month', name: '本月' },\r\n\t\t\t\t\t\t{ index: 'custom', name: '自选' },\r\n\t\t\t\t\t]} />\r\n\t\t\t</div> */}\r\n      {/* <div className=\"transactions-list\">\r\n\t\t\t\t{_withdraws}\r\n\t\t\t</div> */}\r\n      {/* ============================================================= */}\r\n      <div className=\"withdrawal-history-wrap\">\r\n        <div className=\"withdrawal-history-wrap-inner\">\r\n          <div className=\"withdrawal-history-wrap-inner-content\">\r\n            <div className=\"withdrawal-history-card\">\r\n              <div className=\"withdrawal-history-card-head\">\r\n                <div className=\"withdrawal-history-card-title\">\r\n                  <span>最近30天</span>\r\n                  <i\r\n                    className={reload ? \"reload\" : \"\"}\r\n                    onClick={() => setReload(true)}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"withdrawal-history-card-body\">\r\n                {!isEmpty(_withdraws) ? (\r\n                  _withdraws\r\n                ) : (\r\n                  <div className=\"no-transactions\">\r\n                    <div className=\"image-box\" />\r\n                    <span>暂无记录</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* ============================================================= */}\r\n\r\n      <div className={cx(\"transactions-overlay\", { shown: overlayShown })}>\r\n        <div className=\"transactions-overlay--inner\">\r\n          <div className=\"transactions-overlay--wrap\">\r\n            <div className=\"custom-range-form\">\r\n              <h2>选择开始时间</h2>\r\n              <div className=\"form-wrap\">\r\n                <div className=\"field\">\r\n                  <label>开始日期</label>\r\n                  <DatePickerWrap type=\"from\" header=\"选择开始时间\" />\r\n                </div>\r\n                <div className=\"field\">\r\n                  <label>结束日期</label>\r\n                  <DatePickerWrap\r\n                    type=\"to\"\r\n                    min={customRange.from}\r\n                    header=\"选择结束时间\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"form-buttons\">\r\n                <button className=\"cancel\" onClick={(e) => setOverlay(false)}>\r\n                  取消\r\n                </button>\r\n                <button\r\n                  className=\"update\"\r\n                  onClick={(e) => UI.applyCustomRange()}\r\n                >\r\n                  确认\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Withdraw = () => {\r\n  const [balanceTransferred, setBalanceTransferred] = useState(false);\r\n  const [showVenue, setShowVenue] = useState(false);\r\n  const [showNewCard, setShowNewCard] = useState(false);\r\n  const [showDelCard, setShowDelCard] = useState(false);\r\n\r\n  const [status, setStatus] = useState(1);\r\n\r\n  const [balancesRaw, setBalancesRaw] = useState([]);\r\n\r\n  const { userAuth } = useContext(Service.User.Context);\r\n\r\n  const [update, setUpdate] = useState(0);\r\n\r\n  const [cards, setCards] = useState([]);\r\n  const [cardsMap, setCardsMap] = useState({});\r\n\r\n  const [form, setForm] = useState({\r\n    debit_bank: \"\",\r\n    amount: \"\",\r\n  });\r\n\r\n  const [cardPicker, toggleCardPicker] = useState(false);\r\n\r\n  const [alert, setAlert] = useState({\r\n    shown: false,\r\n    title: \"\",\r\n    message: \"\",\r\n    onClose: () => hideAlert(),\r\n  });\r\n\r\n  const showAlert = (title, message) => {\r\n    setAlert((a) => ({ ...a, shown: true, title, message }));\r\n  };\r\n\r\n  const hideAlert = () => {\r\n    setAlert((a) => ({ ...a, shown: false }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    // const r = Service.User.withdraw({\r\n    // \trecord_type: 'debit',\r\n    // \t...Service.User.read(),\r\n    // });\r\n\r\n    // r.promise.then( result =>{\r\n    // \tconsole.log('result',result)\r\n    // } , e =>{\r\n    // \tconsole.log(e)\r\n    // })\r\n\r\n    Service.Game.balances({\r\n      ...Service.User.read(),\r\n    }).then((balances) => {\r\n      // console.log(balances)\r\n      setBalancesRaw(balances.filter((b) => !b.error));\r\n    });\r\n\r\n    const req = Service.Card.read({\r\n      ...Service.User.read(),\r\n    });\r\n\r\n    setStatus(0);\r\n\r\n    req.promise.then(\r\n      (r) => {\r\n        // console.log(\"Got cards:\", r);\r\n\r\n        const _cardsMap = {};\r\n\r\n        const _cards = r.info.map((c) => {\r\n          if (!_cardsMap[c.debit_bank]) {\r\n            _cardsMap[c.debit_bank] = c.id;\r\n          }\r\n\r\n          return c.debit_bank;\r\n        });\r\n\r\n        setCardsMap(_cardsMap);\r\n\r\n        if (!_cards.length) {\r\n          _cards.push(\"\");\r\n        }\r\n\r\n        setForm((f) => ({\r\n          ...f,\r\n          debit_bank: _cards[0] || \"\",\r\n        }));\r\n\r\n        setCards(_cards);\r\n\r\n        setStatus(1);\r\n      },\r\n      (e) => {\r\n        console.warn(\"Unable to get cards:\", e);\r\n\r\n        setStatus(1);\r\n      }\r\n    );\r\n\r\n    return () => req.cancel();\r\n  }, []);\r\n\r\n  const fields = [\r\n    { id: \"debit_bank\", label: \"选择银行卡\", placeholder: \"银行卡号\" },\r\n  ];\r\n  const fieldss = [{ id: \"amount\", label: \"￥\", placeholder: \"金额\" }];\r\n\r\n  const withdraw = () => {\r\n    const { debit_bank, amount } = form;\r\n\r\n    if (!debit_bank) {\r\n      // return void showAlert(\"系统提示\", \"必须选择一张卡\");\r\n      return void showAlert(\"系统提示\", \"必须选择一张银行卡\");\r\n    }\r\n\r\n    const _amount = +amount;\r\n\r\n    if (!_amount || isNaN(_amount)) {\r\n      return void showAlert(\"系统提示\", \"取款金额不能为空\");\r\n    }\r\n\r\n    // if (_amount < 100 || _amount > 60000) {\r\n    //   return void showAlert(\"系统提示\", \"系统提示\");\r\n    // }\r\n\r\n    if (_amount < 100) {\r\n      return void showAlert(\"系统提示\", \"取款金额最低100元\");\r\n    }\r\n\r\n    console.info(`You're about to withdraw ${amount}¥`);\r\n\r\n    setStatus(0);\r\n\r\n    const _form = { ...form };\r\n    _form.debit_bank = cardsMap[debit_bank] || \"\";\r\n\r\n    Service.User.withdraw({\r\n      ...Service.User.read(),\r\n      ..._form,\r\n    }).promise.then(\r\n      (r) => {\r\n        console.log(`You've successfully withdrawn:`, r);\r\n\r\n        showAlert(\"系统提示\", r.info);\r\n\r\n        setStatus(1);\r\n\r\n        setUpdate((u) => u + 1);\r\n      },\r\n      (e) => {\r\n        console.warn(\"Unable to withdraw:\", e);\r\n\r\n        showAlert(\"系统提示\", e);\r\n\r\n        setStatus(1);\r\n      }\r\n    );\r\n  };\r\n\r\n  const wallet = async (e) => {\r\n    setStatus(0);\r\n\r\n    Service.Game.transferToWallet().promise.then(\r\n      (r) => {\r\n        // console.log(r)\r\n        setStatus(1);\r\n        setBalanceTransferred(true);\r\n      },\r\n      (e) => {\r\n        console.warn(e);\r\n        setStatus(1);\r\n      }\r\n    );\r\n  };\r\n\r\n  const onMax = () => {\r\n    setForm({\r\n      ...form,\r\n      amount: Math.floor( userAuth.data.balance ),\r\n    });\r\n  };\r\n\r\n  const onNewAddCard = () => {\r\n    const req = Service.Card.read({\r\n      ...Service.User.read(),\r\n    });\r\n    setStatus(0);\r\n    req.promise.then(\r\n      (r) => {\r\n        const _cardsMap = {};\r\n        const _cards = reverse(r.info).map((c) => {\r\n          if (!_cardsMap[c.debit_bank]) {\r\n            _cardsMap[c.debit_bank] = c.id;\r\n          }\r\n          return c.debit_bank;\r\n        });\r\n        setCardsMap(_cardsMap);\r\n        if (!_cards.length) {\r\n          _cards.push(\"\");\r\n        }\r\n        setForm((f) => ({\r\n          ...f,\r\n          debit_bank: _cards[0] || \"\",\r\n        }));\r\n\r\n        setCards(_cards);\r\n\r\n        setStatus(1);\r\n      },\r\n      (e) => {\r\n        console.warn(\"Unable to get cards:\", e);\r\n        setStatus(1);\r\n      }\r\n    );\r\n    return () => req.cancel();\r\n  };\r\n\r\n  // console.log(form)\r\n\r\n  const onShowVenue = () => {\r\n    setShowVenue(!showVenue);\r\n  };\r\n\r\n  const onlyNumbers = (e) => {\r\n    const { name , value } = e.currentTarget\r\n    let regexp  = /^[0-9\\b]+$/\r\n    if (!value || regexp.test(value)) {\r\n      setForm((f) => ({\r\n        ...f,\r\n        [name]: value,\r\n      }));\r\n    }\r\n\r\n  };\r\n\r\n\r\n  // console.log(update)\r\n\r\n  return (\r\n    <Wrap className=\"profile-withdraw\" name=\"马上提款\" isLoading={!status}>\r\n      <div className=\"form-field user-balance\">\r\n        <div className=\"user-balance-wrap wallet\">\r\n          <span className=\"user-balance-label\">\r\n            <i /> 中心钱包\r\n          </span>\r\n          <span className=\"user-balance-amount\">{userAuth.data.balance}</span>\r\n        </div>\r\n        <div className=\"user-balance-wrap hr\" />\r\n        <div className=\"user-balance-wrap refresh\" onClick={wallet}>\r\n          <i />\r\n          <span className=\"user-balance-label\">一键回收</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"form-field-section\">\r\n        <div className=\"form-field balances-list\">\r\n          {balancesRaw.map((balance, i) => (\r\n            <div key={i} className=\"balances-list--item\">\r\n              <div className=\"game-name\">{balance.game.name}</div>\r\n              <div className=\"game-balance\">\r\n                {BigNumber(balance.balance).toFormat(2)}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"balances-list-load-more\" onClick={() => onShowVenue()}>\r\n          <span className={showVenue ? \"show\" : \"\"}>显示所有场馆</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"withdraw-form\">\r\n        <div className=\"fields\">\r\n          {fields.map((f, i) => (\r\n            <FormField\r\n              key={i}\r\n              field={{\r\n                label: f.label,\r\n                placeholder: f.placeholder,\r\n                select: f.id === \"debit_bank\",\r\n                onClick: () => toggleCardPicker(!cardPicker),\r\n              }}\r\n              input={{\r\n                ...f,\r\n                name: f.id,\r\n                value: form[f.id],\r\n                onChange: (e) => {\r\n                  const { name, value } = e.target;\r\n                  setForm((f) => ({\r\n                    ...f,\r\n                    [name]: value,\r\n                  }));\r\n                },\r\n              }}\r\n            />\r\n          ))}\r\n          {cardPicker && (\r\n            <div className=\"cardtogglepicker\">\r\n              {cards &&\r\n                cards.map((obj, i) => {\r\n                  return (\r\n                    <div\r\n                      key={i}\r\n                      className={`cardtogglepicker-wrap ${\r\n                        form.debit_bank === obj ? \"active\" : \"\"\r\n                      }`}\r\n                      onClick={() => [\r\n                        setForm({ ...form, debit_bank: obj }),\r\n                        toggleCardPicker(false),\r\n                      ]}\r\n                    >\r\n                      {obj}\r\n                    </div>\r\n                  );\r\n                })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"withdraw-two-buttons\">\r\n          <button\r\n            onClick={() => setShowNewCard(true)}\r\n            className=\"w-t-btn new-button-card\"\r\n          >\r\n            新增银行卡\r\n          </button>\r\n          <button\r\n            onClick={() => setShowDelCard(true)}\r\n            className=\"w-t-btn untie-button-card\"\r\n          >\r\n            解绑银行卡\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"fields-fields\">\r\n          {fieldss.map((f, i) => (\r\n            <FormField\r\n              key={i}\r\n              field={{\r\n                label: f.label,\r\n                placeholder: f.placeholder,\r\n                select: f.id === \"debit_bank\",\r\n                onClick: () => toggleCardPicker(true),\r\n              }}\r\n              input={{\r\n                ...f,\r\n                name: f.id,\r\n                value: form[f.id],\r\n                onChange: (e) => onlyNumbers(e)\r\n                // onKeyDown: (e) => onlyNumbers(e)  \r\n\r\n              }}\r\n            />\r\n          ))}\r\n          <button onClick={() => onMax()} className=\"btn-field-max\">\r\n            最大金额\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"submit\">\r\n          <button className=\"button-stylized\" onClick={withdraw}>\r\n            提交\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={cx(\"withdraw-list\")}>\r\n        <Withdraws update={update} alert={{ showAlert, hideAlert }} />\r\n      </div>\r\n\r\n      {/* <div className={cx('card-select-overlay', { shown: cardPicker })}>\r\n\t\t\t\t<div className=\"picker-wrap\">\r\n\t\t\t\t\t<div className=\"picker-head\">\r\n\t\t\t\t\t\t<button onClick={() => toggleCardPicker(false)}>取消</button>\r\n\t\t\t\t\t\t<p>选择卡</p>\r\n\t\t\t\t\t\t<button onClick={() => toggleCardPicker(false)}>确定</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"picker-body\">\r\n\t\t\t\t\t\t{cardPicker ? (\r\n\t\t\t\t\t\t<Picker\r\n\t\t\t\t\t\t\theight={120}\r\n\t\t\t\t\t\t\tvalueGroups={{ debit_bank: form.debit_bank }}\r\n\t\t\t\t\t\t\toptionGroups={{ debit_bank: cards }}\r\n\t\t\t\t\t\t\tonChange={(k, v) => setForm({ ...form, [k]: v, })}/>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div> */}\r\n\r\n      <UIAlertSA {...alert} />\r\n      <NewCard\r\n        show={showNewCard}\r\n        delCard={showDelCard}\r\n        onHide={() => [setShowNewCard(false), setShowDelCard(false)]}\r\n        onNewAddCard={() => onNewAddCard()}\r\n      />\r\n      <UIAlertSA onClose={() => null} shown={balanceTransferred}>\r\n        <div className={`game-sa-overlay`}>\r\n          <div className=\"overlay-layer\">\r\n            <div className=\"form response\">\r\n              <div className=\"form-head\">\r\n                <i />\r\n                <h2>转账成功</h2>\r\n              </div>\r\n              <div className=\"form-body\">\r\n                <button onClick={() => setBalanceTransferred(false)}>\r\n                  确认\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </UIAlertSA>\r\n    </Wrap>\r\n  );\r\n};\r\n\r\nexport default withAuth(Withdraw, 1);\r\n"]},"metadata":{},"sourceType":"module"}