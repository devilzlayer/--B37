{"ast":null,"code":"var _jsxFileName = \"/Users/cramj/Downloads/usportproject 2/src/pwa/view/TransferRecord.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { map, truncate, replace, split, head, last } from \"lodash\";\nimport { Wrap } from \"../view/profile/\";\nimport \"../assets/scss/TransferRecord.scss\";\nimport api from \"../../service/api\";\nimport { User, Transaction } from \"../../service\";\nimport { getAuthKey } from \"../../util\";\nimport { withAuth } from \"../util/\";\n\nconst CardItem = props => {\n  const {\n    label,\n    subLabel,\n    time,\n    value,\n    status,\n    className\n  } = props;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `transfer-record-card-item ${className ? className : \"\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cl-item transfer-record-card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"cl-card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 11\n    }\n  }, label), subLabel && /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 24\n    }\n  }, subLabel)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"cl-card-time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 9\n    }\n  }, time)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cl-item transfer-record-card-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"cl-card-amount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }, \"\\u91D1\\u989D: \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 15\n    }\n  }, value)), /*#__PURE__*/React.createElement(\"p\", {\n    className: `cl-card-status ${status === \"成功\" ? \"success\" : \"failure\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 11\n    }\n  }, status))));\n};\n\nconst TransferRecord = () => {\n  const [items, setItems] = useState([]);\n  const [load, setLoad] = useState(false);\n  useEffect(() => {\n    const fetch = () => {\n      // console.log(User.read())\n      const response = api.post(\"newpwa/ajax_data.php\", { ...User.read(),\n        auth: getAuthKey(),\n        record_type: \"transfer\",\n        type: \"record_list\"\n      });\n      response.promise.then(result => {\n        // console.log(result);\n        if (result.status === 1) {\n          setItems(result.info);\n          setLoad(false);\n        }\n      }, e => {\n        console.log(\"Unable to response:\", e);\n      });\n    };\n\n    fetch();\n  }, [load]);\n  const history = useHistory();\n  return /*#__PURE__*/React.createElement(Wrap, {\n    className: \"transfer-record-wrap\",\n    centerName: \"\\u8F6C\\u8D26\\u8BB0\\u5F55\",\n    sublevel: [true, () => history.goBack()],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transfer-record-wrap-inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transfer-record-wrap-inner-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transfer-record-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transfer-record-card-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transfer-record-card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, \"\\u6700\\u8FD130\\u5929\"), /*#__PURE__*/React.createElement(\"i\", {\n    className: load ? \"reload\" : \"\",\n    onClick: () => setLoad(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transfer-record-card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, items && items.length > 0 ? map(items, (obj, i) => {\n    let reg = split(obj.platName, \"-->\", 2);\n    return /*#__PURE__*/React.createElement(CardItem, {\n      key: i,\n      index: i,\n      label: head(reg),\n      subLabel: last(reg),\n      time: obj.requestTime,\n      value: obj.amount,\n      status: obj.tranStatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    });\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"no-transactions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 19\n    }\n  }, \"\\u6682\\u65E0\\u8BB0\\u5F55\")))))));\n};\n\nexport default withAuth(TransferRecord, 1);","map":{"version":3,"sources":["/Users/cramj/Downloads/usportproject 2/src/pwa/view/TransferRecord.js"],"names":["React","useEffect","useState","useHistory","map","truncate","replace","split","head","last","Wrap","api","User","Transaction","getAuthKey","withAuth","CardItem","props","label","subLabel","time","value","status","className","TransferRecord","items","setItems","load","setLoad","fetch","response","post","read","auth","record_type","type","promise","then","result","info","e","console","log","history","goBack","length","obj","i","reg","platName","requestTime","amount","tranStatus"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { map, truncate, replace, split, head, last } from \"lodash\";\r\n\r\nimport { Wrap } from \"../view/profile/\";\r\n\r\nimport \"../assets/scss/TransferRecord.scss\";\r\n\r\nimport api from \"../../service/api\";\r\nimport { User, Transaction } from \"../../service\";\r\n\r\nimport { getAuthKey } from \"../../util\";\r\nimport { withAuth } from \"../util/\";\r\n\r\nconst CardItem = (props) => {\r\n  const { label, subLabel, time, value, status, className } = props;\r\n\r\n  return (\r\n    <div className={`transfer-record-card-item ${className ? className : \"\"}`}>\r\n      <div className=\"cl-item transfer-record-card-text\">\r\n        <p className=\"cl-card-text\">\r\n          <span>{label}</span>\r\n          {subLabel && <span>{subLabel}</span>}\r\n        </p>\r\n        <p className=\"cl-card-time\">{time}</p>\r\n      </div>\r\n      <div className=\"cl-item transfer-record-card-value\">\r\n        <p className=\"cl-card-amount\">\r\n          金额: <span>{value}</span>\r\n        </p>\r\n        <p\r\n          className={`cl-card-status ${\r\n            status === \"成功\" ? \"success\" : \"failure\"\r\n          }`}\r\n        >\r\n          {/* <span>\t{status? \"成功\" : \"失败\"}</span> */}\r\n          <span>{status}</span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TransferRecord = () => {\r\n  const [items, setItems] = useState([]);\r\n  const [load, setLoad] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetch = () => {\r\n      // console.log(User.read())\r\n\r\n      const response = api.post(\"newpwa/ajax_data.php\", {\r\n        ...User.read(),\r\n        auth: getAuthKey(),\r\n        record_type: \"transfer\",\r\n        type: \"record_list\",\r\n      });\r\n\r\n      response.promise.then(\r\n        (result) => {\r\n          // console.log(result);\r\n          if (result.status === 1) {\r\n            setItems(result.info);\r\n            setLoad(false);\r\n          }\r\n        },\r\n        (e) => {\r\n          console.log(\"Unable to response:\", e);\r\n        }\r\n      );\r\n    };\r\n    fetch();\r\n  }, [load]);\r\n\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <Wrap\r\n      className=\"transfer-record-wrap\"\r\n      centerName=\"转账记录\"\r\n      sublevel={[true, () => history.goBack()]}\r\n    >\r\n      <div className=\"transfer-record-wrap-inner\">\r\n        <div className=\"transfer-record-wrap-inner-content\">\r\n          <div className=\"transfer-record-card\">\r\n            <div className=\"transfer-record-card-head\">\r\n              <div className=\"transfer-record-card-title\">\r\n                <span>最近30天</span>\r\n                <i\r\n                  className={load ? \"reload\" : \"\"}\r\n                  onClick={() => setLoad(true)}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"transfer-record-card-body\">\r\n              {/* ITEM */}\r\n              {items && items.length > 0 ? (\r\n                map(items, (obj, i) => {\r\n                  let reg = split(obj.platName, \"-->\", 2);\r\n                  return (\r\n                    <CardItem\r\n                      key={i}\r\n                      index={i}\r\n                      label={head(reg)}\r\n                      subLabel={last(reg)}\r\n                      time={obj.requestTime}\r\n                      value={obj.amount}\r\n                      status={obj.tranStatus}\r\n                    />\r\n                  );\r\n                })\r\n              ) : (\r\n                <div className=\"no-transactions\">\r\n                  <div className=\"image-box\" />\r\n                  <span>暂无记录</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Wrap>\r\n  );\r\n};\r\n\r\nexport default withAuth(TransferRecord, 1);\r\n"]},"metadata":{},"sourceType":"module"}