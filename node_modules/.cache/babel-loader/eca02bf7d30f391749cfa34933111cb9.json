{"ast":null,"code":"import _objectSpread from\"/Users/cramj/Documents/New PWA/GIT/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cramj/Documents/New PWA/GIT/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{User,Promotions as Service}from'../../service/';import{Icon}from'../../component/';import'../assets/scss/PromoOverSA.scss';function PromoOverSA(_ref){var onClose=_ref.onClose;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),promotions=_useState4[0],setPromotions=_useState4[1];useEffect(function(){var req=Service.read_updated(_objectSpread({},User.read()));setStatus(0);req.promise.then(function(r){console.info('Got promotions:',r);setStatus(1);setPromotions(r.info);},function(e){console.warn('Unable to get promotions:',e);setStatus(1);});return function(){return req.cancel();};},[]);return/*#__PURE__*/React.createElement(\"div\",{className:\"promo-over-sa with-loader\".concat(!status?' loading':'')},/*#__PURE__*/React.createElement(\"div\",{className:\"load-spin\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"promo-over-sa--head\"},/*#__PURE__*/React.createElement(\"div\",{className:\"promotions-sa-title\"},/*#__PURE__*/React.createElement(\"h1\",null,\"\\u4FC3\\u9500\\u6D3B\\u52A8\")),/*#__PURE__*/React.createElement(\"button\",{onClick:onClose},/*#__PURE__*/React.createElement(Icon,{name:\"close-circle-sharp\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"promo-over-sa--content\"},promotions.map(function(promotion,i){return/*#__PURE__*/React.createElement(Link,{className:\"banner\",to:\"/promotion/\".concat(promotion.id),key:i},/*#__PURE__*/React.createElement(\"div\",{className:\"banner-inner\"},/*#__PURE__*/React.createElement(\"div\",{className:\"banner-inner-wrap\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://\".concat(promotion.bannerurl),alt:promotion.title})),/*#__PURE__*/React.createElement(\"div\",{className:\"banner-body\"},/*#__PURE__*/React.createElement(\"p\",null,\"\\u79BB\\u6D3B\\u52A8\\u7ED3\\u675F: \",promotion.endTime,/*#__PURE__*/React.createElement(\"span\",null,\"\\u66F4\\u591A\\u5185\\u5BB9\")))));})));}export default PromoOverSA;","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/GIT/src/pwa/component/PromoOverSA.js"],"names":["React","useState","useEffect","Link","User","Promotions","Service","Icon","PromoOverSA","onClose","status","setStatus","promotions","setPromotions","req","read_updated","read","promise","then","r","console","info","e","warn","cancel","map","promotion","i","id","bannerurl","title","endTime"],"mappings":"+RAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,OAASC,IAAT,CAAeC,UAAU,GAAIC,CAAAA,OAA7B,KAA4C,gBAA5C,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,MAAO,iCAAP,CAEA,QAASC,CAAAA,WAAT,MAAmC,IAAXC,CAAAA,OAAW,MAAXA,OAAW,eAEJR,QAAQ,CAAC,CAAD,CAFJ,wCAE1BS,MAF0B,eAElBC,SAFkB,8BAGIV,QAAQ,CAAC,EAAD,CAHZ,yCAG1BW,UAH0B,eAGdC,aAHc,eAKlCX,SAAS,CAAC,UAAM,CAEf,GAAMY,CAAAA,GAAG,CAAGR,OAAO,CAACS,YAAR,kBACRX,IAAI,CAACY,IAAL,EADQ,EAAZ,CAIAL,SAAS,CAAC,CAAD,CAAT,CAEAG,GAAG,CAACG,OAAJ,CAAYC,IAAZ,CAAiB,SAAAC,CAAC,CAAI,CAErBC,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAgCF,CAAhC,EAEAR,SAAS,CAAC,CAAD,CAAT,CAEAE,aAAa,CAACM,CAAC,CAACE,IAAH,CAAb,CAEA,CARD,CAQG,SAAAC,CAAC,CAAI,CAEPF,OAAO,CAACG,IAAR,CAAa,2BAAb,CAA0CD,CAA1C,EAEAX,SAAS,CAAC,CAAD,CAAT,CAEA,CAdD,EAgBA,MAAO,kBAAMG,CAAAA,GAAG,CAACU,MAAJ,EAAN,EAAP,CAEA,CA1BQ,CA0BN,EA1BM,CAAT,CA4BA,mBACC,2BAAK,SAAS,oCAA8B,CAACd,MAAD,CAAU,UAAV,CAAuB,EAArD,CAAd,eACC,2BAAK,SAAS,CAAC,WAAf,EADD,cAEC,2BAAK,SAAS,CAAC,qBAAf,eAEC,2BAAK,SAAS,CAAC,qBAAf,eACC,yDADD,CAFD,cAKC,8BAAQ,OAAO,CAAED,OAAjB,eACC,oBAAC,IAAD,EAAM,IAAI,CAAC,oBAAX,EADD,CALD,CAFD,cAWC,2BAAK,SAAS,CAAC,wBAAf,EACEG,UAAU,CAACa,GAAX,CAAe,SAACC,SAAD,CAAYC,CAAZ,qBAChB,oBAAC,IAAD,EAAM,SAAS,CAAC,QAAhB,CAAyB,EAAE,sBAAgBD,SAAS,CAACE,EAA1B,CAA3B,CAA2D,GAAG,CAAED,CAAhE,eACC,2BAAK,SAAS,CAAC,cAAf,eAIC,2BAAK,SAAS,CAAC,mBAAf,eACC,2BAAK,GAAG,mBAAaD,SAAS,CAACG,SAAvB,CAAR,CAA4C,GAAG,CAAEH,SAAS,CAACI,KAA3D,EADD,CAJD,cAOC,2BAAK,SAAS,CAAC,aAAf,eACC,gEAAWJ,SAAS,CAACK,OAArB,cACA,2DADA,CADD,CAPD,CADD,CADgB,EAAf,CADF,CAXD,CADD,CA6CA,CAED,cAAevB,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { User, Promotions as Service } from '../../service/';\r\nimport { Icon } from '../../component/';\r\n\r\nimport '../assets/scss/PromoOverSA.scss';\r\n\r\nfunction PromoOverSA ({ onClose }) {\r\n\r\n\tconst [ status, setStatus ] = useState(1);\r\n\tconst [ promotions, setPromotions ] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconst req = Service.read_updated({\r\n\t\t\t...User.read(),\r\n\t\t});\r\n\r\n\t\tsetStatus(0);\r\n\r\n\t\treq.promise.then(r => {\r\n\r\n\t\t\tconsole.info('Got promotions:', r);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t\tsetPromotions(r.info);\r\n\r\n\t\t}, e => {\r\n\t\r\n\t\t\tconsole.warn('Unable to get promotions:', e);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t});\r\n\r\n\t\treturn () => req.cancel();\r\n\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className={`promo-over-sa with-loader${!status ? ' loading' : ''}`}>\r\n\t\t\t<div className=\"load-spin\"></div>\r\n\t\t\t<div className=\"promo-over-sa--head\">\r\n\t\t\t\t{/* <h2>促销活动</h2> */}\r\n\t\t\t\t<div className=\"promotions-sa-title\">\r\n\t\t\t\t\t<h1>促销活动</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button onClick={onClose}>\r\n\t\t\t\t\t<Icon name=\"close-circle-sharp\" />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"promo-over-sa--content\">\r\n\t\t\t\t{promotions.map((promotion, i) => (\r\n\t\t\t\t<Link className=\"banner\" to={`/promotion/${promotion.id}`} key={i}>\r\n\t\t\t\t\t<div className=\"banner-inner\">\r\n\t\t\t\t\t\t{/* <div className=\"banner-title\">\r\n\t\t\t\t\t\t\t<h4>{promotion.title}</h4>\r\n\t\t\t\t\t\t</div> */}\r\n\t\t\t\t\t\t<div className=\"banner-inner-wrap\">\r\n\t\t\t\t\t\t\t<img src={`https://${promotion.bannerurl}`} alt={promotion.title} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"banner-body\">\r\n\t\t\t\t\t\t\t<p>离活动结束: {promotion.endTime} \r\n\t\t\t\t\t\t\t<span>更多内容</span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* <div className=\"banner-inner\">\r\n\t\t\t\t\t\t<div className=\"banner-title\">\r\n\t\t\t\t\t\t\t<h4>{promotion.title}</h4>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<img src={`https://${promotion.bannerurl}`} alt={promotion.title} />\r\n\t\t\t\t\t\t<div className=\"banner-body\">\r\n\t\t\t\t\t\t\t<p>离活动结束: {promotion.endTime}</p>\r\n\t\t\t\t\t\t\t<button>更多内容</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div> */}\r\n\t\t\t\t</Link>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nexport default PromoOverSA;\r\n"]},"metadata":{},"sourceType":"module"}