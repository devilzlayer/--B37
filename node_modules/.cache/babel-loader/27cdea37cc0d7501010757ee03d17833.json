{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext,useMemo}from'react';import{useParams,useLocation,useHistory}from'react-router-dom';import cx from'classnames';import*as moment from'moment';import DatePicker from'react-datepicker';import{withAuth,toDate,getAuthKey}from'../util/';import{User,Game,Card,Transaction as Service}from'../service/';import{UITabs,UISelect,Icon,FormField}from'../component/';import{UIAlertSA}from'../pwa/component/';import'react-datepicker/dist/react-datepicker.css';import'../assets/scss/Dashboard.scss';function useQuery(){return new URLSearchParams(useLocation().search);}function DashboardTransfer(){var _balances$map$BTI,_balances$map$IM,_balances$map$,_balances$map$AG,_balances$map$EB,_balances$map$IM2,_balances$map$CQ,_balances$map$PT,_balances$map$MG,_balances$map$2;var _useContext=useContext(User.Context),userAuth=_useContext.userAuth,setUserAuthFN=_useContext.setUserAuthFN;var _useState=useState({status:0,update:0,list:[],from:[],to:[],map:{}}),_useState2=_slicedToArray(_useState,2),balances=_useState2[0],setBalances=_useState2[1];var _useState3=useState({wallet:[],games:[]}),_useState4=_slicedToArray(_useState3,2),balancesFill=_useState4[0],setBalancesFill=_useState4[1];var _useState5=useState({from:null,to:null,amount:'',overlay:false}),_useState6=_slicedToArray(_useState5,2),form=_useState6[0],setForm=_useState6[1];useEffect(function(){setBalances(function(b){return _objectSpread(_objectSpread({},b),{},{status:0,list:[],map:{}});});Game.balances(_objectSpread({},User.read())).then(function(_balances){var list=_balances.filter(function(b){return!b.error;}).map(function(b){return\"\".concat(b.game.name,\": \").concat(b.balance,\" \\xA5\");});list.unshift(\"\\u4E2D\\u592E\\u94B1\\u5305: \".concat(userAuth.data.balance,\" \\xA5\"));setBalancesFill({wallet:[\"\\u4E2D\\u592E\\u94B1\\u5305: \".concat(userAuth.data.balance,\" \\xA5\")],games:_balances.filter(function(b){return!b.error;}).map(function(b){return\"\".concat(b.game.name,\": \").concat(b.balance,\" \\xA5\");})});var map={};_balances.filter(function(b){return!b.error;}).forEach(function(b){map[b.game.name]=b;});map['中央钱包']={game:{id:0,name:'wallet'},wallet:true,balance:userAuth.data.balance};setForm(function(f){return _objectSpread(_objectSpread({},f),{},{from:list[0],to:list[1]});});setBalances(function(b){return _objectSpread(_objectSpread({},b),{},{status:1,list:list,from:list,to:_balances.filter(function(b){return!b.error;}).map(function(b){return\"\".concat(b.game.name,\": \").concat(b.balance,\" \\xA5\");}),map:map});});});},[balances.update,userAuth.data.balance]);var swapGames=function swapGames(){var _ref=[form.from,form.to],_to=_ref[0],_from=_ref[1];var from=(_from||'').split(': ')[0];var to=(_to||'').split(': ')[0];var _d1=balances.map[from].wallet?'games':'wallet';var _d2=balances.map[to].wallet?'games':'wallet';from=\"\".concat(from,\": \").concat(balances.map[from].balance,\" \\xA5\");to=\"\".concat(to,\": \").concat(balances.map[to].balance,\" \\xA5\");setBalances(function(b){return _objectSpread(_objectSpread({},b),{},{from:balancesFill[_d2],to:balancesFill[_d1]});});setForm(function(bf){return _objectSpread(_objectSpread({},bf),{},{from:from,to:to});});};var _updateBalances=function _updateBalances(){setBalances(function(b){return _objectSpread(_objectSpread({},b),{},{status:1});});User.session(_objectSpread({},User.read())).promise.then(function(r){setUserAuthFN(1,r.info);});};var updateBalances=function updateBalances(){setBalances(function(b){return _objectSpread(_objectSpread({},b),{},{status:0});});Game.transferToWallet().promise.then(function(r){setForm(function(f){return _objectSpread(_objectSpread({},f),{},{overlay:true});});setBalances(function(b){return _objectSpread(_objectSpread({},b),{},{update:b.update+1});});},function(e){console.warn(e);setBalances(function(b){return _objectSpread(_objectSpread({},b),{},{status:1});});});};var selectGame=function selectGame(dist,option){if(dist==='from'){var v=(option||'').split(': ')[0];var d=balances.map[v].wallet?'games':'wallet';setBalances(function(b){return _objectSpread(_objectSpread({},b),{},{to:balancesFill[d]});});setForm(function(f){return _objectSpread(_objectSpread({},f),{},{to:balancesFill[d][0]});});}setForm(function(f){return _objectSpread(_objectSpread({},f),{},_defineProperty({},dist,option));});};var transfer=function transfer(){if(!form.amount||isNaN(+form.amount)){return void console.warn('[transfer] No amount');}var _getMap=function _getMap(n){return balances.map[n.split(': ')[0]]||null;};var _from=_getMap(form.from);var _to=_getMap(form.to);if(_from.game.id===_to.game.id){return void console.warn('[transfer] Same game');}if(_from.balance===0){return void console.warn('[transfer] Zero balance');}if(_from.balance<+form.amount){return void console.warn('[transfer] Not enough game balance');}console.info(\"You're transfering \".concat(form.amount,\" \\xA5 from \").concat(_from.game.name,\" to \").concat(_to.game.name));setBalances(function(b){return _objectSpread(_objectSpread({},b),{},{status:0});});Game.transfer(_objectSpread(_objectSpread({},User.read()),{},{amount:+form.amount,from:_from.game.id,to:_to.game.id})).then(function(r){console.info(\"You have successfully transferred \".concat(form.amount,\" \\xA5 from \").concat(_from.game.name,\" to \").concat(_to.game.name,\": \").concat(r.info));setBalances(function(b){return _objectSpread(_objectSpread({},b),{},{status:1});});setForm({from:null,to:null,amount:'',overlay:true});// updateBalances();\n},function(e){console.error(e);setBalances(function(b){return _objectSpread(_objectSpread({},b),{},{status:-1});});});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"transfer with-loader\".concat(balances.status===0?' loading':'')},/*#__PURE__*/React.createElement(\"div\",{className:\"load-spin\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-head\"},/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-title\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u8F6C\\u8D26\"),/*#__PURE__*/React.createElement(\"p\",null,\"\\u573A\\u9986\\u94B1\\u5305\\u4E4B\\u95F4\\u4E0D\\u53EF\\u4EE5\\u4E92\\u8F6C\\u3002\\u5F53\\u60A8\\u5F00\\u542F\\u514D\\u8F6C\\u94B1\\u5305\\u65F6\\uFF0C\\u6BCF\\u4E2A\\u573A\\u9986\\u65E0\\u9700\\u8F6C\\u8D26\\u5373\\u53EF\\u7545\\u73A9\\u3002\")),/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-refresh\"},/*#__PURE__*/React.createElement(\"button\",{onClick:updateBalances},/*#__PURE__*/React.createElement(Icon,{name:\"refresh\"}),/*#__PURE__*/React.createElement(\"span\",null,\"\\u5237\\u65B0 \\u4E00\\u952E\\u56DE\\u6536\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-form--item dists\"},/*#__PURE__*/React.createElement(\"div\",{className:\"transform-field\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u63A8\\u51FA\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-field--wrap\"},/*#__PURE__*/React.createElement(UISelect,{value:form.from,options:balances.from,placeholder:\"\\u63A8\\u51FA\",onSelect:function onSelect(option){return selectGame('from',option);}})))),/*#__PURE__*/React.createElement(\"div\",{className:\"transform-switch\"},/*#__PURE__*/React.createElement(\"button\",{onClick:swapGames},/*#__PURE__*/React.createElement(Icon,{name:\"switch\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"transform-field\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-field\"},/*#__PURE__*/React.createElement(\"label\",null,\"\\u8FDB\\u5165\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-field--wrap\"},/*#__PURE__*/React.createElement(UISelect,{value:form.to,options:balances.to,placeholder:\"\\u8FDB\\u5165\",onSelect:function onSelect(option){return selectGame('to',option);}}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-form--item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"amount\"},\"\\u91D1\\u989D\"),/*#__PURE__*/React.createElement(\"input\",{id:\"amount\",type:\"text\",placeholder:\"\\u91D1\\u989D\",value:form.amount,onChange:function onChange(e){var amount=e.target.value;setForm(function(f){return _objectSpread(_objectSpread({},f),{},{amount:amount});});}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-form--item\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button-stylized\",onClick:transfer},\"\\u786E\\u5B9A\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--category\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u4F53\\u80B2\\u535A\\u5F69\"),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--items\"},/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item BTI\\u4F53\\u80B2\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"balance\"},\"\\u4F59\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,((_balances$map$BTI=balances.map['BTI体育'])===null||_balances$map$BTI===void 0?void 0:_balances$map$BTI.balance)||0),\" \\u5143\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item IM\\u4F53\\u80B2\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"balance\"},\"\\u4F59\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,((_balances$map$IM=balances.map['IM体育'])===null||_balances$map$IM===void 0?void 0:_balances$map$IM.balance)||0),\" \\u5143\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item \\u6C99\\u5DF4\\u4F53\\u80B2\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"balance\"},\"\\u4F59\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,((_balances$map$=balances.map['沙巴体育'])===null||_balances$map$===void 0?void 0:_balances$map$.balance)||0),\" \\u5143\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--category\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u771F\\u4EBA\\u5A31\\u4E50\\u573A\"),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--items\"},/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item AG\\u771F\\u4EBA\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"balance\"},\"\\u4F59\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,((_balances$map$AG=balances.map['AG真人'])===null||_balances$map$AG===void 0?void 0:_balances$map$AG.balance)||0),\" \\u5143\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item EB\\u771F\\u4EBA\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"balance\"},\"\\u4F59\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,((_balances$map$EB=balances.map['EB真人'])===null||_balances$map$EB===void 0?void 0:_balances$map$EB.balance)||0),\" \\u5143\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--category\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u7535\\u5B50\\u7ADE\\u6280\\u535A\\u5F69\"),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--items\"},/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item IM\\u7535\\u7ADE\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"balance\"},\"\\u4F59\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,((_balances$map$IM2=balances.map['IM电竞'])===null||_balances$map$IM2===void 0?void 0:_balances$map$IM2.balance)||0),\" \\u5143\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--category\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u8001\\u864E\\u673A\\u6E38\\u620F\"),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--items\"},/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item CQ\\u7535\\u5B50\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"balance\"},\"\\u4F59\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,((_balances$map$CQ=balances.map['CQ电子'])===null||_balances$map$CQ===void 0?void 0:_balances$map$CQ.balance)||0),\" \\u5143\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item PT\\u7535\\u5B50\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"balance\"},\"\\u4F59\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,((_balances$map$PT=balances.map['PT电子'])===null||_balances$map$PT===void 0?void 0:_balances$map$PT.balance)||0),\" \\u5143\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item MG\\u7535\\u5B50\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"balance\"},\"\\u4F59\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,((_balances$map$MG=balances.map['MG电子'])===null||_balances$map$MG===void 0?void 0:_balances$map$MG.balance)||0),\" \\u5143\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--category\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u8C61\\u68CB\\u6E38\\u620F\"),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--items\"},/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item \\u5F00\\u5143\\u68CB\\u724C\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"balance\"},\"\\u4F59\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,((_balances$map$2=balances.map['开元棋牌'])===null||_balances$map$2===void 0?void 0:_balances$map$2.balance)||0),\" \\u5143\")))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-overlay\".concat(form.overlay?' shown':'')},/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-overlay--sublayer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"transfer-overlay--layer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"layer-head\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u63D0\\u793A\"),/*#__PURE__*/React.createElement(\"button\",{className:\"close\",onClick:function onClick(e){setForm(function(f){return _objectSpread(_objectSpread({},f),{},{overlay:false});});_updateBalances();}},/*#__PURE__*/React.createElement(Icon,{name:\"close-circle-sharp\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"layer-body\"},/*#__PURE__*/React.createElement(\"p\",null,\"\\u8F6C\\u79FB\\u6210\\u529F!\"),/*#__PURE__*/React.createElement(\"div\",{className:\"layer-button\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button-stylized\",onClick:function onClick(e){setForm(function(f){return _objectSpread(_objectSpread({},f),{},{overlay:false});});_updateBalances();}},\"OK\")))))));}function DashboardPersonal(){var _dateParse=function _dateParse(date,js){var _parsed=(date||'').match(/([\\d]{4})年([\\d]{1,2})月([\\d]{1,2})日/);if(!_parsed){if(js){var _dd=new Date();return new Date(_dd.getFullYear()-18,_dd.getMonth(),_dd.getDate());}return{year:null,month:null,day:null};}var _date={year:+_parsed[1],month:+_parsed[2],day:+_parsed[3]};if(js){return new Date(_date.year,_date.month-1,_date.day);}return _date;};var _useContext2=useContext(User.Context),user=_useContext2.userAuth.data,setUserAuthFN=_useContext2.setUserAuthFN;var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),status=_useState8[0],setStatus=_useState8[1];var _useState9=useState({email:user.email||'',name:user.realName||'',birthday:_dateParse(user.birthday,true),number:user.telephone||'',qq:user.qq||'',wechat:user.wechat||''}),_useState10=_slicedToArray(_useState9,2),form=_useState10[0],setForm=_useState10[1];var _useState11=useState({email:!!user.email,name:!!user.realName,birthday:!!user.birthday,number:!!user.telephone,qq:!!user.qq}),_useState12=_slicedToArray(_useState11,2),subform=_useState12[0],setSubform=_useState12[1];var _useState13=useState({className:null,source:null,message:null}),_useState14=_slicedToArray(_useState13,2),message=_useState14[0],setMessage=_useState14[1];var fields=[{field:{label:'邮箱'},input:{id:'email',name:'email',type:'email',placeholder:'邮箱'}},{field:{label:'真实姓名'},input:{id:'name',name:'name',type:'text',placeholder:'真实姓名'}},{field:{label:'出生年月'},input:{id:'birthday',name:'birthday',type:'text',placeholder:'出生年月'}},{field:{label:'手机号'},input:{id:'number',name:'number',type:'text',placeholder:'手机号'}},{field:{label:'QQ'},input:{id:'qq',name:'qq',type:'text',placeholder:'QQ'}}];var notify=function notify(state,source,message){setMessage({className:state?'valid':'invalid',source:source,message:message});};var onChange=function onChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setForm(function(f){return _objectSpread(_objectSpread({},f),{},_defineProperty({},name,value));});};var update=function update(){var _dateFormat=function _dateFormat(date){var _year=date.getFullYear();var _month=date.getMonth()+1;var _day=date.getDate();return\"\".concat(_year,\"\\u5E74\").concat(_month,\"\\u6708\").concat(_day,\"\\u65E5\");};setStatus(0);var shouldUpdate=false;for(var i in subform){if(!subform[i]){shouldUpdate=true;break;}}if(!shouldUpdate){setStatus(1);return void notify(false,'','联系CS更改个人信息');}console.info('You\\'re updating profile information:',form);User.update(_objectSpread(_objectSpread(_objectSpread({},User.read()),form),{},{birthday:_dateFormat(form.birthday),realname:form.name,phone:form.number})).promise.then(function(r){console.info('✅ You have successfully updated profile information:',r.info);setStatus(1);notify(true,'password',r.info);var _sf={};for(var _i in fields){var f=fields[_i];_sf[f.input.name]=!!form[f.input.name];}setSubform(_sf);User.session(_objectSpread({},User.read())).promise.then(function(r){return setUserAuthFN(1,r.info);});},function(e){console.warn('Unable to update profile information:',e);setStatus(1);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-personal with-loader\".concat(!status?' loading':'')},/*#__PURE__*/React.createElement(\"div\",{className:\"load-spin\"}),/*#__PURE__*/React.createElement(\"h2\",null,\"\\u4E2A\\u4EBA\\u8D44\\u6599\"),message.message?/*#__PURE__*/React.createElement(\"div\",{className:\"message \".concat(message.className)},message.message):null,/*#__PURE__*/React.createElement(\"div\",{className:\"fields\"},fields.map(function(f,i){return/*#__PURE__*/React.createElement(React.Fragment,{key:i},f.input.id==='birthday'?/*#__PURE__*/React.createElement(\"div\",{className:\"form-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:f.input.id},f.field.label),/*#__PURE__*/React.createElement(\"div\",{className:\"form-field--input-wrap with-arrow\"},/*#__PURE__*/React.createElement(DatePicker,{id:f.input.id,className:\"input-like\",placeholder:f.input.placeholder,dateFormat:\"yyyy\\u5E74M\\u6708d\\u65E5\",maxDate:moment().subtract(18,'years').toDate(),selected:form[f.input.name],disabled:subform[f.input.name],onChange:function onChange(d){return setForm(function(f){return _objectSpread(_objectSpread({},f),{},{birthday:d});});}}))):/*#__PURE__*/React.createElement(FormField,{field:f.field,input:_objectSpread(_objectSpread({},f.input),{},{onChange:onChange,value:form[f.input.name],disabled:subform[f.input.name]})}));})),/*#__PURE__*/React.createElement(\"div\",{className:\"submit\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button-stylized\",onClick:update},\"\\u4FDD\\u5B58\")));}var PasswordRegular=function PasswordRegular(_ref2){var setStatus=_ref2.setStatus;var _useState15=useState({password:'',password_new:'',password_newok:''}),_useState16=_slicedToArray(_useState15,2),form=_useState16[0],setForm=_useState16[1];var _useState17=useState({className:null,source:null,message:null}),_useState18=_slicedToArray(_useState17,2),message=_useState18[0],setMessage=_useState18[1];var fields=[{field:{label:'原密码'},input:{id:'password',name:'password',type:'password',placeholder:'原密码'}},{field:{label:'新密码'},input:{id:'password_new',name:'password_new',type:'password',placeholder:'新密码'}},{field:{label:'验证新密码'},input:{id:'password_newok',name:'password_newok',type:'password',placeholder:'验证新密码'}}];var notify=function notify(state,source,message){setMessage({className:state?'valid':'invalid',source:source,message:message});};var onChange=function onChange(e){var _e$target2=e.target,name=_e$target2.name,value=_e$target2.value;if(message.message&&message.source===name){setMessage({className:null,source:null,message:null});}setForm(function(f){return _objectSpread(_objectSpread({},f),{},_defineProperty({},name,value));});};var update=function update(){if(!form.password){return void notify(false,'password','未输入当前密码!');}if(!form.password_new){return void notify(false,'password_new','未输入新密码!');}if(form.password_new!==form.password_newok){return void notify(false,'password_new','输入的密码不匹配!');}setStatus(0);console.info('You\\'re updating account password:',form);User.updatePassword(_objectSpread(_objectSpread({},User.read()),form)).promise.then(function(r){console.info('✅ You have successfully updated account password:',r.info);notify(true,'password',r.info);setStatus(1);},function(e){console.warn('Unable to update account password:',e);notify(false,'password',e);setStatus(1);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"password-section regular\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u4FEE\\u6539\\u767B\\u5F55\\u5BC6\\u7801\"),/*#__PURE__*/React.createElement(\"div\",{className:\"fields\"},message.message?/*#__PURE__*/React.createElement(\"div\",{className:\"message \".concat(message.className)},message.message):null,fields.map(function(f,i){return/*#__PURE__*/React.createElement(FormField,{key:i,field:f.field,input:_objectSpread(_objectSpread({},f.input),{},{onChange:onChange})});})),/*#__PURE__*/React.createElement(\"div\",{className:\"submit\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button-stylized\",onClick:update},\"\\u4FDD\\u5B58\")));};function DashboardPassword(){var _useState19=useState(1),_useState20=_slicedToArray(_useState19,2),status=_useState20[0],_setStatus=_useState20[1];return/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-password with-loader\".concat(!status?' loading':'')},/*#__PURE__*/React.createElement(\"div\",{className:\"load-spin\"}),/*#__PURE__*/React.createElement(PasswordRegular,{setStatus:function setStatus(s){return _setStatus(s);}}));}function DashboardPayment(){var _useContext3=useContext(User.Context),userAuth=_useContext3.userAuth;var banks=[// '中国百银行',\n// '建设银行',\n// '度工商银行',\n// '中信银行',\n// '招商银行',\n// '广东发展银行',\n// '民生银行',\n// '农业银行',\n// '兴业银行',\n// '上海浦东发展银行',\n// '华夏知银行',\n// '交通银行',\n// '光大银道行',\n// '深圳发展银行',\n// '恒丰银行',\n// '渤海银行',\n'中国银行','中国建设银行','中国农业银行','中国工商银行','中国邮政储蓄银行','招商银行','交通银行','中信银行','平安银行','中国光大银行','上海浦东发展银行','广发银行','华夏银行','兴业银行','民生银行'];var _useState21=useState(1),_useState22=_slicedToArray(_useState21,2),status=_useState22[0],setStatus=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),update=_useState24[0],setUpdate=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),cards=_useState26[0],setCards=_useState26[1];useEffect(function(){var req=Card.read(_objectSpread({},User.read()));setStatus(0);req.promise.then(function(r){console.log('Got cards:',r);setCards(r.info);setStatus(1);},function(e){if(!e.is_aborted){console.warn('Unable to get cards:',e);setStatus(1);}});return function(){return req.cancel();};},[update]);var _useState27=useState({bank_type:'中国银行',bank_province:'',bank_city:'',realname:userAuth.data.realName||'',bank_addr:'',bank_no:''}),_useState28=_slicedToArray(_useState27,2),form=_useState28[0],setForm=_useState28[1];var fields=[{id:'bank_type',label:'开户银行',placeholder:'开户银行'},{id:'bank_province',label:'开户地区',placeholder:'开户地区'},{id:'bank_city',label:'开户支行',placeholder:'开户支行'},{id:'bank_addr',label:'开户支行',placeholder:'开户支行'},{id:'realname',label:'开户人姓名',placeholder:'开户人姓名'},{id:'bank_no',label:'银行卡号'}];var onChange=function onChange(e){var _e$target3=e.target,name=_e$target3.name,value=_e$target3.value;setForm(function(f){return _objectSpread(_objectSpread({},f),{},_defineProperty({},name,value));});};var submit=function submit(){setStatus(0);Card.create(_objectSpread(_objectSpread({},User.read()),form)).promise.then(function(r){console.info('Successfully bound the card:',r);setUpdate(function(u){return u+1;});setStatus(1);},function(e){console.info('Unable to bind the card:',e);setStatus(1);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-payment with-loader\".concat(!status?' loading':'')},/*#__PURE__*/React.createElement(\"div\",{className:\"load-spin\"}),cards.length?/*#__PURE__*/React.createElement(\"div\",{className:\"cards-list\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u8BBE\\u7F6E\\u94F6\\u884C\\u5361\"),/*#__PURE__*/React.createElement(\"div\",{className:\"cards-list--wrap\"},cards.map(function(card,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-content\"},/*#__PURE__*/React.createElement(\"h4\",null,card.debit_bank)));}))):null,/*#__PURE__*/React.createElement(\"div\",{className:\"cards-form\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u6DFB\\u52A0\\u94F6\\u884C\\u5361\"),/*#__PURE__*/React.createElement(\"div\",{className:\"cards-form--wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fields\"},fields.map(function(f,i){return f.id==='bank_type'?/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"form-field\"},/*#__PURE__*/React.createElement(\"label\",null,f.label),/*#__PURE__*/React.createElement(UISelect,{value:form.bank_type,options:banks,placeholder:\"\\u5E75\\u6237\\u94F6\\u884C\",onSelect:function onSelect(option){setForm(function(f){return _objectSpread(_objectSpread({},f),{},{bank_type:option});});}})):/*#__PURE__*/React.createElement(FormField,{key:i,field:{label:f.label,placeholder:f.placeholder},input:_objectSpread(_objectSpread({},f),{},{name:f.id,value:form[f.id],onChange:onChange})});})),/*#__PURE__*/React.createElement(\"div\",{className:\"submit\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button-stylized\",onClick:submit},\"\\u4FDD\\u5B58\")))));}function DashboardTransactions(){var query=useQuery();var history=useHistory();var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),loading=_useState30[0],setLoading=_useState30[1];var _useState31=useState(query.get('tab')||'debit'),_useState32=_slicedToArray(_useState31,2),type=_useState32[0],setType=_useState32[1];var _useState33=useState('today'),_useState34=_slicedToArray(_useState33,2),range=_useState34[0],setRange=_useState34[1];var _useState35=useState(0),_useState36=_slicedToArray(_useState35,2),customI=_useState36[0],setCustomI=_useState36[1];var _useState37=useState({from:moment().subtract(30,'days').toDate(),to:moment().toDate()}),_useState38=_slicedToArray(_useState37,2),customRange=_useState38[0],setCustomRange=_useState38[1];var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),overlayShown=_useState40[0],setOverlay=_useState40[1];var _useState41=useState([]),_useState42=_slicedToArray(_useState41,2),transactions=_useState42[0],setTransactions=_useState42[1];var _useState43=useState([]),_useState44=_slicedToArray(_useState43,2),transactionsFiltered=_useState44[0],setTransactionsFiltered=_useState44[1];useEffect(function(){var user=User.read();var req=Service.read(_objectSpread({record_type:type},user));setLoading(true);setTransactions([]);req.promise.then(function(r){var _transactions=r.info.map(function(t){t.timestamp=toDate(t.requestTime,true);if(t.endTime){t.timestamp=toDate(t.endTime,true);}if(t.add_date){t.timestamp=toDate(t.add_date,true);}return t;});setTransactions(_transactions);setLoading(false);},function(e){if(!e.is_aborted){console.error('Unable to get transactions:',e);setLoading(false);}});return function(){return req.cancel();};},[history,type]);useEffect(function(){var _rangeMap={today:function today(){var today=moment();return[today.startOf('day').unix(),today.endOf('day').unix()];},yesterday:function yesterday(){var yesterday=moment().subtract(1,'days');return[yesterday.startOf('day').unix(),yesterday.endOf('day').unix()];},week:function week(){return[moment().subtract(1,'weeks').startOf('day').unix(),moment().endOf('day').unix()];},month:function month(){return[moment().subtract(30,'days').startOf('day').unix(),moment().endOf('day').unix()];},custom:function custom(){var from=customRange.from,to=customRange.to;return[moment(from).startOf('day').unix(),moment(to).endOf('day').unix()];}};var _rangeMap$range=_rangeMap[range](),_rangeMap$range2=_slicedToArray(_rangeMap$range,2),from=_rangeMap$range2[0],to=_rangeMap$range2[1];var _transactions=transactions.filter(function(t){return t.timestamp>=from&&t.timestamp<to;});setTransactionsFiltered(_transactions);// eslint-disable-next-line\n},[range,customI,transactions]);useEffect(function(){var _tab=query.get('tab');if(!['debit','deposit','transfer','washcode'].includes(_tab)){_tab='debit';}setType(_tab);},[query,setType]);var setTypeHandle=function setTypeHandle(type){history.push({search:\"?tab=\".concat(type)});};var setRangeHandle=function setRangeHandle(range){if(range==='custom'){return void setOverlay(true);}setRange(range);};var applyCustomRange=function applyCustomRange(){setOverlay(false);setCustomI(customI+1);setRange('custom');};var TypeButton=function TypeButton(_ref3){var type=_ref3.type,current=_ref3.current,name=_ref3.name;return/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return setTypeHandle(type);},className:\"type-select--item\".concat(current===type?' active':'')},name);};var Transaction=function Transaction(_ref4){var type=_ref4.type,transaction=_ref4.transaction;return/*#__PURE__*/React.createElement(\"div\",{className:\"transaction\"},type==='debit'?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"p\",{className:\"date\"},transaction.requestTime),/*#__PURE__*/React.createElement(\"p\",{className:\"dist\"},transaction.bankInfo),/*#__PURE__*/React.createElement(\"p\",{className:\"amount\"},transaction.amount,\"\\u5143\")),/*#__PURE__*/React.createElement(\"div\",{className:\"status stat-\".concat(transaction.status)},/*#__PURE__*/React.createElement(\"span\",null,transaction.status))):null,type==='deposit'?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"p\",{className:\"date\"},transaction.endTime),/*#__PURE__*/React.createElement(\"p\",{className:\"dist\"},transaction.payType),/*#__PURE__*/React.createElement(\"p\",{className:\"amount\"},transaction.amount,\"\\u5143\")),/*#__PURE__*/React.createElement(\"div\",{className:\"status stat-\".concat(transaction.status)},/*#__PURE__*/React.createElement(\"span\",null,transaction.status))):null,type==='transfer'?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"p\",{className:\"date\"},transaction.requestTime),/*#__PURE__*/React.createElement(\"p\",{className:\"dist\"},transaction.platName),/*#__PURE__*/React.createElement(\"p\",{className:\"amount\"},transaction.amount,\"\\u5143\")),/*#__PURE__*/React.createElement(\"div\",{className:\"status stat-\".concat(transaction.tranStatus)},/*#__PURE__*/React.createElement(\"span\",null,transaction.tranStatus))):null,type==='washcode'?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"p\",{className:\"date\"},transaction.add_date),/*#__PURE__*/React.createElement(\"p\",{className:\"dist\"},transaction.game_id),/*#__PURE__*/React.createElement(\"p\",{className:\"amount\"},transaction.money,\"\\u5143\")),/*#__PURE__*/React.createElement(\"div\",{className:\"status stat-ratio\"},/*#__PURE__*/React.createElement(\"span\",null,transaction.ratio))):null);};return/*#__PURE__*/React.createElement(\"div\",{className:\"transactions with-loader\".concat(loading?' loading':'')},/*#__PURE__*/React.createElement(\"div\",{className:\"load-spin\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-head\"},/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-type\"},/*#__PURE__*/React.createElement(\"div\",{className:\"type-select\"},/*#__PURE__*/React.createElement(TypeButton,{current:type,type:\"deposit\",name:\"\\u5B58\\u6B3E\\u8BB0\\u5F55\"}),/*#__PURE__*/React.createElement(TypeButton,{current:type,type:\"transfer\",name:\"\\u8F6C\\u8D26\\u8BB0\\u5F55\"}),/*#__PURE__*/React.createElement(TypeButton,{current:type,type:\"washcode\",name:\"\\u53CD\\u6C34\\u8BB0\\u5F55\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-range\"},/*#__PURE__*/React.createElement(UITabs,{tabs:[{index:'today',name:'今天'},{index:'yesterday',name:'昨天'},{index:'week',name:'本周'},{index:'month',name:'本月'},{index:'custom',name:'自选'}],tab:range,onSet:setRangeHandle}))),/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-list\"},transactionsFiltered.map(function(transaction,i){return/*#__PURE__*/React.createElement(Transaction,{type:type,key:i,transaction:transaction});}))),/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-overlay\".concat(overlayShown?' shown':'')},/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-overlay--inner\"},/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-overlay--wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"custom-range-form\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u9009\\u62E9\\u65F6\\u95F4\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"date-from\"},\"\\u5F00\\u59CB\\u65E5\\u671F\"),/*#__PURE__*/React.createElement(DatePicker,{id:\"date-from\",placeholder:\"\\u5F00\\u59CB\\u65E5\\u671F\",dateFormat:\"yyyy-MM-dd\",selected:customRange.from,onChange:function onChange(date){return setCustomRange(_objectSpread(_objectSpread({},customRange),{},{from:date}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"date-to\"},\"\\u7ED3\\u675F\\u65E5\\u671F\"),/*#__PURE__*/React.createElement(DatePicker,{id:\"date-from\",placeholder:\"\\u5F00\\u59CB\\u65E5\\u671F\",dateFormat:\"yyyy-MM-dd\",selected:customRange.to,minDate:customRange.from,onChange:function onChange(date){return setCustomRange(_objectSpread(_objectSpread({},customRange),{},{to:date}));}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-buttons\"},/*#__PURE__*/React.createElement(\"button\",{className:\"cancel\",onClick:function onClick(e){return setOverlay(false);}},\"\\u53D6\\u6D88\"),/*#__PURE__*/React.createElement(\"button\",{className:\"update\",onClick:function onClick(e){return applyCustomRange();}},\"\\u786E\\u8BA4\")))))));}function DashboardDeposit(){var auth=getAuthKey();var _User$read=User.read(),account=_User$read.account;var history=useHistory();var _useLocation=useLocation(),search=_useLocation.search;var _useState45=useState(search.includes('a=1')),_useState46=_slicedToArray(_useState45,1),noback=_useState46[0];useEffect(function(){if(noback){history.replace({search:''});}},[history,noback]);useEffect(function(){console.log(noback);if(noback){window.open(\"https://u2daszapp.u2d8899.com/newpwa/deposit.php?account=\".concat(account,\"&auth=\").concat(auth,\"&type=mphone\"),'_blank');}else{history.goBack();}},[auth,account,noback,history]);return null;// return (\n// \t<div className=\"deposit\">\n// \t\t<iframe \n// \t\t\tstyle={{ height: 800, overflow: 'auto' }}\n// \t\t\ttitle={`IFRAME-N${auth}`}\n// \t\t\tsrc={`https://u2daszapp.u2d8899.com/newpwa/deposit.php?account=${account}&auth=${auth}&type=mphone`}>\n// \t\t</iframe>\n// \t</div>\n// );\n}function DashboardBettingHistory(){var _useState47=useState(1),_useState48=_slicedToArray(_useState47,2),status=_useState48[0],setStatus=_useState48[1];var _useState49=useState(null),_useState50=_slicedToArray(_useState49,2),game=_useState50[0],setGame=_useState50[1];var _useState51=useState([]),_useState52=_slicedToArray(_useState51,2),history=_useState52[0],setHistory=_useState52[1];var _useState53=useState(null),_useState54=_slicedToArray(_useState53,2),activeItem=_useState54[0],setActiveItem=_useState54[1];var Filter={bti:function bti(i){return{created_ts:i.creat_date,name:'',amount:\"\".concat(i.win,\"\\u5143\"),status:+i.win>0,raw:i,sub:[{name:'投注金额',value:i.bet},{name:'赢/输',value:i.win},{name:'状态',value:i.status},{name:'结算状态',value:i.line_type_name},{name:'投注类型',value:i.bet_type_name},{name:'细节',value:i.branch_name},{name:'创立日期',value:i.creat_date},{name:'票据编号',value:i.game_board}]};},im:function im(i){return{created_ts:i.creat_time,name:'',amount:\"\".concat(i.win,\"\\u5143\"),status:+i.win>0,raw:i,sub:[{name:'投注金额',value:i.bet},{name:'赢/输',value:i.win},{name:'主队',value:i.hometeamname},{name:'客队',value:i.awayteamname},{name:'投注类型',value:i.bettype},{name:'活动名称',value:i.eventname},{name:'更新时间',value:i.update_time},{name:'票据编号',value:i.id}]};},ag:function ag(i){return{created_ts:i.created_time,name:'',amount:\"\".concat(i.win,\"\\u5143\"),status:+i.win>0,raw:i,sub:[{name:'游戏名称',value:i.game_name},{name:'投注金额',value:i.bet},{name:'赢/输',value:i.win},{name:'票据编号',value:i.game_board},{name:'创立日期',value:i.created_time}]};}};var _setGame=function _setGame(game){if(!game.betting_key){console.warn('No betting key provided for this game:',game);return;}setStatus(0);setHistory([]);Game.getBettingHistory(_objectSpread(_objectSpread({},User.read()),{},{type:game.betting_key})).promise.then(function(r){setGame(game);console.log(r);var history=r.info.list.map(Filter[game.betting_key]);setHistory(history);setStatus(1);},function(e){console.warn('Unable to get betting history records:',e);setHistory([]);setStatus(1);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-betting-history with-loader\".concat(!status?' loading':'')},game?/*#__PURE__*/React.createElement(\"button\",{className:\"back-button\",onClick:function onClick(){setGame(null);setActiveItem(null);}},/*#__PURE__*/React.createElement(Icon,{name:\"arrow-left\"})):null,/*#__PURE__*/React.createElement(\"div\",{className:\"load-spin\"}),game?/*#__PURE__*/React.createElement(\"div\",{className:\"game-history\"},history.map(function(item,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"game-history--item\".concat(i===activeItem?' opened':''),key:i,onClick:function onClick(){return setActiveItem(activeItem!==null?null:i);}},/*#__PURE__*/React.createElement(\"div\",{className:\"game-history--item-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"p\",{className:\"content--item timestamp\"},item.created_ts),/*#__PURE__*/React.createElement(\"p\",{className:\"content--item name\"},item.name),/*#__PURE__*/React.createElement(\"p\",{className:\"content--item amount\"},item.amount)),/*#__PURE__*/React.createElement(\"div\",{className:\"status status--\".concat(item.status?'green':'red')},/*#__PURE__*/React.createElement(\"p\",null,item.status?'赢得':'失利'))),i===activeItem?/*#__PURE__*/React.createElement(\"div\",{className:\"game-history--item-subwrap\"},/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"tbody\",null,item.sub.map(function(param,i){return/*#__PURE__*/React.createElement(\"tr\",{key:i},/*#__PURE__*/React.createElement(\"td\",null,param.name),/*#__PURE__*/React.createElement(\"td\",null,param.value));})))):null);})):/*#__PURE__*/React.createElement(\"div\",{className:\"games-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--category\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u4F53\\u80B2\\u535A\\u5F69\"),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--items\"},/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item BTI\\u4F53\\u80B2\",onClick:function onClick(e){return _setGame({betting_key:'bti'});}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item IM\\u4F53\\u80B2\",onClick:function onClick(e){return _setGame({betting_key:'im'});}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item \\u6C99\\u5DF4\\u4F53\\u80B2\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--category\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u771F\\u4EBA\\u5A31\\u4E50\\u573A\"),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--items\"},/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item AG\\u771F\\u4EBA\",onClick:function onClick(e){return _setGame({betting_key:'bti'});}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item EB\\u771F\\u4EBA\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--category\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u7535\\u5B50\\u7ADE\\u6280\\u535A\\u5F69\"),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--items\"},/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item IM\\u7535\\u7ADE\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--category\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u8001\\u864E\\u673A\\u6E38\\u620F\"),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--items\"},/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item CQ\\u7535\\u5B50\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item PT\\u7535\\u5B50\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item MG\\u7535\\u5B50\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--category\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u8C61\\u68CB\\u6E38\\u620F\"),/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--items\"},/*#__PURE__*/React.createElement(\"div\",{className:\"games-list--item \\u5F00\\u5143\\u68CB\\u724C\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"})))))));}var Withdraws=function Withdraws(_ref5){var update=_ref5.update,alert=_ref5.alert;var _useState55=useState({status:0,list:[]}),_useState56=_slicedToArray(_useState55,2),withdraws=_useState56[0],setWithdraws=_useState56[1];useEffect(function(){var fetch=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var r;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Service.read(_objectSpread({record_type:'debit'},User.read())).promise;case 3:r=_context.sent;setWithdraws({status:1,list:r.info.map(function(t){return _objectSpread(_objectSpread({},t),{},{ts:toDate(t.requestTime,true)});})});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(!_context.t0.is_aborted){console.warn(_context.t0);}case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetch(){return _ref6.apply(this,arguments);};}();fetch();},[update]);var _useState57=useState('today'),_useState58=_slicedToArray(_useState57,2),range=_useState58[0],setRange=_useState58[1];var _useState59=useState(0),_useState60=_slicedToArray(_useState59,2),customI=_useState60[0],setCustomI=_useState60[1];var _useState61=useState({from:moment().subtract(30,'days').toDate(),to:moment().toDate()}),_useState62=_slicedToArray(_useState61,2),customRange=_useState62[0],setCustomRange=_useState62[1];var _useState63=useState(false),_useState64=_slicedToArray(_useState63,2),overlayShown=_useState64[0],setOverlay=_useState64[1];var __withdraws=useMemo(function(){var _rangeMap={today:function today(){var today=moment();return[today.startOf('day').unix(),today.endOf('day').unix()];},yesterday:function yesterday(){var yesterday=moment().subtract(1,'days');return[yesterday.startOf('day').unix(),yesterday.endOf('day').unix()];},week:function week(){return[moment().subtract(1,'weeks').startOf('day').unix(),moment().endOf('day').unix()];},month:function month(){return[moment().subtract(30,'days').startOf('day').unix(),moment().endOf('day').unix()];},custom:function custom(){var from=customRange.from,to=customRange.to;return[moment(from).startOf('day').unix(),moment(to).endOf('day').unix()];}};var _rangeMap$range3=_rangeMap[range](),_rangeMap$range4=_slicedToArray(_rangeMap$range3,2),from=_rangeMap$range4[0],to=_rangeMap$range4[1];return withdraws.list.filter(function(t){return t.ts>=from&&t.ts<to;});},[withdraws.list,customRange,range]);var UI={cancel:function cancel(w){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var r;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return User.withdrawCancel({id:w.id}).promise;case 3:r=_context2.sent;console.info(r);setWithdraws(function(ws){return _objectSpread(_objectSpread({},ws),{},{list:ws.list.map(function(ws){return ws.id===w.id?_objectSpread(_objectSpread({},w),{},{status:'失败'}):ws;})});});alert.showAlert('系统提示',r.info);_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.warn(_context2.t0);alert.showAlert('系统提示',_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}))();},toggle:function toggle(w){setWithdraws(function(ws){return _objectSpread(_objectSpread({},ws),{},{list:ws.list.map(function(ws){return ws.id===w.id?_objectSpread(_objectSpread({},w),{},{shown:!w.shown}):ws;})});});},applyCustomRange:function applyCustomRange(){setOverlay(false);setCustomI(customI+1);setRange('custom');}};var _withdraws=__withdraws.map(function(withdraw,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,onClick:function onClick(){return UI.toggle(withdraw);},className:cx('transaction-outer',{shown:withdraw.shown})},/*#__PURE__*/React.createElement(\"div\",{className:\"transaction\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"p\",{className:\"dist\"},withdraw.cardNumber),/*#__PURE__*/React.createElement(\"p\",{className:\"amount\"},withdraw.amount,\"\\u5143\"),/*#__PURE__*/React.createElement(\"p\",{className:\"date\"},withdraw.requestTime),withdraw.status==='未审核'?/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return UI.cancel(withdraw);}},\"\\u53D6\\u6D88\\u63D0\\u6B3E\"):null),/*#__PURE__*/React.createElement(\"div\",{className:\"status stat-\".concat(withdraw.status)},/*#__PURE__*/React.createElement(\"span\",null,withdraw.status))),/*#__PURE__*/React.createElement(\"div\",{className:\"transaction-details\"},/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u94F6\\u884C:\"),/*#__PURE__*/React.createElement(\"td\",null,withdraw.status)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u91D1\\u989D:\"),/*#__PURE__*/React.createElement(\"td\",null,withdraw.amount)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u65F6\\u95F4:\"),/*#__PURE__*/React.createElement(\"td\",null,withdraw.requestTime)),withdraw.verifyComment?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"\\u5907\\u6CE8:\"),/*#__PURE__*/React.createElement(\"td\",null,withdraw.verifyComment)):null))));});return/*#__PURE__*/React.createElement(\"div\",{className:\"withdraws transactions-sa desktop\"},/*#__PURE__*/React.createElement(\"h1\",null,\"\\u63D0\\u6B3E\\u8BB0\\u5F55\"),/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-range\"},/*#__PURE__*/React.createElement(UITabs,{tab:range,onSet:function onSet(r){return r!=='custom'?setRange(r):setOverlay(true);},tabs:[{index:'today',name:'今天'},{index:'yesterday',name:'昨天'},{index:'week',name:'本周'},{index:'month',name:'本月'},{index:'custom',name:'自选'}]})),/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-list\"},_withdraws),/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-overlay\".concat(overlayShown?' shown':'')},/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-overlay--inner\"},/*#__PURE__*/React.createElement(\"div\",{className:\"transactions-overlay--wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"custom-range-form\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u9009\\u62E9\\u65F6\\u95F4\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"date-from\"},\"\\u5F00\\u59CB\\u65E5\\u671F\"),/*#__PURE__*/React.createElement(DatePicker,{id:\"date-from\",placeholder:\"\\u5F00\\u59CB\\u65E5\\u671F\",dateFormat:\"yyyy-MM-dd\",selected:customRange.from,onChange:function onChange(date){return setCustomRange(_objectSpread(_objectSpread({},customRange),{},{from:date}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"date-to\"},\"\\u7ED3\\u675F\\u65E5\\u671F\"),/*#__PURE__*/React.createElement(DatePicker,{id:\"date-from\",placeholder:\"\\u5F00\\u59CB\\u65E5\\u671F\",dateFormat:\"yyyy-MM-dd\",selected:customRange.to,minDate:customRange.from,onChange:function onChange(date){return setCustomRange(_objectSpread(_objectSpread({},customRange),{},{to:date}));}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-buttons\"},/*#__PURE__*/React.createElement(\"button\",{className:\"cancel\",onClick:function onClick(e){return setOverlay(false);}},\"\\u53D6\\u6D88\"),/*#__PURE__*/React.createElement(\"button\",{className:\"update\",onClick:function onClick(e){return UI.applyCustomRange();}},\"\\u786E\\u8BA4\")))))));};function DashboardWithdraw(){var _useState65=useState(1),_useState66=_slicedToArray(_useState65,2),status=_useState66[0],setStatus=_useState66[1];var _useState67=useState(0),_useState68=_slicedToArray(_useState67,2),update=_useState68[0],setUpdate=_useState68[1];var _useState69=useState([]),_useState70=_slicedToArray(_useState69,2),cards=_useState70[0],setCards=_useState70[1];var _useState71=useState({}),_useState72=_slicedToArray(_useState71,2),cardsMap=_useState72[0],setCardsMap=_useState72[1];var _useState73=useState({debit_bank:'',amount:''}),_useState74=_slicedToArray(_useState73,2),form=_useState74[0],setForm=_useState74[1];var _useState75=useState({className:null,source:null,message:null}),_useState76=_slicedToArray(_useState75,2),message=_useState76[0],setMessage=_useState76[1];useEffect(function(){var req=Card.read(_objectSpread({},User.read()));setStatus(0);req.promise.then(function(r){console.log('Got cards:',r);var _cardsMap={};var _cards=r.info.map(function(c){if(!_cardsMap[c.debit_bank]){_cardsMap[c.debit_bank]=c.id;}return c.debit_bank;});setCardsMap(_cardsMap);if(!_cards.length){_cards.push('');}setForm(function(f){return _objectSpread(_objectSpread({},f),{},{debit_bank:_cards[0]||''});});setCards(_cards);setStatus(1);},function(e){console.warn('Unable to get cards:',e);setStatus(1);});return function(){return req.cancel();};},[]);var fields=[{id:'debit_bank',label:'银行卡号',placeholder:'卡账户'},{id:'amount',label:'金额',placeholder:'最低100元'}];var onChange=function onChange(e){var _e$target4=e.target,name=_e$target4.name,value=_e$target4.value;if(message.message&&message.source===name){setMessage({className:null,source:null,message:null});}setForm(function(f){return _objectSpread(_objectSpread({},f),{},_defineProperty({},name,value));});};var _useState77=useState({shown:false,title:'',message:'',onClose:function onClose(){return hideAlert();}}),_useState78=_slicedToArray(_useState77,2),alert=_useState78[0],setAlert=_useState78[1];var showAlert=function showAlert(title,message){setAlert(function(a){return _objectSpread(_objectSpread({},a),{},{shown:true,title:title,message:message});});};var hideAlert=function hideAlert(){setAlert(function(a){return _objectSpread(_objectSpread({},a),{},{shown:false});});};var withdraw=function withdraw(){var debit_bank=form.debit_bank,amount=form.amount;if(!debit_bank){return void showAlert('系统提示','必须选择一张卡');}var _amount=+amount;if(!_amount||isNaN(_amount)){return void showAlert('系统提示','取款金额不能为空');}if(_amount<100||_amount>60000){return void showAlert('系统提示','取款金额小于最低取款限额');}console.info(\"You're about to withdraw \".concat(amount,\"\\xA5\"));setStatus(0);var _form=_objectSpread({},form);_form.debit_bank=cardsMap[debit_bank]||'';User.withdraw(_objectSpread(_objectSpread({},User.read()),_form)).promise.then(function(r){console.log(\"You've successfully withdrawn:\",r);showAlert('系统提示',r.info);setUpdate(function(u){return u+1;});setStatus(1);},function(e){console.warn('Unable to withdraw:',e);showAlert('系统提示',e);setStatus(1);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-withdraw with-loader\".concat(!status?' loading':'')},/*#__PURE__*/React.createElement(\"div\",{className:\"load-spin\"}),/*#__PURE__*/React.createElement(\"h2\",null,\"\\u63D0\\u6B3E\"),/*#__PURE__*/React.createElement(\"div\",{className:\"fields\"},message.message?/*#__PURE__*/React.createElement(\"div\",{className:\"message \".concat(message.className)},message.message):null,fields.map(function(f,i){return f.id==='debit_bank'?/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"form-field\"},/*#__PURE__*/React.createElement(\"label\",null,f.label),/*#__PURE__*/React.createElement(UISelect,{value:form.debit_bank,options:cards,placeholder:f.placeholder,onSelect:function onSelect(option){setForm(function(f){return _objectSpread(_objectSpread({},f),{},{debit_bank:option});});}})):/*#__PURE__*/React.createElement(FormField,{key:i,field:{label:f.label,placeholder:f.placeholder},input:_objectSpread(_objectSpread({},f),{},{name:f.id,value:form[f.id],onChange:onChange})});})),/*#__PURE__*/React.createElement(\"div\",{className:\"submit\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button-stylized\",onClick:withdraw},\"\\u63D0\\u4EA4\")),/*#__PURE__*/React.createElement(\"div\",{className:\"withdraw-list\"},/*#__PURE__*/React.createElement(Withdraws,{update:update,alert:{showAlert:showAlert,hideAlert:hideAlert}})),/*#__PURE__*/React.createElement(UIAlertSA,alert));}function SubNav(props){var _useContext4=useContext(User.Context),userAuth=_useContext4.userAuth;return/*#__PURE__*/React.createElement(\"div\",{className:\"sub-nav\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sub-nav--user-wrap\"},/*#__PURE__*/React.createElement(\"p\",{className:\"user-name\"},userAuth.data.account),/*#__PURE__*/React.createElement(\"p\",{className:\"user-balance\"},\"\\u94B1\\u5305: \",/*#__PURE__*/React.createElement(\"span\",null,userAuth.data.balance),\" \\u5143\")),/*#__PURE__*/React.createElement(\"div\",{className:\"sub-nav--tabs\"},/*#__PURE__*/React.createElement(UITabs,{tabs:[{index:'transfer',name:'转账钱包'},{index:'personal',name:'个人资料'},{index:'password',name:'安全中心'},{index:'payment',name:'设置银行卡'},{index:'betting-history',name:'投注历史'}],tab:props.tab,onSet:props.onSet})));}function Dashboard(){var history=useHistory();var _useState79=useState(useParams().tab),_useState80=_slicedToArray(_useState79,2),tab=_useState80[0],setTab=_useState80[1];var auth=getAuthKey();var _User$read2=User.read(),account=_User$read2.account;var _useLocation2=useLocation(),search=_useLocation2.search;if(search===\"?a=1\"){window.open(\"https://u2daszapp.u2d8899.com/newpwa/deposit.php?account=\".concat(account,\"&auth=\").concat(auth,\"&type=mphone\"),'_blank');}useEffect(function(){window.scrollTo(0,0);document.body.classList.add('dashboard-page');return function(){return document.body.classList.remove('dashboard-page');};},[]);useEffect(function(){if(tab===\"deposit\"){window.open(\"https://u2daszapp.u2d8899.com/newpwa/deposit.php?account=\".concat(account,\"&auth=\").concat(auth,\"&type=mphone\"),'_blank');}history.push(\"/dashboard/\".concat(tab));},[account,auth,tab,history]);return/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard\"},/*#__PURE__*/React.createElement(\"div\",{className:\"decor-n0\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"decor-n1\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-wrap dashboard-sub-nav\"},/*#__PURE__*/React.createElement(SubNav,{tab:tab,onSet:setTab})),/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-wrap\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-inner\"},/*#__PURE__*/React.createElement(\"div\",{className:\"dashboard-tabs\"},/*#__PURE__*/React.createElement(UITabs,{tabs:[{index:'deposit',name:'存款'},{index:'transactions',name:'账目'},{index:'withdraw',name:'提款'}],tab:tab,onSet:setTab})),tab==='deposit'?/*#__PURE__*/React.createElement(DashboardDeposit,null):null,tab==='transactions'?/*#__PURE__*/React.createElement(DashboardTransactions,null):null,tab==='transfer'?/*#__PURE__*/React.createElement(DashboardTransfer,null):null,tab==='personal'?/*#__PURE__*/React.createElement(DashboardPersonal,null):null,tab==='password'?/*#__PURE__*/React.createElement(DashboardPassword,null):null,tab==='payment'?/*#__PURE__*/React.createElement(DashboardPayment,null):null,tab==='betting-history'?/*#__PURE__*/React.createElement(DashboardBettingHistory,null):null,tab==='withdraw'?/*#__PURE__*/React.createElement(DashboardWithdraw,null):null)));}export default withAuth(Dashboard,1);","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/ubet-project (1)/src/view/Dashboard.js"],"names":["React","useState","useEffect","useContext","useMemo","useParams","useLocation","useHistory","cx","moment","DatePicker","withAuth","toDate","getAuthKey","User","Game","Card","Transaction","Service","UITabs","UISelect","Icon","FormField","UIAlertSA","useQuery","URLSearchParams","search","DashboardTransfer","Context","userAuth","setUserAuthFN","status","update","list","from","to","map","balances","setBalances","wallet","games","balancesFill","setBalancesFill","amount","overlay","form","setForm","b","read","then","_balances","filter","error","game","name","balance","unshift","data","forEach","id","f","swapGames","_to","_from","split","_d1","_d2","bf","_updateBalances","session","promise","r","info","updateBalances","transferToWallet","e","console","warn","selectGame","dist","option","v","d","transfer","isNaN","_getMap","n","target","value","DashboardPersonal","_dateParse","date","js","_parsed","match","_dd","Date","getFullYear","getMonth","getDate","year","month","day","_date","user","setStatus","email","realName","birthday","number","telephone","qq","wechat","subform","setSubform","className","source","message","setMessage","fields","field","label","input","type","placeholder","notify","state","onChange","_dateFormat","_year","_month","_day","shouldUpdate","i","realname","phone","_sf","subtract","disabled","PasswordRegular","password","password_new","password_newok","updatePassword","DashboardPassword","s","DashboardPayment","banks","setUpdate","cards","setCards","req","log","is_aborted","cancel","bank_type","bank_province","bank_city","bank_addr","bank_no","submit","create","u","length","card","debit_bank","DashboardTransactions","query","history","loading","setLoading","get","setType","range","setRange","customI","setCustomI","customRange","setCustomRange","overlayShown","setOverlay","transactions","setTransactions","transactionsFiltered","setTransactionsFiltered","record_type","_transactions","t","timestamp","requestTime","endTime","add_date","_rangeMap","today","startOf","unix","endOf","yesterday","week","custom","_tab","includes","setTypeHandle","push","setRangeHandle","applyCustomRange","TypeButton","current","transaction","bankInfo","payType","platName","tranStatus","game_id","money","ratio","index","DashboardDeposit","auth","account","noback","replace","window","open","goBack","DashboardBettingHistory","setGame","setHistory","activeItem","setActiveItem","Filter","bti","created_ts","creat_date","win","raw","sub","bet","line_type_name","bet_type_name","branch_name","game_board","im","creat_time","hometeamname","awayteamname","bettype","eventname","update_time","ag","created_time","game_name","_setGame","betting_key","getBettingHistory","item","param","Withdraws","alert","withdraws","setWithdraws","fetch","ts","__withdraws","UI","w","withdrawCancel","ws","showAlert","toggle","shown","_withdraws","withdraw","cardNumber","verifyComment","DashboardWithdraw","cardsMap","setCardsMap","_cardsMap","_cards","c","title","onClose","hideAlert","setAlert","a","_amount","_form","SubNav","props","tab","onSet","Dashboard","setTab","scrollTo","document","body","classList","add","remove"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, useMemo } from 'react';\r\nimport { useParams, useLocation, useHistory } from 'react-router-dom';\r\nimport cx from 'classnames';\r\n\r\nimport * as moment from 'moment';\r\nimport DatePicker from 'react-datepicker';\r\n\r\nimport { withAuth, toDate, getAuthKey } from '../util/';\r\nimport { User, Game, Card, Transaction as Service } from '../service/';\r\nimport { UITabs, UISelect, Icon, FormField } from '../component/';\r\nimport { UIAlertSA } from '../pwa/component/';\r\n\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport '../assets/scss/Dashboard.scss';\r\n\r\nfunction useQuery () {\r\n\r\n\treturn new URLSearchParams(useLocation().search);\r\n\r\n}\r\n\r\nfunction DashboardTransfer () {\r\n\r\n\tconst { userAuth, setUserAuthFN } = useContext(User.Context);\r\n\r\n\tconst [ balances, setBalances ] = useState({\r\n\t\tstatus: 0,\r\n\t\tupdate: 0,\r\n\t\tlist: [],\r\n\t\tfrom: [],\r\n\t\tto: [],\r\n\t\tmap: {},\r\n\t});\r\n\r\n\tconst [ balancesFill, setBalancesFill ] = useState({\r\n\t\twallet: [],\r\n\t\tgames: [],\r\n\t});\r\n\r\n\tconst [ form, setForm ] = useState({\r\n\t\tfrom: null,\r\n\t\tto: null,\r\n\t\tamount: '',\r\n\t\toverlay: false,\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tsetBalances(b => ({\r\n\t\t\t...b,\r\n\t\t\tstatus: 0,\r\n\t\t\tlist: [],\r\n\t\t\tmap: {},\r\n\t\t}));\r\n\r\n\t\tGame.balances({\r\n\t\t\t...User.read(),\r\n\t\t}).then(_balances => {\r\n\r\n\t\t\tconst list = _balances.filter(b => !b.error).map(b => `${b.game.name}: ${b.balance} ¥`);\r\n\t\t\t\t\t\tlist.unshift(`中央钱包: ${userAuth.data.balance} ¥`);\r\n\r\n\t\t\tsetBalancesFill({\r\n\t\t\t\twallet: [ `中央钱包: ${userAuth.data.balance} ¥` ],\r\n\t\t\t\tgames: _balances.filter(b => !b.error).map(b => `${b.game.name}: ${b.balance} ¥`),\r\n\t\t\t});\r\n\r\n\t\t\tconst map = {};\r\n\r\n\t\t\t_balances.filter(b => !b.error).forEach(b => {\r\n\t\t\t\tmap[b.game.name] = b;\r\n\t\t\t});\r\n\r\n\t\t\tmap['中央钱包'] = {\r\n\t\t\t\tgame: {\r\n\t\t\t\t\tid: 0,\r\n\t\t\t\t\tname: 'wallet',\r\n\t\t\t\t},\r\n\t\t\t\twallet: true,\r\n\t\t\t\tbalance: userAuth.data.balance,\r\n\t\t\t};\r\n\r\n\t\t\tsetForm(f => ({\r\n\t\t\t\t...f,\r\n\t\t\t\tfrom: list[0],\r\n\t\t\t\tto: list[1],\r\n\t\t\t}));\r\n\r\n\t\t\tsetBalances(b => ({\r\n\t\t\t\t...b,\r\n\t\t\t\tstatus: 1,\r\n\t\t\t\tlist,\r\n\t\t\t\tfrom: list,\r\n\t\t\t\tto: _balances.filter(b => !b.error).map(b => `${b.game.name}: ${b.balance} ¥`),\r\n\t\t\t\tmap,\r\n\t\t\t}));\r\n\r\n\t\t});\r\n\r\n\t}, [ balances.update, userAuth.data.balance ]);\r\n\r\n\tconst swapGames = () => {\r\n\r\n\t\tconst [ _to, _from ] = [ form.from, form.to ];\r\n\r\n\t\tlet from = (_from || '').split(': ')[0];\r\n\t\tlet to = (_to || '').split(': ')[0];\r\n\r\n\t\tconst _d1 = balances.map[from].wallet ? 'games' : 'wallet';\r\n\t\tconst _d2 = balances.map[to].wallet ? 'games' : 'wallet';\r\n\r\n\t\tfrom = `${from}: ${balances.map[from].balance} ¥`;\r\n\t\tto = `${to}: ${balances.map[to].balance} ¥`;\r\n\r\n\t\tsetBalances(b => ({\r\n\t\t\t...b,\r\n\t\t\tfrom: balancesFill[_d2],\r\n\t\t\tto: balancesFill[_d1],\r\n\t\t}));\r\n\r\n\t\tsetForm(bf => ({\r\n\t\t\t...bf,\r\n\t\t\tfrom,\r\n\t\t\tto\r\n\t\t}));\r\n\r\n\t}\r\n\r\n\tconst _updateBalances = () => {\r\n\r\n\t\tsetBalances(b => ({\r\n\t\t\t...b,\r\n\t\t\tstatus: 1,\r\n\t\t}));\r\n\r\n\t\tUser.session({\r\n\t\t\t...User.read()\r\n\t\t}).promise.then(r => {\r\n\r\n\t\t\tsetUserAuthFN(1, r.info);\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tconst updateBalances = () => {\r\n\r\n\t\tsetBalances(b => ({\r\n\t\t\t...b,\r\n\t\t\tstatus: 0,\r\n\t\t}));\r\n\r\n\t\tGame.transferToWallet().promise.then(r => {\r\n\r\n\t\t\tsetForm(f => ({\r\n\t\t\t\t...f,\r\n\t\t\t\toverlay: true,\r\n\t\t\t}));\r\n\r\n\t\t\tsetBalances(b => ({ ...b, update: b.update + 1 }));\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tconsole.warn(e);\r\n\r\n\t\t\tsetBalances(b => ({\r\n\t\t\t\t...b,\r\n\t\t\t\tstatus: 1,\r\n\t\t\t}));\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tconst selectGame = (dist, option) => {\r\n\r\n\t\tif (dist === 'from') {\r\n\r\n\t\t\tconst v = (option || '').split(': ')[0];\r\n\t\t\tconst d = balances.map[v].wallet ? 'games' : 'wallet';\r\n\r\n\t\t\tsetBalances(b => ({\r\n\t\t\t\t...b,\r\n\t\t\t\tto: balancesFill[d]\r\n\t\t\t}));\r\n\r\n\t\t\tsetForm(f => ({\r\n\t\t\t\t...f,\r\n\t\t\t\tto: balancesFill[d][0]\r\n\t\t\t}));\r\n\r\n\t\t}\r\n\r\n\t\tsetForm(f => ({\r\n\t\t\t...f,\r\n\t\t\t[dist]: option,\r\n\t\t}));\r\n\r\n\t}\r\n\r\n\tconst transfer = () => {\r\n\r\n\t\tif (!form.amount || isNaN(+ form.amount)) {\r\n\t\t\treturn void console.warn('[transfer] No amount');\r\n\t\t}\r\n\r\n\t\tconst _getMap = n => balances.map[n.split(': ')[0]] || null;\r\n\r\n\t\tconst _from = _getMap(form.from);\r\n\t\tconst _to = _getMap(form.to);\r\n\r\n\t\tif (_from.game.id === _to.game.id) {\r\n\t\t\treturn void console.warn('[transfer] Same game');\r\n\t\t}\r\n\r\n\t\tif (_from.balance === 0) {\r\n\t\t\treturn void console.warn('[transfer] Zero balance');\r\n\t\t}\r\n\r\n\t\tif (_from.balance < (+ form.amount)) {\r\n\t\t\treturn void console.warn('[transfer] Not enough game balance');\r\n\t\t}\r\n\r\n\t\tconsole.info(`You're transfering ${form.amount} ¥ from ${_from.game.name} to ${_to.game.name}`);\r\n\r\n\t\tsetBalances(b => ({\r\n\t\t\t...b,\r\n\t\t\tstatus: 0,\r\n\t\t}));\r\n\r\n\t\tGame.transfer({\r\n\t\t\t...User.read(),\r\n\t\t\tamount: + form.amount,\r\n\t\t\tfrom: _from.game.id,\r\n\t\t\tto: _to.game.id,\r\n\t\t}).then(r => {\r\n\r\n\t\t\tconsole.info(`You have successfully transferred ${form.amount} ¥ from ${_from.game.name} to ${_to.game.name}: ${r.info}`);\r\n\r\n\t\t\tsetBalances(b => ({\r\n\t\t\t\t...b,\r\n\t\t\t\tstatus: 1,\r\n\t\t\t}));\r\n\r\n\t\t\tsetForm({\r\n\t\t\t\tfrom: null,\r\n\t\t\t\tto: null,\r\n\t\t\t\tamount: '',\r\n\t\t\t\toverlay: true,\r\n\t\t\t});\r\n\r\n\t\t\t// updateBalances();\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tconsole.error(e);\r\n\r\n\t\t\tsetBalances(b => ({\r\n\t\t\t\t...b,\r\n\t\t\t\tstatus: -1,\r\n\t\t\t}));\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className={`transfer with-loader${balances.status === 0 ? ' loading' : ''}`}>\r\n\t\t\t\t<div className=\"load-spin\"></div>\r\n\t\t\t\t<div className=\"transfer-content\">\r\n\t\t\t\t\t<div className=\"transfer-head\">\r\n\t\t\t\t\t\t<div className=\"transfer-title\">\r\n\t\t\t\t\t\t\t<h2>转账</h2>\r\n\t\t\t\t\t\t\t<p>场馆钱包之间不可以互转。当您开启免转钱包时，每个场馆无需转账即可畅玩。</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"transfer-refresh\">\r\n\t\t\t\t\t\t\t<button onClick={updateBalances}>\r\n\t\t\t\t\t\t\t\t<Icon name=\"refresh\" />\r\n\t\t\t\t\t\t\t\t<span>刷新 一键回收</span>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"transfer-form\">\r\n\t\t\t\t\t\t<div className=\"transfer-form--item dists\">\r\n\t\t\t\t\t\t\t<div className=\"transform-field\">\r\n\t\t\t\t\t\t\t\t<div className=\"form-field\">\r\n\t\t\t\t\t\t\t\t\t<label>推出</label>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-field--wrap\">\r\n\t\t\t\t\t\t\t\t\t\t<UISelect\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={form.from}\r\n\t\t\t\t\t\t\t\t\t\t\toptions={balances.from}\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"推出\"\r\n\t\t\t\t\t\t\t\t\t\t\tonSelect={option => selectGame('from', option)} />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"transform-switch\">\r\n\t\t\t\t\t\t\t\t<button onClick={swapGames}>\r\n\t\t\t\t\t\t\t\t\t<Icon name=\"switch\" />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"transform-field\">\r\n\t\t\t\t\t\t\t\t<div className=\"form-field\">\r\n\t\t\t\t\t\t\t\t\t<label>进入</label>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-field--wrap\">\r\n\t\t\t\t\t\t\t\t\t\t<UISelect\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={form.to}\r\n\t\t\t\t\t\t\t\t\t\t\toptions={balances.to}\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"进入\"\r\n\t\t\t\t\t\t\t\t\t\t\tonSelect={option => selectGame('to', option)} />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"transfer-form--item\">\r\n\t\t\t\t\t\t\t<div className=\"form-field\">\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"amount\">金额</label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tid=\"amount\"\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"金额\"\r\n\t\t\t\t\t\t\t\t\tvalue={form.amount}\r\n\t\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\t\tconst amount = e.target.value;\r\n\t\t\t\t\t\t\t\t\t\tsetForm(f => ({ ...f, amount }));\r\n\t\t\t\t\t\t\t\t\t}} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"transfer-form--item\">\r\n\t\t\t\t\t\t\t<button className=\"button-stylized\" onClick={transfer}>确定</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"transfer-body\">\r\n\t\t\t\t\t\t<div className=\"games-list--category\">\r\n\t\t\t\t\t\t\t<h3>体育博彩</h3>\r\n\t\t\t\t\t\t\t<div className=\"games-list--items\">\r\n\t\t\t\t\t\t\t\t<div className=\"games-list--item BTI体育\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"balance\">余额: <span>{balances.map['BTI体育']?.balance || 0}</span> 元</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"games-list--item IM体育\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"balance\">余额: <span>{balances.map['IM体育']?.balance || 0}</span> 元</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"games-list--item 沙巴体育\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"balance\">余额: <span>{balances.map['沙巴体育']?.balance || 0}</span> 元</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"games-list--category\">\r\n\t\t\t\t\t\t\t<h3>真人娱乐场</h3>\r\n\t\t\t\t\t\t\t<div className=\"games-list--items\">\r\n\t\t\t\t\t\t\t\t<div className=\"games-list--item AG真人\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"balance\">余额: <span>{balances.map['AG真人']?.balance || 0}</span> 元</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"games-list--item EB真人\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"balance\">余额: <span>{balances.map['EB真人']?.balance || 0}</span> 元</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"games-list--category\">\r\n\t\t\t\t\t\t\t<h3>电子竞技博彩</h3>\r\n\t\t\t\t\t\t\t<div className=\"games-list--items\">\r\n\t\t\t\t\t\t\t\t<div className=\"games-list--item IM电竞\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"balance\">余额: <span>{balances.map['IM电竞']?.balance || 0}</span> 元</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"games-list--category\">\r\n\t\t\t\t\t\t\t<h3>老虎机游戏</h3>\r\n\t\t\t\t\t\t\t<div className=\"games-list--items\">\r\n\t\t\t\t\t\t\t\t<div className=\"games-list--item CQ电子\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"balance\">余额: <span>{balances.map['CQ电子']?.balance || 0}</span> 元</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"games-list--item PT电子\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"balance\">余额: <span>{balances.map['PT电子']?.balance || 0}</span> 元</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"games-list--item MG电子\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"balance\">余额: <span>{balances.map['MG电子']?.balance || 0}</span> 元</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"games-list--category\">\r\n\t\t\t\t\t\t\t<h3>象棋游戏</h3>\r\n\t\t\t\t\t\t\t<div className=\"games-list--items\">\r\n\t\t\t\t\t\t\t\t<div className=\"games-list--item 开元棋牌\">\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"balance\">余额: <span>{balances.map['开元棋牌']?.balance || 0}</span> 元</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className={`transfer-overlay${form.overlay ? ' shown' : ''}`}>\r\n\t\t\t\t<div className=\"transfer-overlay--sublayer\">\r\n\t\t\t\t\t<div className=\"transfer-overlay--layer\">\r\n\t\t\t\t\t\t<div className=\"layer-head\">\r\n\t\t\t\t\t\t\t<h2>提示</h2>\r\n\t\t\t\t\t\t\t<button className=\"close\" onClick={e => {\r\n\r\n\t\t\t\t\t\t\t\tsetForm(f => ({ ...f, overlay: false }));\r\n\r\n\t\t\t\t\t\t\t\t_updateBalances();\r\n\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<Icon name=\"close-circle-sharp\" />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"layer-body\">\r\n\t\t\t\t\t\t\t<p>转移成功!</p>\r\n\t\t\t\t\t\t\t<div className=\"layer-button\">\r\n\t\t\t\t\t\t\t\t<button className=\"button-stylized\" onClick={e => {\r\n\r\n\t\t\t\t\t\t\t\t\tsetForm(f => ({ ...f, overlay: false }));\r\n\r\n\t\t\t\t\t\t\t\t\t_updateBalances();\r\n\r\n\t\t\t\t\t\t\t\t}}>OK</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n\r\n}\r\n\r\nfunction DashboardPersonal () {\r\n\r\n\tconst _dateParse = (date, js) => {\r\n\r\n\t\tconst _parsed = (date || '').match(/([\\d]{4})年([\\d]{1,2})月([\\d]{1,2})日/);\r\n\r\n\t\tif (!_parsed) {\r\n\r\n\t\t\tif (js) {\r\n\t\t\t\tconst _dd = new Date();\r\n\t\t\t\treturn new Date(_dd.getFullYear() - 18, _dd.getMonth(), _dd.getDate());\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tyear: null,\r\n\t\t\t\tmonth: null,\r\n\t\t\t\tday: null,\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tconst _date = {\r\n\t\t\tyear: + _parsed[1],\r\n\t\t\tmonth: + _parsed[2],\r\n\t\t\tday: + _parsed[3],\r\n\t\t};\r\n\r\n\t\tif (js) {\r\n\t\t\treturn new Date(_date.year, _date.month - 1, _date.day);\r\n\t\t}\r\n\r\n\t\treturn _date;\r\n\r\n\t}\r\n\r\n\tconst { userAuth: { data: user }, setUserAuthFN } = useContext(User.Context);\r\n\r\n\tconst [ status, setStatus ] = useState(1);\r\n\r\n\tconst [ form, setForm ] = useState({\r\n\t\temail: user.email || '',\r\n\t\tname: user.realName || '',\r\n\t\tbirthday: _dateParse(user.birthday, true),\r\n\t\tnumber: user.telephone || '',\r\n\t\tqq: user.qq || '',\r\n\t\twechat: user.wechat || '',\r\n\t});\r\n\r\n\tconst [ subform, setSubform ] = useState({\r\n\t\temail: !!user.email,\r\n\t\tname: !!user.realName,\r\n\t\tbirthday: !!user.birthday,\r\n\t\tnumber: !!user.telephone,\r\n\t\tqq: !!user.qq,\r\n\t});\r\n\r\n\tconst [ message, setMessage ] = useState({\r\n\t\tclassName: null,\r\n\t\tsource: null,\r\n\t\tmessage: null,\r\n\t});\r\n\r\n\tconst fields = [\r\n\t\t{\r\n\t\t\tfield: {\r\n\t\t\t\tlabel: '邮箱',\r\n\t\t\t},\r\n\t\t\tinput: {\r\n\t\t\t\tid: 'email',\r\n\t\t\t\tname: 'email',\r\n\t\t\t\ttype: 'email',\r\n\t\t\t\tplaceholder: '邮箱',\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tfield: {\r\n\t\t\t\tlabel: '真实姓名',\r\n\t\t\t},\r\n\t\t\tinput: {\r\n\t\t\t\tid: 'name',\r\n\t\t\t\tname: 'name',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tplaceholder: '真实姓名',\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tfield: {\r\n\t\t\t\tlabel: '出生年月',\r\n\t\t\t},\r\n\t\t\tinput: {\r\n\t\t\t\tid: 'birthday',\r\n\t\t\t\tname: 'birthday',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tplaceholder: '出生年月',\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tfield: {\r\n\t\t\t\tlabel: '手机号',\r\n\t\t\t},\r\n\t\t\tinput: {\r\n\t\t\t\tid: 'number',\r\n\t\t\t\tname: 'number',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tplaceholder: '手机号',\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tfield: {\r\n\t\t\t\tlabel: 'QQ',\r\n\t\t\t},\r\n\t\t\tinput: {\r\n\t\t\t\tid: 'qq',\r\n\t\t\t\tname: 'qq',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tplaceholder: 'QQ',\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n\r\n\tconst notify = (state, source, message) => {\r\n\r\n\t\tsetMessage({\r\n\t\t\tclassName: state ? 'valid' : 'invalid',\r\n\t\t\tsource,\r\n\t\t\tmessage,\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tconst onChange = e => {\r\n\r\n\t\tconst { name, value } = e.target;\r\n\r\n\t\tsetForm(f => ({\r\n\t\t\t...f,\r\n\t\t\t[name]: value,\r\n\t\t}));\r\n\r\n\r\n\t}\r\n\r\n\tconst update = () => {\r\n\r\n\t\tconst _dateFormat = (date) => {\r\n\t\t\tconst _year = date.getFullYear();\r\n\t\t\tconst _month = date.getMonth() + 1;\r\n\t\t\tconst _day = date.getDate();\r\n\t\t\treturn `${_year}年${_month}月${_day}日`;\r\n\t\t}\r\n\r\n\t\tsetStatus(0);\r\n\r\n\t\tlet shouldUpdate = false;\r\n\t\tfor (const i in subform) {\r\n\t\t\tif (!subform[i]) {\r\n\t\t\t\tshouldUpdate = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!shouldUpdate) {\r\n\t\t\tsetStatus(1);\r\n\t\t\treturn void notify(false, '', '联系CS更改个人信息');\r\n\t\t}\r\n\r\n\t\tconsole.info('You\\'re updating profile information:', form);\r\n\r\n\t\tUser.update({\r\n\t\t\t...User.read(),\r\n\t\t\t...form,\r\n\t\t\tbirthday: _dateFormat(form.birthday),\r\n\t\t\trealname: form.name,\r\n\t\t\tphone: form.number,\r\n\t\t}).promise.then(r => {\r\n\r\n\t\t\tconsole.info('✅ You have successfully updated profile information:', r.info);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t\tnotify(true, 'password', r.info);\r\n\r\n\t\t\tconst _sf = {};\r\n\r\n\t\t\tfor (const i in fields) {\r\n\t\t\t\tconst f = fields[i];\r\n\t\t\t\t_sf[f.input.name] = !!form[f.input.name];\r\n\t\t\t}\r\n\r\n\t\t\tsetSubform(_sf);\r\n\r\n\t\t\tUser.session({\r\n\t\t\t\t...User.read()\r\n\t\t\t}).promise.then(r => setUserAuthFN(1, r.info));\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tconsole.warn('Unable to update profile information:', e);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={`dashboard-personal with-loader${!status ? ' loading' : ''}`}>\r\n\t\t\t<div className=\"load-spin\"></div>\r\n\t\t\t<h2>个人资料</h2>\r\n\t\t\t{message.message ? (<div className={`message ${message.className}`}>{message.message}</div>) : null}\r\n\t\t\t<div className=\"fields\">\r\n\t\t\t\t{fields.map((f, i) => (\r\n\t\t\t\t\t<React.Fragment key={i}>\r\n\t\t\t\t\t\t{f.input.id === 'birthday' ? (\r\n\t\t\t\t\t\t<div className=\"form-field\">\r\n\t\t\t\t\t\t\t<label htmlFor={f.input.id}>{f.field.label}</label>\r\n\t\t\t\t\t\t\t<div className=\"form-field--input-wrap with-arrow\">\r\n\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\tid={f.input.id}\r\n\t\t\t\t\t\t\t\t\tclassName=\"input-like\"\r\n\t\t\t\t\t\t\t\t\tplaceholder={f.input.placeholder}\r\n\t\t\t\t\t\t\t\t\tdateFormat=\"yyyy年M月d日\"\r\n\t\t\t\t\t\t\t\t\tmaxDate={moment().subtract(18, 'years').toDate()}\r\n\t\t\t\t\t\t\t\t\tselected={form[f.input.name]}\r\n\t\t\t\t\t\t\t\t\tdisabled={subform[f.input.name]}\r\n\t\t\t\t\t\t\t\t\tonChange={d => setForm(f => ({ ...f, birthday: d, }))} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<FormField\r\n\t\t\t\t\t\t\tfield={f.field}\r\n\t\t\t\t\t\t\tinput={{\r\n\t\t\t\t\t\t\t\t...f.input,\r\n\t\t\t\t\t\t\t\tonChange,\r\n\t\t\t\t\t\t\t\tvalue: form[f.input.name],\r\n\t\t\t\t\t\t\t\tdisabled: subform[f.input.name],\r\n\t\t\t\t\t\t\t}} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"submit\">\r\n\t\t\t\t<button className=\"button-stylized\" onClick={update}>保存</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nconst PasswordRegular = ({ setStatus }) => {\r\n\r\n\tconst [ form, setForm ] = useState({\r\n\t\tpassword: '',\r\n\t\tpassword_new: '',\r\n\t\tpassword_newok: '',\r\n\t});\r\n\r\n\tconst [ message, setMessage ] = useState({\r\n\t\tclassName: null,\r\n\t\tsource: null,\r\n\t\tmessage: null,\r\n\t});\r\n\r\n\tconst fields = [\r\n\t\t{\r\n\t\t\tfield: {\r\n\t\t\t\tlabel: '原密码',\r\n\t\t\t},\r\n\t\t\tinput: {\r\n\t\t\t\tid: 'password',\r\n\t\t\t\tname: 'password',\r\n\t\t\t\ttype: 'password',\r\n\t\t\t\tplaceholder: '原密码',\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tfield: {\r\n\t\t\t\tlabel: '新密码',\r\n\t\t\t},\r\n\t\t\tinput: {\r\n\t\t\t\tid: 'password_new',\r\n\t\t\t\tname: 'password_new',\r\n\t\t\t\ttype: 'password',\r\n\t\t\t\tplaceholder: '新密码',\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tfield: {\r\n\t\t\t\tlabel: '验证新密码',\r\n\t\t\t},\r\n\t\t\tinput: {\r\n\t\t\t\tid: 'password_newok',\r\n\t\t\t\tname: 'password_newok',\r\n\t\t\t\ttype: 'password',\r\n\t\t\t\tplaceholder: '验证新密码',\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n\r\n\tconst notify = (state, source, message) => {\r\n\r\n\t\tsetMessage({\r\n\t\t\tclassName: state ? 'valid' : 'invalid',\r\n\t\t\tsource,\r\n\t\t\tmessage,\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tconst onChange = e => {\r\n\r\n\t\tconst { name, value } = e.target;\r\n\r\n\t\tif (message.message && message.source === name) {\r\n\t\t\tsetMessage({\r\n\t\t\t\tclassName: null,\r\n\t\t\t\tsource: null,\r\n\t\t\t\tmessage: null,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsetForm(f => ({\r\n\t\t\t...f,\r\n\t\t\t[name]: value,\r\n\t\t}));\r\n\r\n\t}\r\n\r\n\tconst update = () => {\r\n\r\n\t\tif (!form.password) {\r\n\t\t\treturn void notify(false, 'password', '未输入当前密码!');\r\n\t\t}\r\n\r\n\t\tif (!form.password_new) {\r\n\t\t\treturn void notify(false, 'password_new', '未输入新密码!');\r\n\t\t}\r\n\r\n\t\tif (form.password_new !== form.password_newok) {\r\n\t\t\treturn void notify(false, 'password_new', '输入的密码不匹配!');\r\n\t\t}\r\n\r\n\t\tsetStatus(0);\r\n\r\n\t\tconsole.info('You\\'re updating account password:', form);\r\n\r\n\t\tUser.updatePassword({\r\n\t\t\t...User.read(),\r\n\t\t\t...form,\r\n\t\t}).promise.then(r => {\r\n\r\n\t\t\tconsole.info('✅ You have successfully updated account password:', r.info);\r\n\r\n\t\t\tnotify(true, 'password', r.info);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tconsole.warn('Unable to update account password:', e);\r\n\r\n\t\t\tnotify(false, 'password', e);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"password-section regular\">\r\n\t\t\t<h2>修改登录密码</h2>\r\n\t\t\t<div className=\"fields\">\r\n\t\t\t\t{message.message ? (<div className={`message ${message.className}`}>{message.message}</div>) : null}\r\n\t\t\t\t{fields.map((f, i) => (\r\n\t\t\t\t\t<FormField\r\n\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\tfield={f.field}\r\n\t\t\t\t\t\tinput={{\r\n\t\t\t\t\t\t\t...f.input,\r\n\t\t\t\t\t\t\tonChange,\r\n\t\t\t\t\t\t}} />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"submit\">\r\n\t\t\t\t<button className=\"button-stylized\" onClick={update}>保存</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nfunction DashboardPassword () {\r\n\r\n\tconst [ status, setStatus ] = useState(1);\r\n\r\n\treturn (\r\n\t\t<div className={`dashboard-password with-loader${!status ? ' loading' : ''}`}>\r\n\t\t\t<div className=\"load-spin\"></div>\r\n\t\t\t<PasswordRegular setStatus={s => setStatus(s)} />\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nfunction DashboardPayment () {\r\n\r\n\tconst { userAuth } = useContext(User.Context);\r\n\r\n\tconst banks = [\r\n\t\t// '中国百银行',\r\n\t\t// '建设银行',\r\n\t\t// '度工商银行',\r\n\t\t// '中信银行',\r\n\t\t// '招商银行',\r\n\t\t// '广东发展银行',\r\n\t\t// '民生银行',\r\n\t\t// '农业银行',\r\n\t\t// '兴业银行',\r\n\t\t// '上海浦东发展银行',\r\n\t\t// '华夏知银行',\r\n\t\t// '交通银行',\r\n\t\t// '光大银道行',\r\n\t\t// '深圳发展银行',\r\n\t\t// '恒丰银行',\r\n\t\t// '渤海银行',\r\n\t\t'中国银行',\r\n\t\t'中国建设银行',\r\n\t\t'中国农业银行',\r\n\t\t'中国工商银行',\r\n\t\t'中国邮政储蓄银行',\r\n\t\t'招商银行',\r\n\t\t'交通银行',\r\n\t\t'中信银行',\r\n\t\t'平安银行',\r\n\t\t'中国光大银行',\r\n\t\t'上海浦东发展银行',\r\n\t\t'广发银行',\r\n\t\t'华夏银行',\r\n\t\t'兴业银行',\r\n\t\t'民生银行',\r\n\t];\r\n\r\n\tconst [ status, setStatus ] = useState(1);\r\n\r\n\tconst [ update, setUpdate ] = useState(0);\r\n\r\n\tconst [ cards, setCards ] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconst req = Card.read({\r\n\t\t\t...User.read()\r\n\t\t});\r\n\r\n\t\tsetStatus(0);\r\n\r\n\t\treq.promise.then(r => {\r\n\r\n\t\t\tconsole.log('Got cards:', r);\r\n\r\n\t\t\tsetCards(r.info);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tif (!e.is_aborted) {\r\n\r\n\t\t\t\tconsole.warn('Unable to get cards:', e);\r\n\r\n\t\t\t\tsetStatus(1);\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn () => req.cancel();\r\n\r\n\t}, [ update ]);\r\n\r\n\tconst [ form, setForm ] = useState({\r\n\t\tbank_type: '中国银行',\r\n\t\tbank_province: '',\r\n\t\tbank_city: '',\r\n\t\trealname: userAuth.data.realName || '',\r\n\t\tbank_addr: '',\r\n\t\tbank_no: '',\r\n\t});\r\n\r\n\tconst fields = [\r\n\t\t{ id: 'bank_type', label: '开户银行', placeholder: '开户银行' },\r\n\t\t{ id: 'bank_province', label: '开户地区', placeholder: '开户地区' },\r\n\t\t{ id: 'bank_city', label: '开户支行', placeholder: '开户支行' },\r\n\t\t{ id: 'bank_addr', label: '开户支行', placeholder: '开户支行' },\r\n\t\t{ id: 'realname', label: '开户人姓名', placeholder: '开户人姓名' },\r\n\t\t{ id: 'bank_no', label: '银行卡号' },\r\n\t];\r\n\r\n\tconst onChange = e => {\r\n\r\n\t\tconst { name, value } = e.target;\r\n\r\n\t\tsetForm(f => ({\r\n\t\t\t...f,\r\n\t\t\t[name]: value,\r\n\t\t}));\r\n\r\n\t}\r\n\r\n\tconst submit = () => {\r\n\r\n\t\tsetStatus(0);\r\n\r\n\t\tCard.create({\r\n\t\t\t...User.read(),\r\n\t\t\t...form,\r\n\t\t}).promise.then(r => {\r\n\r\n\t\t\tconsole.info('Successfully bound the card:', r);\r\n\r\n\t\t\tsetUpdate(u => u + 1);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tconsole.info('Unable to bind the card:', e);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={`dashboard-payment with-loader${!status ? ' loading' : ''}`}>\r\n\t\t\t<div className=\"load-spin\"></div>\r\n\t\t\t{cards.length ? (\r\n\t\t\t<div className=\"cards-list\">\r\n\t\t\t\t<h2>设置银行卡</h2>\r\n\t\t\t\t<div className=\"cards-list--wrap\">\r\n\t\t\t\t\t{cards.map((card, i) => (\r\n\t\t\t\t\t<div key={i} className=\"card\">\r\n\t\t\t\t\t\t<div className=\"card-content\">\r\n\t\t\t\t\t\t\t<h4>{card.debit_bank}</h4>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t) : null}\r\n\t\t\t<div className=\"cards-form\">\r\n\t\t\t\t<h2>添加银行卡</h2>\r\n\t\t\t\t<div className=\"cards-form--wrap\">\r\n\t\t\t\t\t<div className=\"fields\">\r\n\t\t\t\t\t{fields.map((f, i) =>\r\n\t\t\t\t\t\tf.id === 'bank_type' ? (\r\n\t\t\t\t\t\t\t<div key={i} className=\"form-field\">\r\n\t\t\t\t\t\t\t\t<label>{f.label}</label>\r\n\t\t\t\t\t\t\t\t<UISelect\r\n\t\t\t\t\t\t\t\t\tvalue={form.bank_type}\r\n\t\t\t\t\t\t\t\t\toptions={banks}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"幵户银行\"\r\n\t\t\t\t\t\t\t\t\tonSelect={option => {\r\n\t\t\t\t\t\t\t\t\t\tsetForm(f => ({\r\n\t\t\t\t\t\t\t\t\t\t\t...f,\r\n\t\t\t\t\t\t\t\t\t\t\tbank_type: option,\r\n\t\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t\t}} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<FormField\r\n\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\tfield={{\r\n\t\t\t\t\t\t\t\t\tlabel: f.label,\r\n\t\t\t\t\t\t\t\t\tplaceholder: f.placeholder,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tinput={{\r\n\t\t\t\t\t\t\t\t\t...f,\r\n\t\t\t\t\t\t\t\t\tname: f.id,\r\n\t\t\t\t\t\t\t\t\tvalue: form[f.id], onChange,\r\n\t\t\t\t\t\t\t\t}} />\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"submit\">\r\n\t\t\t\t\t\t<button className=\"button-stylized\" onClick={submit}>保存</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nfunction DashboardTransactions () {\r\n\r\n\tconst query = useQuery();\r\n\tconst history = useHistory();\r\n\r\n\tconst [ loading, setLoading ] = useState(false);\r\n\r\n\tconst [ type, setType ] = useState(query.get('tab') || 'debit');\r\n\tconst [ range, setRange ] = useState('today');\r\n\r\n\tconst [ customI, setCustomI ] = useState(0);\r\n\tconst [ customRange, setCustomRange ] = useState({\r\n\t\tfrom: moment().subtract(30, 'days').toDate(),\r\n\t\tto: moment().toDate()\r\n\t});\r\n\r\n\tconst [ overlayShown, setOverlay ] = useState(false);\r\n\r\n\tconst [ transactions, setTransactions ] = useState([]);\r\n\tconst [ transactionsFiltered, setTransactionsFiltered ] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconst user = User.read();\r\n\r\n\t\tvar req = Service.read({\r\n\t\t\trecord_type: type,\r\n\t\t\t...user,\r\n\t\t});\r\n\r\n\t\tsetLoading(true);\r\n\r\n\t\tsetTransactions([]);\r\n\r\n\t\treq.promise.then(r => {\r\n\r\n\t\t\tconst _transactions = r.info.map(t => {\r\n\r\n\t\t\t\tt.timestamp = toDate(t.requestTime, true);\r\n\r\n\t\t\t\tif (t.endTime) {\r\n\t\t\t\t\tt.timestamp = toDate(t.endTime, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (t.add_date) {\r\n\t\t\t\t\tt.timestamp = toDate(t.add_date, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn t;\r\n\r\n\t\t\t});\r\n\r\n\t\t\tsetTransactions(_transactions);\r\n\r\n\t\t\tsetLoading(false);\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tif (!e.is_aborted) {\r\n\r\n\t\t\t\tconsole.error('Unable to get transactions:', e);\r\n\r\n\t\t\t\tsetLoading(false);\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn () => req.cancel();\r\n\r\n\t}, [ history, type ]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconst _rangeMap = {\r\n\t\t\ttoday: () => {\r\n\t\t\t\tconst today = moment();\r\n\t\t\t\treturn [\r\n\t\t\t\t\ttoday.startOf('day').unix(),\r\n\t\t\t\t\ttoday.endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tyesterday: () => {\r\n\t\t\t\tconst yesterday = moment().subtract(1, 'days');\r\n\t\t\t\treturn [\r\n\t\t\t\t\tyesterday.startOf('day').unix(),\r\n\t\t\t\t\tyesterday.endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tweek: () => {\r\n\t\t\t\treturn [\r\n\t\t\t\t\tmoment().subtract(1, 'weeks').startOf('day').unix(),\r\n\t\t\t\t\tmoment().endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tmonth: () => {\r\n\t\t\t\treturn [\r\n\t\t\t\t\tmoment().subtract(30, 'days').startOf('day').unix(),\r\n\t\t\t\t\tmoment().endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tcustom: () => {\r\n\t\t\t\tlet { from, to } = customRange;\r\n\t\t\t\treturn [\r\n\t\t\t\t\tmoment(from).startOf('day').unix(),\r\n\t\t\t\t\tmoment(to).endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst [ from, to ] = _rangeMap[range]();\r\n\r\n\t\tconst _transactions = transactions.filter(t => {\r\n\t\t\treturn t.timestamp >= from && t.timestamp < to;\r\n\t\t});\r\n\r\n\t\tsetTransactionsFiltered(_transactions);\r\n\r\n\t// eslint-disable-next-line\r\n\t}, [ range, customI, transactions ]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tlet _tab = query.get('tab');\r\n\r\n\t\tif (![ 'debit', 'deposit', 'transfer', 'washcode' ].includes(_tab)) {\r\n\t\t\t_tab = 'debit';\r\n\t\t}\r\n\r\n\t\tsetType(_tab);\r\n\r\n\t}, [ query, setType ]);\r\n\r\n\tconst setTypeHandle = type => {\r\n\r\n\t\thistory.push({ search: `?tab=${type}` });\r\n\r\n\t}\r\n\r\n\tconst setRangeHandle = range => {\r\n\r\n\t\tif (range === 'custom') {\r\n\t\t\treturn void setOverlay(true);\r\n\t\t}\r\n\r\n\t\tsetRange(range);\r\n\r\n\t}\r\n\r\n\tconst applyCustomRange = () => {\r\n\r\n\t\tsetOverlay(false);\r\n\r\n\t\tsetCustomI(customI + 1);\r\n\r\n\t\tsetRange('custom');\r\n\r\n\t}\r\n\r\n\tconst TypeButton = ({ type, current, name }) => (\r\n\t\t<button\r\n\t\t\tonClick={e => setTypeHandle(type)}\r\n\t\t\tclassName={`type-select--item${current === type ? ' active' : ''}`}>\r\n\t\t\t{name}\r\n\t\t</button>\r\n\t)\r\n\r\n\tconst Transaction = ({ type, transaction }) => (\r\n\t\t<div className=\"transaction\">\r\n\t\t\t{type === 'debit' ? (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<p className=\"date\">{transaction.requestTime}</p>\r\n\t\t\t\t\t<p className=\"dist\">{transaction.bankInfo}</p>\r\n\t\t\t\t\t<p className=\"amount\">{transaction.amount}元</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`status stat-${transaction.status}`}>\r\n\t\t\t\t\t<span>{transaction.status}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t\t) : null}\r\n\t\t\t{type === 'deposit' ? (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<p className=\"date\">{transaction.endTime}</p>\r\n\t\t\t\t\t<p className=\"dist\">{transaction.payType}</p>\r\n\t\t\t\t\t<p className=\"amount\">{transaction.amount}元</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`status stat-${transaction.status}`}>\r\n\t\t\t\t\t<span>{transaction.status}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t\t) : null}\r\n\t\t\t{type === 'transfer' ? (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<p className=\"date\">{transaction.requestTime}</p>\r\n\t\t\t\t\t<p className=\"dist\">{transaction.platName}</p>\r\n\t\t\t\t\t<p className=\"amount\">{transaction.amount}元</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`status stat-${transaction.tranStatus}`}>\r\n\t\t\t\t\t<span>{transaction.tranStatus}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t\t) : null}\r\n\t\t\t{type === 'washcode' ? (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<p className=\"date\">{transaction.add_date}</p>\r\n\t\t\t\t\t<p className=\"dist\">{transaction.game_id}</p>\r\n\t\t\t\t\t<p className=\"amount\">{transaction.money}元</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`status stat-ratio`}>\r\n\t\t\t\t\t<span>{transaction.ratio}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div className={`transactions with-loader${loading ? ' loading' : ''}`}>\r\n\t\t\t<div className=\"load-spin\"></div>\r\n\t\t\t<div className=\"transactions-wrap\">\r\n\t\t\t\t<div className=\"transactions-head\">\r\n\t\t\t\t\t<div className=\"transactions-type\">\r\n\t\t\t\t\t\t<div className=\"type-select\">\r\n\t\t\t\t\t\t\t<TypeButton current={type} type=\"deposit\" name=\"存款记录\" />\r\n\t\t\t\t\t\t\t{/*<TypeButton current={type} type=\"debit\" name=\"提款记录\" />*/}\r\n\t\t\t\t\t\t\t<TypeButton current={type} type=\"transfer\" name=\"转账记录\" />\r\n\t\t\t\t\t\t\t<TypeButton current={type} type=\"washcode\" name=\"反水记录\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"transactions-range\">\r\n\t\t\t\t\t\t<UITabs tabs={[\r\n\t\t\t\t\t\t\t{ index: 'today', name: '今天' },\r\n\t\t\t\t\t\t\t{ index: 'yesterday', name: '昨天' },\r\n\t\t\t\t\t\t\t{ index: 'week', name: '本周' },\r\n\t\t\t\t\t\t\t{ index: 'month', name: '本月' },\r\n\t\t\t\t\t\t\t{ index: 'custom', name: '自选' },\r\n\t\t\t\t\t\t]} tab={range} onSet={setRangeHandle} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"transactions-list\">\r\n\t\t\t\t{transactionsFiltered.map((transaction, i) => \r\n\t\t\t\t\t<Transaction type={type} key={i} transaction={transaction} />\r\n\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{/* <div className={`transactions-overlay${overlayShown ? ' shown' : ''}`} onClick={e => setOverlay(false)}> */}\r\n\t\t\t<div className={`transactions-overlay${overlayShown ? ' shown' : ''}`}>\r\n\t\t\t\t<div className=\"transactions-overlay--inner\">\r\n\t\t\t\t\t<div className=\"transactions-overlay--wrap\">\r\n\t\t\t\t\t\t<div className=\"custom-range-form\">\r\n\t\t\t\t\t\t\t<h2>选择时间</h2>\r\n\t\t\t\t\t\t\t<div className=\"form-wrap\">\r\n\t\t\t\t\t\t\t\t<div className=\"field\">\r\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"date-from\">开始日期</label>\r\n\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\tid=\"date-from\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"开始日期\"\r\n\t\t\t\t\t\t\t\t\t\tdateFormat=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\t\t\t\tselected={customRange.from}\r\n\t\t\t\t\t\t\t\t\t\tonChange={date => setCustomRange({ ...customRange, from: date, })} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"field\">\r\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"date-to\">结束日期</label>\r\n\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\tid=\"date-from\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"开始日期\"\r\n\t\t\t\t\t\t\t\t\t\tdateFormat=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\t\t\t\tselected={customRange.to}\r\n\t\t\t\t\t\t\t\t\t\tminDate={customRange.from}\r\n\t\t\t\t\t\t\t\t\t\tonChange={date => setCustomRange({ ...customRange, to: date, })} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-buttons\">\r\n\t\t\t\t\t\t\t\t<button className=\"cancel\" onClick={e => setOverlay(false)}>取消</button>\r\n\t\t\t\t\t\t\t\t<button className=\"update\" onClick={e => applyCustomRange()}>确认</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nfunction DashboardDeposit () {\r\n\r\n\tconst auth = getAuthKey();\r\n\tconst { account } = User.read();\r\n\r\n\tconst history = useHistory();\r\n\tconst { search } = useLocation();\r\n\tconst [ noback ] = useState(search.includes('a=1'));\r\n\t\r\n\tuseEffect(() => {\r\n\r\n\t\tif (noback) {\r\n\t\t\thistory.replace({ search: '' });\r\n\t\t}\r\n\r\n\t}, [ history, noback ]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconsole.log(noback);\r\n\r\n\t\tif (noback) {\r\n\t\t\twindow.open(`https://u2daszapp.u2d8899.com/newpwa/deposit.php?account=${account}&auth=${auth}&type=mphone`,'_blank')\r\n\t\t} else {\r\n\t\t\thistory.goBack();\r\n\t\t}\r\n\r\n\t}, [ auth, account, noback, history ]);\r\n\r\n\treturn null;\r\n\r\n\t// return (\r\n\t// \t<div className=\"deposit\">\r\n\t// \t\t<iframe \r\n\t// \t\t\tstyle={{ height: 800, overflow: 'auto' }}\r\n\t// \t\t\ttitle={`IFRAME-N${auth}`}\r\n\t// \t\t\tsrc={`https://u2daszapp.u2d8899.com/newpwa/deposit.php?account=${account}&auth=${auth}&type=mphone`}>\r\n\t// \t\t</iframe>\r\n\t// \t</div>\r\n\t// );\r\n\r\n}\r\n\r\nfunction DashboardBettingHistory () {\r\n\r\n\tconst [ status, setStatus ] = useState(1);\r\n\r\n\tconst [ game, setGame ] = useState(null);\r\n\tconst [ history, setHistory ] = useState([]);\r\n\r\n\tconst [ activeItem, setActiveItem ] = useState(null);\r\n\r\n\tconst Filter = {\r\n\t\tbti (i) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcreated_ts: i.creat_date,\r\n\t\t\t\tname: '',\r\n\t\t\t\tamount: `${i.win}元`,\r\n\t\t\t\tstatus: (+ i.win) > 0,\r\n\t\t\t\traw: i,\r\n\t\t\t\tsub: [\r\n\t\t\t\t\t{ name: '投注金额', value: i.bet, },\r\n\t\t\t\t\t{ name: '赢/输', value: i.win, },\r\n\t\t\t\t\t{ name: '状态', value: i.status, },\r\n\t\t\t\t\t{ name: '结算状态', value: i.line_type_name, },\r\n\t\t\t\t\t{ name: '投注类型', value: i.bet_type_name, },\r\n\t\t\t\t\t{ name: '细节', value: i.branch_name, },\r\n\t\t\t\t\t{ name: '创立日期', value: i.creat_date, },\r\n\t\t\t\t\t{ name: '票据编号', value: i.game_board, },\r\n\t\t\t\t],\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tim (i) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcreated_ts: i.creat_time,\r\n\t\t\t\tname: '',\r\n\t\t\t\tamount: `${i.win}元`,\r\n\t\t\t\tstatus: (+ i.win) > 0,\r\n\t\t\t\traw: i,\r\n\t\t\t\tsub: [\r\n\t\t\t\t\t{ name: '投注金额', value: i.bet },\r\n\t\t\t\t\t{ name: '赢/输', value: i.win },\r\n\t\t\t\t\t{ name: '主队', value: i.hometeamname },\r\n\t\t\t\t\t{ name: '客队', value: i.awayteamname },\r\n\t\t\t\t\t{ name: '投注类型', value: i.bettype },\r\n\t\t\t\t\t{ name: '活动名称', value: i.eventname },\r\n\t\t\t\t\t{ name: '更新时间', value: i.update_time },\r\n\t\t\t\t\t{ name: '票据编号', value: i.id },\r\n\t\t\t\t],\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tag (i) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcreated_ts: i.created_time,\r\n\t\t\t\tname: '',\r\n\t\t\t\tamount: `${i.win}元`,\r\n\t\t\t\tstatus: (+ i.win) > 0,\r\n\t\t\t\traw: i,\r\n\t\t\t\tsub: [\r\n\t\t\t\t\t{ name: '游戏名称', value: i.game_name, },\r\n\t\t\t\t\t{ name: '投注金额', value: i.bet, },\r\n\t\t\t\t\t{ name: '赢/输', value: i.win, },\r\n\t\t\t\t\t{ name: '票据编号', value: i.game_board, },\r\n\t\t\t\t\t{ name: '创立日期', value: i.created_time, },\r\n\t\t\t\t],\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t};\r\n\r\n\tconst _setGame = game => {\r\n\r\n\t\tif (!game.betting_key) {\r\n\t\t\tconsole.warn('No betting key provided for this game:', game);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetStatus(0);\r\n\t\tsetHistory([]);\r\n\r\n\t\tGame.getBettingHistory({\r\n\t\t\t...User.read(),\r\n\t\t\ttype: game.betting_key,\r\n\t\t}).promise.then(r => {\r\n\r\n\t\t\tsetGame(game);\r\n\r\n\t\t\tconsole.log(r);\r\n\r\n\t\t\tconst history = r.info.list.map(Filter[game.betting_key]);\r\n\r\n\t\t\tsetHistory(history);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tconsole.warn('Unable to get betting history records:', e);\r\n\r\n\t\t\tsetHistory([]);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={`dashboard-betting-history with-loader${!status ? ' loading' : ''}`}>\r\n\t\t\t{game ? (\r\n\t\t\t<button className=\"back-button\" onClick={() => { setGame(null); setActiveItem(null); }}>\r\n\t\t\t\t<Icon name=\"arrow-left\" />\r\n\t\t\t</button>\r\n\t\t\t) : null}\r\n\t\t\t<div className=\"load-spin\"></div>\r\n\t\t\t{game ? (\r\n\t\t\t<div className=\"game-history\">\r\n\t\t\t\t{history.map((item, i) => (\r\n\t\t\t\t<div className={`game-history--item${i === activeItem ? ' opened' : ''}`} key={i} onClick={() => setActiveItem((activeItem !== null ? null : i))}>\r\n\t\t\t\t\t<div className=\"game-history--item-wrap\">\r\n\t\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t\t<p className=\"content--item timestamp\">{item.created_ts}</p>\r\n\t\t\t\t\t\t\t<p className=\"content--item name\">{item.name}</p>\r\n\t\t\t\t\t\t\t<p className=\"content--item amount\">{item.amount}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={`status status--${item.status ? 'green' : 'red'}`}>\r\n\t\t\t\t\t\t\t<p>{item.status ? '赢得' : '失利'}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{i === activeItem ? (\r\n\t\t\t\t\t<div className=\"game-history--item-subwrap\">\r\n\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t{item.sub.map((param, i) => (\r\n\t\t\t\t\t\t\t\t<tr key={i}>\r\n\t\t\t\t\t\t\t\t\t<td>{param.name}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{param.value}</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t<div className=\"games-list\">\r\n\t\t\t\t<div className=\"games-list--category\">\r\n\t\t\t\t\t<h3>体育博彩</h3>\r\n\t\t\t\t\t<div className=\"games-list--items\">\r\n\t\t\t\t\t\t<div className=\"games-list--item BTI体育\" onClick={e => _setGame({ betting_key: 'bti' })}>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"games-list--item IM体育\" onClick={e => _setGame({ betting_key: 'im' })}>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"games-list--item 沙巴体育\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"games-list--category\">\r\n\t\t\t\t\t<h3>真人娱乐场</h3>\r\n\t\t\t\t\t<div className=\"games-list--items\">\r\n\t\t\t\t\t\t<div className=\"games-list--item AG真人\" onClick={e => _setGame({ betting_key: 'bti' })}>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"games-list--item EB真人\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"games-list--category\">\r\n\t\t\t\t\t<h3>电子竞技博彩</h3>\r\n\t\t\t\t\t<div className=\"games-list--items\">\r\n\t\t\t\t\t\t<div className=\"games-list--item IM电竞\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"games-list--category\">\r\n\t\t\t\t\t<h3>老虎机游戏</h3>\r\n\t\t\t\t\t<div className=\"games-list--items\">\r\n\t\t\t\t\t\t<div className=\"games-list--item CQ电子\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"games-list--item PT电子\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"games-list--item MG电子\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"games-list--category\">\r\n\t\t\t\t\t<h3>象棋游戏</h3>\r\n\t\t\t\t\t<div className=\"games-list--items\">\r\n\t\t\t\t\t\t<div className=\"games-list--item 开元棋牌\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nconst Withdraws = ({ update, alert }) => {\r\n\r\n\tconst [ withdraws, setWithdraws ] = useState({\r\n\t\tstatus: 0,\r\n\t\tlist: [],\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconst fetch = async () => {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tconst r = await Service.read({\r\n\t\t\t\t\trecord_type: 'debit',\r\n\t\t\t\t\t...User.read(),\r\n\t\t\t\t}).promise;\r\n\r\n\t\t\t\tsetWithdraws({\r\n\t\t\t\t\tstatus: 1,\r\n\t\t\t\t\tlist: r.info.map(t => ({ ...t, ts: toDate(t.requestTime, true) })),\r\n\t\t\t\t});\r\n\r\n\t\t\t} catch (e) {\r\n\r\n\t\t\t\tif (!e.is_aborted) {\r\n\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfetch();\r\n\r\n\t}, [ update ]);\r\n\r\n\tconst [ range, setRange ] = useState('today');\r\n\r\n\tconst [ customI, setCustomI ] = useState(0);\r\n\r\n\tconst [ customRange, setCustomRange ] = useState({\r\n\t\tfrom: moment().subtract(30, 'days').toDate(),\r\n\t\tto: moment().toDate()\r\n\t});\r\n\r\n\tconst [ overlayShown, setOverlay ] = useState(false);\r\n\r\n\tconst __withdraws = useMemo(() => {\r\n\r\n\t\tconst _rangeMap = {\r\n\t\t\ttoday: () => {\r\n\t\t\t\tconst today = moment();\r\n\t\t\t\treturn [\r\n\t\t\t\t\ttoday.startOf('day').unix(),\r\n\t\t\t\t\ttoday.endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tyesterday: () => {\r\n\t\t\t\tconst yesterday = moment().subtract(1, 'days');\r\n\t\t\t\treturn [\r\n\t\t\t\t\tyesterday.startOf('day').unix(),\r\n\t\t\t\t\tyesterday.endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tweek: () => {\r\n\t\t\t\treturn [\r\n\t\t\t\t\tmoment().subtract(1, 'weeks').startOf('day').unix(),\r\n\t\t\t\t\tmoment().endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tmonth: () => {\r\n\t\t\t\treturn [\r\n\t\t\t\t\tmoment().subtract(30, 'days').startOf('day').unix(),\r\n\t\t\t\t\tmoment().endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tcustom: () => {\r\n\t\t\t\tlet { from, to } = customRange;\r\n\t\t\t\treturn [\r\n\t\t\t\t\tmoment(from).startOf('day').unix(),\r\n\t\t\t\t\tmoment(to).endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst [ from, to ] = _rangeMap[range]();\r\n\r\n\t\treturn withdraws.list.filter(t => t.ts >= from && t.ts < to);\r\n\r\n\t}, [ withdraws.list, customRange, range ]);\r\n\r\n\tconst UI = {\r\n\t\tasync cancel (w) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tconst r = await User.withdrawCancel({ id: w.id }).promise;\r\n\r\n\t\t\t\tconsole.info(r);\r\n\r\n\t\t\t\tsetWithdraws(ws => ({\r\n\t\t\t\t\t...ws,\r\n\t\t\t\t\tlist: ws.list.map(ws => ws.id === w.id ? { ...w, status: '失败' } : ws),\r\n\t\t\t\t}));\r\n\r\n\t\t\t\talert.showAlert('系统提示', r.info);\r\n\r\n\t\t\t} catch (e) {\r\n\r\n\t\t\t\tconsole.warn(e);\r\n\r\n\t\t\t\talert.showAlert('系统提示', e);\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\ttoggle (w) {\r\n\r\n\t\t\tsetWithdraws(ws => ({\r\n\t\t\t\t...ws,\r\n\t\t\t\tlist: ws.list.map(ws => ws.id === w.id ? { ...w, shown: !w.shown } : ws),\r\n\t\t\t}));\r\n\r\n\t\t},\r\n\t\tapplyCustomRange () {\r\n\r\n\t\t\tsetOverlay(false);\r\n\r\n\t\t\tsetCustomI(customI + 1);\r\n\r\n\t\t\tsetRange('custom');\r\n\r\n\t\t},\r\n\t};\r\n\r\n\tconst _withdraws = __withdraws.map((withdraw, i) => (\r\n\t\t<div\r\n\t\t\tkey={i}\r\n\t\t\tonClick={() => UI.toggle(withdraw)}\r\n\t\t\tclassName={cx('transaction-outer', { shown: withdraw.shown })}>\r\n\t\t\t<div className=\"transaction\">\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<p className=\"dist\">{withdraw.cardNumber}</p>\r\n\t\t\t\t\t<p className=\"amount\">{withdraw.amount}元</p>\r\n\t\t\t\t\t<p className=\"date\">{withdraw.requestTime}</p>\r\n\t\t\t\t\t{withdraw.status === '未审核' ? (\r\n\t\t\t\t\t<button onClick={() => UI.cancel(withdraw)}>取消提款</button>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`status stat-${withdraw.status}`}>\r\n\t\t\t\t\t<span>{withdraw.status}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"transaction-details\">\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>银行:</td>\r\n\t\t\t\t\t\t\t<td>{withdraw.status}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>金额:</td>\r\n\t\t\t\t\t\t\t<td>{withdraw.amount}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>时间:</td>\r\n\t\t\t\t\t\t\t<td>{withdraw.requestTime}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t{withdraw.verifyComment ? (\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>备注:</td>\r\n\t\t\t\t\t\t\t<td>{withdraw.verifyComment}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t));\r\n\r\n\treturn (\r\n\t\t<div className=\"withdraws transactions-sa desktop\">\r\n\t\t\t<h1>提款记录</h1>\r\n\t\t\t<div className=\"transactions-range\">\r\n\t\t\t\t<UITabs\r\n\t\t\t\t\ttab={range}\r\n\t\t\t\t\tonSet={r => r !== 'custom' ? setRange(r) : setOverlay(true)}\r\n\t\t\t\t\ttabs={[\r\n\t\t\t\t\t\t{ index: 'today', name: '今天' },\r\n\t\t\t\t\t\t{ index: 'yesterday', name: '昨天' },\r\n\t\t\t\t\t\t{ index: 'week', name: '本周' },\r\n\t\t\t\t\t\t{ index: 'month', name: '本月' },\r\n\t\t\t\t\t\t{ index: 'custom', name: '自选' },\r\n\t\t\t\t\t]} />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"transactions-list\">\r\n\t\t\t\t{_withdraws}\r\n\t\t\t</div>\r\n\t\t\t<div className={`transactions-overlay${overlayShown ? ' shown' : ''}`}>\r\n\t\t\t\t<div className=\"transactions-overlay--inner\">\r\n\t\t\t\t\t<div className=\"transactions-overlay--wrap\">\r\n\t\t\t\t\t\t<div className=\"custom-range-form\">\r\n\t\t\t\t\t\t\t<h2>选择时间</h2>\r\n\t\t\t\t\t\t\t<div className=\"form-wrap\">\r\n\t\t\t\t\t\t\t\t<div className=\"field\">\r\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"date-from\">开始日期</label>\r\n\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\tid=\"date-from\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"开始日期\"\r\n\t\t\t\t\t\t\t\t\t\tdateFormat=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\t\t\t\tselected={customRange.from}\r\n\t\t\t\t\t\t\t\t\t\tonChange={date => setCustomRange({ ...customRange, from: date, })} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"field\">\r\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"date-to\">结束日期</label>\r\n\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\tid=\"date-from\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"开始日期\"\r\n\t\t\t\t\t\t\t\t\t\tdateFormat=\"yyyy-MM-dd\"\r\n\t\t\t\t\t\t\t\t\t\tselected={customRange.to}\r\n\t\t\t\t\t\t\t\t\t\tminDate={customRange.from}\r\n\t\t\t\t\t\t\t\t\t\tonChange={date => setCustomRange({ ...customRange, to: date, })} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-buttons\">\r\n\t\t\t\t\t\t\t\t<button className=\"cancel\" onClick={e => setOverlay(false)}>取消</button>\r\n\t\t\t\t\t\t\t\t<button className=\"update\" onClick={e => UI.applyCustomRange()}>确认</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nfunction DashboardWithdraw () {\r\n\r\n\tconst [ status, setStatus ] = useState(1);\r\n\r\n\tconst [ update, setUpdate ] = useState(0);\r\n\r\n\tconst [ cards, setCards ] = useState([]);\r\n\tconst [ cardsMap, setCardsMap ] = useState({});\r\n\r\n\tconst [ form, setForm ] = useState({\r\n\t\tdebit_bank: '',\r\n\t\tamount: '',\r\n\t});\r\n\r\n\tconst [ message, setMessage ] = useState({\r\n\t\tclassName: null,\r\n\t\tsource: null,\r\n\t\tmessage: null,\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconst req = Card.read({\r\n\t\t\t...User.read()\r\n\t\t});\r\n\r\n\t\tsetStatus(0);\r\n\r\n\t\treq.promise.then(r => {\r\n\r\n\t\t\tconsole.log('Got cards:', r);\r\n\r\n\t\t\tconst _cardsMap = {};\r\n\r\n\t\t\tconst _cards = r.info.map(c => {\r\n\r\n\t\t\t\tif (!_cardsMap[c.debit_bank]) {\r\n\t\t\t\t\t_cardsMap[c.debit_bank] = c.id;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn c.debit_bank;\r\n\r\n\t\t\t});\r\n\r\n\t\t\tsetCardsMap(_cardsMap);\r\n\r\n\t\t\tif (!_cards.length) {\r\n\t\t\t\t_cards.push('');\r\n\t\t\t}\r\n\r\n\t\t\tsetForm(f => ({\r\n\t\t\t\t...f,\r\n\t\t\t\tdebit_bank: _cards[0] || '',\r\n\t\t\t}));\r\n\r\n\t\t\tsetCards(_cards);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tconsole.warn('Unable to get cards:', e);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t});\r\n\r\n\t\treturn () => req.cancel();\r\n\r\n\t}, []);\r\n\r\n\tconst fields = [\r\n\t\t{ id: 'debit_bank', label: '银行卡号', placeholder: '卡账户' },\r\n\t\t{ id: 'amount', label: '金额', placeholder: '最低100元' },\r\n\t];\r\n\r\n\tconst onChange = e => {\r\n\r\n\t\tconst { name, value } = e.target;\r\n\r\n\t\tif (message.message && message.source === name) {\r\n\t\t\tsetMessage({\r\n\t\t\t\tclassName: null,\r\n\t\t\t\tsource: null,\r\n\t\t\t\tmessage: null,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsetForm(f => ({\r\n\t\t\t...f,\r\n\t\t\t[name]: value,\r\n\t\t}));\r\n\r\n\t}\r\n\r\n\tconst [ alert, setAlert ] = useState({\r\n\t\tshown: false,\r\n\t\ttitle: '',\r\n\t\tmessage: '',\r\n\t\tonClose: () => hideAlert(),\r\n\t});\r\n\r\n\tconst showAlert = (title, message) => {\r\n\r\n\t\tsetAlert(a => ({ ...a, shown: true, title, message }));\r\n\r\n\t}\r\n\r\n\tconst hideAlert = () => {\r\n\r\n\t\tsetAlert(a => ({ ...a, shown: false }));\r\n\r\n\t}\r\n\r\n\tconst withdraw = () => {\r\n\r\n\t\tconst { debit_bank, amount } = form;\r\n\r\n\t\tif (!debit_bank) {\r\n\t\t\treturn void showAlert('系统提示', '必须选择一张卡');\r\n\t\t}\r\n\r\n\t\tconst _amount = + amount;\r\n\r\n\t\tif (!_amount || isNaN(_amount)) {\r\n\t\t\treturn void showAlert('系统提示', '取款金额不能为空');\r\n\t\t}\r\n\r\n\t\tif (_amount < 100 || _amount > 60000) {\r\n\t\t\treturn void showAlert('系统提示', '取款金额小于最低取款限额');\r\n\t\t}\r\n\r\n\t\tconsole.info(`You're about to withdraw ${amount}¥`);\r\n\r\n\t\tsetStatus(0);\r\n\r\n\t\tconst _form = { ...form };\r\n\t\t\t\t\t_form.debit_bank = cardsMap[debit_bank] || '';\r\n\r\n\t\tUser.withdraw({\r\n\t\t\t...User.read(),\r\n\t\t\t..._form,\r\n\t\t}).promise.then(r => {\r\n\r\n\t\t\tconsole.log(`You've successfully withdrawn:`, r);\r\n\r\n\t\t\tshowAlert('系统提示', r.info);\r\n\r\n\t\t\tsetUpdate(u => u + 1);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tconsole.warn('Unable to withdraw:', e);\r\n\r\n\t\t\tshowAlert('系统提示', e);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={`dashboard-withdraw with-loader${!status ? ' loading' : ''}`}>\r\n\t\t\t<div className=\"load-spin\"></div>\r\n\t\t\t<h2>提款</h2>\r\n\t\t\t<div className=\"fields\">\r\n\t\t\t\t{message.message ? (<div className={`message ${message.className}`}>{message.message}</div>) : null}\r\n\t\t\t\t{fields.map((f, i) =>\r\n\t\t\t\t\tf.id === 'debit_bank' ? (\r\n\t\t\t\t\t<div key={i} className=\"form-field\">\r\n\t\t\t\t\t\t<label>{f.label}</label>\r\n\t\t\t\t\t\t<UISelect\r\n\t\t\t\t\t\t\tvalue={form.debit_bank}\r\n\t\t\t\t\t\t\toptions={cards}\r\n\t\t\t\t\t\t\tplaceholder={f.placeholder}\r\n\t\t\t\t\t\t\tonSelect={option => {\r\n\t\t\t\t\t\t\t\tsetForm(f => ({\r\n\t\t\t\t\t\t\t\t\t...f,\r\n\t\t\t\t\t\t\t\t\tdebit_bank: option,\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t}} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t<FormField\r\n\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\tfield={{\r\n\t\t\t\t\t\t\tlabel: f.label,\r\n\t\t\t\t\t\t\tplaceholder: f.placeholder,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tinput={{\r\n\t\t\t\t\t\t\t...f,\r\n\t\t\t\t\t\t\tname: f.id,\r\n\t\t\t\t\t\t\tvalue: form[f.id], onChange,\r\n\t\t\t\t\t\t}} />\r\n\t\t\t\t\t)\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"submit\">\r\n\t\t\t\t<button className=\"button-stylized\" onClick={withdraw}>提交</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"withdraw-list\">\r\n\t\t\t\t<Withdraws update={update} alert={{ showAlert, hideAlert }} />\r\n\t\t\t</div>\r\n\t\t\t<UIAlertSA {...alert} />\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nfunction SubNav (props) {\r\n\r\n\tconst { userAuth } = useContext(User.Context);\r\n\r\n\treturn (\r\n\t\t<div className=\"sub-nav\">\r\n\t\t\t<div className=\"sub-nav--user-wrap\">\r\n\t\t\t\t<p className=\"user-name\">{userAuth.data.account}</p>\r\n\t\t\t\t<p className=\"user-balance\">钱包: <span>{userAuth.data.balance}</span> 元</p>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"sub-nav--tabs\">\r\n\t\t\t\t<UITabs tabs={[\r\n\t\t\t\t\t{ index: 'transfer', name: '转账钱包' },\r\n\t\t\t\t\t{ index: 'personal', name: '个人资料' },\r\n\t\t\t\t\t{ index: 'password', name: '安全中心' },\r\n\t\t\t\t\t{ index: 'payment', name: '设置银行卡' },\r\n\t\t\t\t\t{ index: 'betting-history', name: '投注历史' },\r\n\t\t\t\t]} tab={props.tab} onSet={props.onSet} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nfunction Dashboard () {\r\n\r\n\tconst history = useHistory();\r\n\tconst [ tab, setTab ] = useState(useParams().tab);\r\n\t\r\n\tconst auth = getAuthKey();\r\n\tconst { account } = User.read();\r\n\r\n\tconst { search } = useLocation();\r\n\r\n\tif (search === \"?a=1\") {\r\n\t\twindow.open(`https://u2daszapp.u2d8899.com/newpwa/deposit.php?account=${account}&auth=${auth}&type=mphone`,'_blank')\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\twindow.scrollTo(0, 0);\r\n\r\n\t\tdocument.body.classList.add('dashboard-page');\r\n\r\n\t\treturn () => document.body.classList.remove('dashboard-page');\r\n\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif(tab === \"deposit\") {\r\n\t\t\twindow.open(`https://u2daszapp.u2d8899.com/newpwa/deposit.php?account=${account}&auth=${auth}&type=mphone`,'_blank')\r\n\t\t}\r\n\r\n\t\thistory.push(`/dashboard/${tab}`);\r\n\r\n\t}, [ account, auth, tab, history ]);\r\n\r\n\treturn (\r\n\t\t<div className=\"dashboard\">\r\n\t\t\t<div className=\"decor-n0\"></div>\r\n\t\t\t<div className=\"decor-n1\"></div>\r\n\t\t\t<div className=\"dashboard-wrap dashboard-sub-nav\">\r\n\t\t\t\t<SubNav tab={tab} onSet={setTab} />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"dashboard-wrap\">\r\n\t\t\t\t<div className=\"dashboard-inner\">\r\n\t\t\t\t\t<div className=\"dashboard-tabs\">\r\n\t\t\t\t\t\t<UITabs tabs={[\r\n\t\t\t\t\t\t\t{ index: 'deposit', name: '存款' },\r\n\t\t\t\t\t\t\t{ index: 'transactions', name: '账目' },\r\n\t\t\t\t\t\t\t{ index: 'withdraw', name: '提款', },\r\n\t\t\t\t\t\t]} tab={tab} onSet={setTab} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{tab === 'deposit' ? <DashboardDeposit /> : null}\r\n\t\t\t\t\t{tab === 'transactions' ? <DashboardTransactions /> : null}\r\n\t\t\t\t\t{tab === 'transfer' ? <DashboardTransfer /> : null}\r\n\t\t\t\t\t{tab === 'personal' ? <DashboardPersonal /> : null}\r\n\t\t\t\t\t{tab === 'password' ? <DashboardPassword /> : null}\r\n\t\t\t\t\t{tab === 'payment' ? <DashboardPayment /> : null}\r\n\t\t\t\t\t{tab === 'betting-history' ? <DashboardBettingHistory /> : null}\r\n\t\t\t\t\t{tab === 'withdraw' ? <DashboardWithdraw /> : null}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nexport default withAuth(Dashboard, 1);\r\n"]},"metadata":{},"sourceType":"module"}