{"ast":null,"code":"var _jsxFileName = \"/Users/cramj/Downloads/usportproject 2/src/pwa/view/profile/Betting.jsx\";\nimport React, { useState } from 'react';\nimport { Wrap, Service } from './';\n\nconst Betting = () => {\n  const [status, setStatus] = useState(1);\n  const [game, setGame] = useState(null);\n  const [history, setHistory] = useState([]);\n  const [activeItem, setActiveItem] = useState(null);\n  const games = Service.Game.list();\n  const Filter = {\n    bti(i) {\n      return {\n        created_ts: i.creat_date,\n        name: '',\n        amount: `${i.win}元`,\n        status: +i.win > 0,\n        raw: i,\n        sub: [{\n          name: '投注金额',\n          value: i.bet\n        }, {\n          name: '赢/输',\n          value: i.win\n        }, {\n          name: '状态',\n          value: i.status\n        }, {\n          name: '结算状态',\n          value: i.line_type_name\n        }, {\n          name: '投注类型',\n          value: i.bet_type_name\n        }, {\n          name: '细节',\n          value: i.branch_name\n        }, {\n          name: '创立日期',\n          value: i.creat_date\n        }, {\n          name: '票据编号',\n          value: i.game_board\n        }]\n      };\n    },\n\n    im(i) {\n      return {\n        created_ts: i.creat_time,\n        name: '',\n        amount: `${i.win}元`,\n        status: +i.win > 0,\n        raw: i,\n        sub: [{\n          name: '投注金额',\n          value: i.bet\n        }, {\n          name: '赢/输',\n          value: i.win\n        }, {\n          name: '主队',\n          value: i.hometeamname\n        }, {\n          name: '客队',\n          value: i.awayteamname\n        }, {\n          name: '投注类型',\n          value: i.bettype\n        }, {\n          name: '活动名称',\n          value: i.eventname\n        }, {\n          name: '更新时间',\n          value: i.update_time\n        }, {\n          name: '票据编号',\n          value: i.id\n        }]\n      };\n    },\n\n    ag(i) {\n      return {\n        created_ts: i.created_time,\n        name: '',\n        amount: `${i.win}元`,\n        status: +i.win > 0,\n        raw: i,\n        sub: [{\n          name: '游戏名称',\n          value: i.game_name\n        }, {\n          name: '投注金额',\n          value: i.bet\n        }, {\n          name: '赢/输',\n          value: i.win\n        }, {\n          name: '票据编号',\n          value: i.game_board\n        }, {\n          name: '创立日期',\n          value: i.created_time\n        }]\n      };\n    }\n\n  };\n\n  const _setGame = game => {\n    if (!game.betting_key) {\n      console.warn('No betting key provided for this game:', game);\n      return;\n    }\n\n    setGame(game);\n    setStatus(0);\n    setHistory([]);\n    Service.Game.getBettingHistory({ ...Service.User.read(),\n      type: game.betting_key\n    }).promise.then(r => {\n      console.log(r);\n      const history = r.info.list.map(Filter[game.betting_key]);\n      setHistory(history);\n      setStatus(1);\n    }, e => {\n      console.warn('Unable to get betting history records:', e);\n      setHistory([]);\n      setStatus(1);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Wrap, {\n    className: \"profile-betting-history\",\n    name: \"\\u6295\\u6CE8\\u5386\\u53F2\",\n    sublevel: [game, () => {\n      setGame(null);\n      setActiveItem(null);\n    }],\n    isLoading: !status,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 3\n    }\n  }, game ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"game-history\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 4\n    }\n  }, history.map((item, i) => /*#__PURE__*/React.createElement(\"div\", {\n    className: `game-history--item${i === activeItem ? ' opened' : ''}`,\n    key: i,\n    onClick: () => setActiveItem(activeItem !== null ? null : i),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"game-history--item-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"content--item timestamp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 8\n    }\n  }, item.created_ts), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"content--item name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 8\n    }\n  }, item.name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"content--item amount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 8\n    }\n  }, item.amount)), /*#__PURE__*/React.createElement(\"div\", {\n    className: `status status--${item.status ? 'green' : 'red'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 8\n    }\n  }, item.status ? '赢得' : '失利'))), i === activeItem ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"game-history--item-subwrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 8\n    }\n  }, item.sub.map((param, i) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 10\n    }\n  }, param.name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 10\n    }\n  }, param.value)))))) : null))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"games-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 4\n    }\n  }, games.filter(g => g.betting_key).map((g, i) => /*#__PURE__*/React.createElement(\"button\", {\n    key: i,\n    className: `game game--${g.name}`,\n    onClick: e => _setGame(g),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"game-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }\n  }))))));\n};\n\nexport default Betting;","map":{"version":3,"sources":["/Users/cramj/Downloads/usportproject 2/src/pwa/view/profile/Betting.jsx"],"names":["React","useState","Wrap","Service","Betting","status","setStatus","game","setGame","history","setHistory","activeItem","setActiveItem","games","Game","list","Filter","bti","i","created_ts","creat_date","name","amount","win","raw","sub","value","bet","line_type_name","bet_type_name","branch_name","game_board","im","creat_time","hometeamname","awayteamname","bettype","eventname","update_time","id","ag","created_time","game_name","_setGame","betting_key","console","warn","getBettingHistory","User","read","type","promise","then","r","log","info","map","e","item","param","filter","g"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\n\r\nimport { Wrap, Service } from './';\r\n\r\nconst Betting = () => {\r\n\r\n\tconst [ status, setStatus ] = useState(1);\r\n\r\n\tconst [ game, setGame ] = useState(null);\r\n\tconst [ history, setHistory ] = useState([]);\r\n\r\n\tconst [ activeItem, setActiveItem ] = useState(null);\r\n\r\n\tconst games = Service.Game.list();\r\n\r\n\tconst Filter = {\r\n\t\tbti (i) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcreated_ts: i.creat_date,\r\n\t\t\t\tname: '',\r\n\t\t\t\tamount: `${i.win}元`,\r\n\t\t\t\tstatus: (+ i.win) > 0,\r\n\t\t\t\traw: i,\r\n\t\t\t\tsub: [\r\n\t\t\t\t\t{ name: '投注金额', value: i.bet, },\r\n\t\t\t\t\t{ name: '赢/输', value: i.win, },\r\n\t\t\t\t\t{ name: '状态', value: i.status, },\r\n\t\t\t\t\t{ name: '结算状态', value: i.line_type_name, },\r\n\t\t\t\t\t{ name: '投注类型', value: i.bet_type_name, },\r\n\t\t\t\t\t{ name: '细节', value: i.branch_name, },\r\n\t\t\t\t\t{ name: '创立日期', value: i.creat_date, },\r\n\t\t\t\t\t{ name: '票据编号', value: i.game_board, },\r\n\t\t\t\t],\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tim (i) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcreated_ts: i.creat_time,\r\n\t\t\t\tname: '',\r\n\t\t\t\tamount: `${i.win}元`,\r\n\t\t\t\tstatus: (+ i.win) > 0,\r\n\t\t\t\traw: i,\r\n\t\t\t\tsub: [\r\n\t\t\t\t\t{ name: '投注金额', value: i.bet },\r\n\t\t\t\t\t{ name: '赢/输', value: i.win },\r\n\t\t\t\t\t{ name: '主队', value: i.hometeamname },\r\n\t\t\t\t\t{ name: '客队', value: i.awayteamname },\r\n\t\t\t\t\t{ name: '投注类型', value: i.bettype },\r\n\t\t\t\t\t{ name: '活动名称', value: i.eventname },\r\n\t\t\t\t\t{ name: '更新时间', value: i.update_time },\r\n\t\t\t\t\t{ name: '票据编号', value: i.id },\r\n\t\t\t\t],\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tag (i) {\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcreated_ts: i.created_time,\r\n\t\t\t\tname: '',\r\n\t\t\t\tamount: `${i.win}元`,\r\n\t\t\t\tstatus: (+ i.win) > 0,\r\n\t\t\t\traw: i,\r\n\t\t\t\tsub: [\r\n\t\t\t\t\t{ name: '游戏名称', value: i.game_name, },\r\n\t\t\t\t\t{ name: '投注金额', value: i.bet, },\r\n\t\t\t\t\t{ name: '赢/输', value: i.win, },\r\n\t\t\t\t\t{ name: '票据编号', value: i.game_board, },\r\n\t\t\t\t\t{ name: '创立日期', value: i.created_time, },\r\n\t\t\t\t],\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t};\r\n\r\n\tconst _setGame = game => {\r\n\r\n\t\tif (!game.betting_key) {\r\n\t\t\tconsole.warn('No betting key provided for this game:', game);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetGame(game);\r\n\t\tsetStatus(0);\r\n\t\tsetHistory([]);\r\n\r\n\t\tService.Game.getBettingHistory({\r\n\t\t\t...Service.User.read(),\r\n\t\t\ttype: game.betting_key,\r\n\t\t}).promise.then(r => {\r\n\r\n\t\t\tconsole.log(r);\r\n\r\n\t\t\tconst history = r.info.list.map(Filter[game.betting_key]);\r\n\r\n\t\t\tsetHistory(history);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tconsole.warn('Unable to get betting history records:', e);\r\n\r\n\t\t\tsetHistory([]);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Wrap className=\"profile-betting-history\" name=\"投注历史\" sublevel={[ game, () => { setGame(null); setActiveItem(null); } ]} isLoading={!status}>\r\n\t\t\t{game ? (\r\n\t\t\t<div className=\"game-history\">\r\n\t\t\t\t{history.map((item, i) => (\r\n\t\t\t\t<div className={`game-history--item${i === activeItem ? ' opened' : ''}`} key={i} onClick={() => setActiveItem((activeItem !== null ? null : i))}>\r\n\t\t\t\t\t<div className=\"game-history--item-wrap\">\r\n\t\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t\t<p className=\"content--item timestamp\">{item.created_ts}</p>\r\n\t\t\t\t\t\t\t<p className=\"content--item name\">{item.name}</p>\r\n\t\t\t\t\t\t\t<p className=\"content--item amount\">{item.amount}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={`status status--${item.status ? 'green' : 'red'}`}>\r\n\t\t\t\t\t\t\t<p>{item.status ? '赢得' : '失利'}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{i === activeItem ? (\r\n\t\t\t\t\t<div className=\"game-history--item-subwrap\">\r\n\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t{item.sub.map((param, i) => (\r\n\t\t\t\t\t\t\t\t<tr key={i}>\r\n\t\t\t\t\t\t\t\t\t<td>{param.name}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{param.value}</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t<div className=\"games-list\">\r\n\t\t\t\t{games.filter(g => g.betting_key).map((g, i) => (\r\n\t\t\t\t<button key={i} className={`game game--${g.name}`} onClick={e => _setGame(g)}>\r\n\t\t\t\t\t<div className=\"game-content\">\r\n\t\t\t\t\t\t<div className=\"logo\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</button>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Wrap>\r\n\t);\r\n\r\n\r\n\r\n}\r\n\r\nexport default Betting;\r\n"]},"metadata":{},"sourceType":"module"}