{"ast":null,"code":"import _objectSpread from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{map,isEmpty}from'lodash';import{Service}from'../';var CardItem=function CardItem(props){var label=props.label,time=props.time,value=props.value,status=props.status,className=props.className;return/*#__PURE__*/React.createElement(\"div\",{className:\"promo-history-card-item \".concat(className?className:\"\")},/*#__PURE__*/React.createElement(\"div\",{className:\"cl-item promo-history-card-text\"},/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-text\"},label),/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-time\"},time)),value&&/*#__PURE__*/React.createElement(\"div\",{className:\"cl-item promo-history-card-value\"},/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-amount\"},\"\\u91D1\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,value)),/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-status \".concat(status?\"success\":\"failure\")},/*#__PURE__*/React.createElement(\"span\",null,\" \",status?\"成功\":\"失败\"))));};var PromoHistory=function PromoHistory(props){var id=props.id,refresh=props.refresh,onStop=props.onStop;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];useEffect(function(){if(refresh==id){setLoad(true);}},[refresh]);useEffect(function(){var fetch=function fetch(){// console.log(User.read())\nvar req=Service.Transaction.read(_objectSpread(_objectSpread({},Service.User.read()),{},{record_type:\"promotion\",type:\"record_list\"}));req.promise.then(function(result){// console.log(result);\nif(result.status===1){setItems(result.info);setLoad(false);onStop();}},function(e){// console.log(\"Unable to response:\", e);\n});};fetch();},[load]);if(!isEmpty(items)){return/*#__PURE__*/React.createElement(\"div\",{className:\"promo-history-card-body\"},map(items,function(obj,i){return/*#__PURE__*/React.createElement(CardItem,{key:i,label:obj.title,time:obj.addTime,value:obj.promMoney,status:true});}));}return/*#__PURE__*/React.createElement(\"div\",{className:\"no-transactions\"},/*#__PURE__*/React.createElement(\"div\",{className:\"image-box\"}),/*#__PURE__*/React.createElement(\"span\",null,\"\\u6682\\u65E0\\u8BB0\\u5F55\"));};export default PromoHistory;","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/ubet-project (1)/src/view/profile/transferhistory/promohistory.js"],"names":["React","useEffect","useState","map","isEmpty","Service","CardItem","props","label","time","value","status","className","PromoHistory","id","refresh","onStop","items","setItems","load","setLoad","fetch","req","Transaction","read","User","record_type","type","promise","then","result","info","e","obj","i","title","addTime","promMoney"],"mappings":"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","sourcesContent":["import React  ,{ useEffect, useState }from \"react\";\r\nimport { map , isEmpty} from 'lodash'\r\n\r\nimport { Service } from '../'\r\n\r\n\r\nconst CardItem = (props) => {\r\n    const { label, time, value, status, className } = props;\r\n    return (\r\n      <div className={`promo-history-card-item ${className ? className : \"\"}`}>\r\n        <div className=\"cl-item promo-history-card-text\">\r\n          <p className=\"cl-card-text\">{label}</p>\r\n          <p className=\"cl-card-time\">{time}</p>\r\n        </div>\r\n        {value && (\r\n          <div className=\"cl-item promo-history-card-value\">\r\n            <p className=\"cl-card-amount\">\r\n              金额: <span>{value}</span>\r\n            </p>\r\n            <p className={`cl-card-status ${status ? \"success\" : \"failure\"}`}>\r\n              <span> {status ? \"成功\" : \"失败\"}</span>\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n};\r\n\r\nconst PromoHistory = (props) => {\r\n    const { id ,refresh , onStop } = props\r\n\r\n    const [items, setItems] = useState([]);\r\n    const [load, setLoad] = useState(false);\r\n\r\n    useEffect(() =>{\r\n      if(refresh == id ){\r\n        setLoad(true)\r\n      }\r\n    },[refresh])\r\n\r\n    useEffect(() => {\r\n        const fetch = () => {\r\n        // console.log(User.read())\r\n\r\n        const req = Service.Transaction.read({\r\n            ...Service.User.read(),\r\n            record_type: \"promotion\",\r\n            type: \"record_list\",\r\n        });\r\n\r\n        req.promise.then((result) => {\r\n            // console.log(result);\r\n            if (result.status === 1) {\r\n                setItems(result.info);\r\n                setLoad(false);\r\n                onStop()\r\n\r\n            }\r\n        },(e) => {\r\n            // console.log(\"Unable to response:\", e);\r\n        })\r\n        };\r\n        fetch();\r\n    }, [load]);\r\n\r\n    if(!isEmpty(items)){\r\n        return  <div className=\"promo-history-card-body\">\r\n                    {\r\n                    map(items, (obj, i) => {\r\n                        return (\r\n                        <CardItem\r\n                            key={i}\r\n                            label={obj.title}\r\n                            time={obj.addTime}\r\n                            value={obj.promMoney}\r\n                            status={true}\r\n                        />\r\n                        );\r\n                    })\r\n                    }\r\n\r\n                </div>\r\n    }\r\n\r\n    return  <div className=\"no-transactions\">\r\n                <div className=\"image-box\" />\r\n                <span>暂无记录</span>\r\n            </div>\r\n\r\n\r\n}\r\n\r\nexport default PromoHistory"]},"metadata":{},"sourceType":"module"}