{"ast":null,"code":"var _jsxFileName = \"/Users/cramj/Downloads/usportproject 2/src/pwa/component/PromoOverSA.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { User, Promotions as Service } from '../../service/';\nimport { Icon } from '../../component/';\nimport '../assets/scss/PromoOverSA.scss';\n\nfunction PromoOverSA({\n  onClose\n}) {\n  const [status, setStatus] = useState(1);\n  const [promotions, setPromotions] = useState([]);\n  useEffect(() => {\n    const req = Service.read_updated({ ...User.read()\n    });\n    setStatus(0);\n    req.promise.then(r => {\n      console.info('Got promotions:', r);\n      setStatus(1);\n      setPromotions(r.info);\n    }, e => {\n      console.warn('Unable to get promotions:', e);\n      setStatus(1);\n    });\n    return () => req.cancel();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `promo-over-sa with-loader${!status ? ' loading' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"load-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promo-over-sa--head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promotions-sa-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 6\n    }\n  }, \"\\u4FC3\\u9500\\u6D3B\\u52A8\")), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"close-circle-sharp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 6\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promo-over-sa--content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }\n  }, promotions.map((promotion, i) => /*#__PURE__*/React.createElement(Link, {\n    className: \"banner\",\n    to: `/promotion/${promotion.id}`,\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner-inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner-inner-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `https://${promotion.bannerurl}`,\n    alt: promotion.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 8\n    }\n  }, \"\\u79BB\\u6D3B\\u52A8\\u7ED3\\u675F: \", promotion.endTime, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 8\n    }\n  }, \"\\u66F4\\u591A\\u5185\\u5BB9\"))))))));\n}\n\nexport default PromoOverSA;","map":{"version":3,"sources":["/Users/cramj/Downloads/usportproject 2/src/pwa/component/PromoOverSA.js"],"names":["React","useState","useEffect","Link","User","Promotions","Service","Icon","PromoOverSA","onClose","status","setStatus","promotions","setPromotions","req","read_updated","read","promise","then","r","console","info","e","warn","cancel","map","promotion","i","id","bannerurl","title","endTime"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { User, Promotions as Service } from '../../service/';\r\nimport { Icon } from '../../component/';\r\n\r\nimport '../assets/scss/PromoOverSA.scss';\r\n\r\nfunction PromoOverSA ({ onClose }) {\r\n\r\n\tconst [ status, setStatus ] = useState(1);\r\n\tconst [ promotions, setPromotions ] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconst req = Service.read_updated({\r\n\t\t\t...User.read(),\r\n\t\t});\r\n\r\n\t\tsetStatus(0);\r\n\r\n\t\treq.promise.then(r => {\r\n\r\n\t\t\tconsole.info('Got promotions:', r);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t\tsetPromotions(r.info);\r\n\r\n\t\t}, e => {\r\n\t\r\n\t\t\tconsole.warn('Unable to get promotions:', e);\r\n\r\n\t\t\tsetStatus(1);\r\n\r\n\t\t});\r\n\r\n\t\treturn () => req.cancel();\r\n\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className={`promo-over-sa with-loader${!status ? ' loading' : ''}`}>\r\n\t\t\t<div className=\"load-spin\"></div>\r\n\t\t\t<div className=\"promo-over-sa--head\">\r\n\t\t\t\t{/* <h2>促销活动</h2> */}\r\n\t\t\t\t<div className=\"promotions-sa-title\">\r\n\t\t\t\t\t<h1>促销活动</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button onClick={onClose}>\r\n\t\t\t\t\t<Icon name=\"close-circle-sharp\" />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"promo-over-sa--content\">\r\n\t\t\t\t{promotions.map((promotion, i) => (\r\n\t\t\t\t<Link className=\"banner\" to={`/promotion/${promotion.id}`} key={i}>\r\n\t\t\t\t\t<div className=\"banner-inner\">\r\n\t\t\t\t\t\t{/* <div className=\"banner-title\">\r\n\t\t\t\t\t\t\t<h4>{promotion.title}</h4>\r\n\t\t\t\t\t\t</div> */}\r\n\t\t\t\t\t\t<div className=\"banner-inner-wrap\">\r\n\t\t\t\t\t\t\t<img src={`https://${promotion.bannerurl}`} alt={promotion.title} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"banner-body\">\r\n\t\t\t\t\t\t\t<p>离活动结束: {promotion.endTime} \r\n\t\t\t\t\t\t\t<span>更多内容</span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* <div className=\"banner-inner\">\r\n\t\t\t\t\t\t<div className=\"banner-title\">\r\n\t\t\t\t\t\t\t<h4>{promotion.title}</h4>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<img src={`https://${promotion.bannerurl}`} alt={promotion.title} />\r\n\t\t\t\t\t\t<div className=\"banner-body\">\r\n\t\t\t\t\t\t\t<p>离活动结束: {promotion.endTime}</p>\r\n\t\t\t\t\t\t\t<button>更多内容</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div> */}\r\n\t\t\t\t</Link>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nexport default PromoOverSA;\r\n"]},"metadata":{},"sourceType":"module"}