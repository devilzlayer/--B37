{"ast":null,"code":"var _jsxFileName = \"/Users/cramj/Documents/New PWA/ubet-project (1)/src/pwa/component/UserSA.js\";\nimport React, { useState, useContext, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport cx from \"classnames\";\nimport { User, Inbox } from \"../../service/\";\nimport \"../assets/scss/UserSA.scss\";\n\nfunction UserSA() {\n  const history = useHistory();\n  const {\n    setUserAuthFN,\n    userAuth\n  } = useContext(User.Context);\n  const [balanceLoad] = useState(0);\n  const [inboxCount, setInboxCount] = useState(0);\n\n  const onClick = e => {\n    if (!userAuth.data) {\n      e.preventDefault();\n      setUserAuthFN(userAuth.status, userAuth.data, true);\n    }\n  };\n\n  useEffect(() => {\n    const q = Inbox.count();\n    q.promise.then(r => {\n      setInboxCount(+r.info);\n    }, e => {\n      if (!e.is_aborted) {\n        console.info(e);\n      }\n    });\n    return () => q.cancel();\n  }, []);\n\n  const UserLink = ({\n    name,\n    to,\n    className,\n    count,\n    target\n  }) => /*#__PURE__*/React.createElement(Link, {\n    to: to,\n    className: `link-${className}`,\n    onClick: onClick,\n    target: target,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, count ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 16\n    }\n  }, count) : null), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, name));\n\n  const refreshBalance = () => {\n    history.push(\"/profile/transfer\"); // setBalanceLoad(1);\n    // User.session({\n    // \t...User.read()\n    // }).promise.then(r => {\n    // \tsetBalanceLoad(0);\n    // \tsetUserAuthFN(1, r.info);\n    // });\n  }; // console.log(userAuth)\n  // return false\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(\"user-sa\", \"with-loader\", {\n      loading: balanceLoad\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"load-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-sa-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, userAuth.data && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-sa-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"user-sa--name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, userAuth.data.account), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-sa--balance\",\n    tabIndex: \"0\",\n    role: \"button\",\n    onClick: () => refreshBalance(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \"\\u4E2D\\u5FC3:\\xA0\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, \"\\uFFE5\"), userAuth.data.balance))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-sa-hr\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-sa-links\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(UserLink, {\n    name: \"\\u5145\\u503C\",\n    to: \"/profile/deposit?a=1\",\n    className: \"deposit\",\n    target: \"_blank\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(UserLink, {\n    name: \"\\u8F6C\\u8D26\",\n    to: \"/profile/transfer\",\n    className: \"transfer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(UserLink, {\n    name: \"\\u63D0\\u6B3E\",\n    to: \"/profile/withdraw\",\n    className: \"debit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(UserLink, {\n    name: \"\\u4FE1\\u606F\",\n    to: \"/inbox\",\n    className: \"inbox\",\n    count: inboxCount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }))));\n}\n\nexport default UserSA;","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/ubet-project (1)/src/pwa/component/UserSA.js"],"names":["React","useState","useContext","useEffect","Link","useHistory","cx","User","Inbox","UserSA","history","setUserAuthFN","userAuth","Context","balanceLoad","inboxCount","setInboxCount","onClick","e","data","preventDefault","status","q","count","promise","then","r","info","is_aborted","console","cancel","UserLink","name","to","className","target","refreshBalance","push","loading","account","balance"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport cx from \"classnames\";\r\n\r\nimport { User, Inbox } from \"../../service/\";\r\n\r\nimport \"../assets/scss/UserSA.scss\";\r\n\r\nfunction UserSA() {\r\n  const history = useHistory();\r\n\r\n  const { setUserAuthFN , userAuth } = useContext(User.Context);\r\n  const [balanceLoad] = useState(0);\r\n  const [inboxCount, setInboxCount] = useState(0);\r\n\r\n  const onClick = (e) =>{\r\n    if(!userAuth.data){\r\n      e.preventDefault()\r\n      setUserAuthFN(userAuth.status , userAuth.data , true)\r\n    }\r\n  }\r\n  \r\n  useEffect(() => {\r\n    const q = Inbox.count();\r\n    \r\n    q.promise.then(\r\n      (r) => {\r\n        setInboxCount(+r.info);\r\n      },\r\n      (e) => {\r\n        if (!e.is_aborted) {\r\n          console.info(e);\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => q.cancel();\r\n  }, []);\r\n\r\n  const UserLink = ({ name, to, className, count , target  }) => (\r\n    <Link to={to} className={`link-${className}`} onClick={onClick} target={target} >\r\n      <i>\r\n      {count ? <span className=\"count\">{count}</span> : null}\r\n\r\n      </i>\r\n      <span>{name}</span>\r\n    </Link>\r\n  );\r\n\r\n  const refreshBalance = () => {\r\n    history.push(\"/profile/transfer\");\r\n\r\n    // setBalanceLoad(1);\r\n\r\n    // User.session({\r\n    // \t...User.read()\r\n    // }).promise.then(r => {\r\n\r\n    // \tsetBalanceLoad(0);\r\n\r\n    // \tsetUserAuthFN(1, r.info);\r\n\r\n    // });\r\n  };\r\n\r\n  // console.log(userAuth)\r\n  // return false\r\n\r\n  return (\r\n    <div className={cx(\"user-sa\", \"with-loader\", { loading: balanceLoad })}>\r\n      <div className=\"load-spin\"></div>\r\n      <div className=\"user-sa-content\">\r\n        {userAuth.data && \r\n        <div className=\"user-sa-info\">\r\n          <span className=\"user-sa--name\">{userAuth.data.account}</span>\r\n          <div\r\n            className=\"user-sa--balance\"\r\n            tabIndex=\"0\"\r\n            role=\"button\"\r\n            onClick={() => refreshBalance()}\r\n          >\r\n            <span>中心:&nbsp;</span>\r\n            <p>\r\n              <span>￥</span>\r\n              {userAuth.data.balance}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        }\r\n        <div className=\"user-sa-hr\" />\r\n        <div className=\"user-sa-links\">\r\n          <UserLink name=\"充值\" to=\"/profile/deposit?a=1\" className=\"deposit\" target=\"_blank\"/>\r\n          <UserLink name=\"转账\" to=\"/profile/transfer\" className=\"transfer\" />\r\n          <UserLink name=\"提款\" to=\"/profile/withdraw\" className=\"debit\" />\r\n          <UserLink\r\n            name=\"信息\"\r\n            to=\"/inbox\"\r\n            className=\"inbox\"\r\n            count={inboxCount}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserSA;\r\n"]},"metadata":{},"sourceType":"module"}