{"ast":null,"code":"var _jsxFileName = \"/Users/cramj/Downloads/usportproject 2/src/pwa/view/profile/Transactions.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { NavLink, Link, useParams } from 'react-router-dom';\nimport DatePicker from 'react-mobile-datepicker';\nimport cx from 'classnames';\nimport * as moment from 'moment';\nimport { toDate } from '../../../util/';\nimport { User, Transaction as Service } from '../../../service/';\nimport { Icon, UITabs } from '../../../component/';\n\nconst Transactions = () => {\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  const {\n    type\n  } = useParams();\n  const [loading, setLoading] = useState(false);\n  const [range, setRange] = useState('today');\n  const [customI, setCustomI] = useState(0);\n  const [customRange, setCustomRange] = useState({\n    from: moment().subtract(30, 'days').toDate(),\n    to: moment().toDate()\n  });\n  const [customRangeOpened, openCustomRange] = useState({\n    from: false,\n    to: false\n  });\n  const [overlayShown, setOverlay] = useState(false);\n  const [transactions, setTransactions] = useState([]);\n  const [transactionsFiltered, setTransactionsFiltered] = useState([]);\n  useEffect(() => {\n    var req = Service.read({\n      record_type: type,\n      ...User.read()\n    });\n    setLoading(true);\n    setTransactions([]);\n    req.promise.then(r => {\n      const _transactions = r.info.map(t => {\n        t.timestamp = toDate(t.requestTime, true);\n\n        if (t.endTime) {\n          t.timestamp = toDate(t.endTime, true);\n        }\n\n        if (t.add_date) {\n          t.timestamp = toDate(t.add_date, true);\n        }\n\n        return t;\n      });\n\n      setLoading(false);\n      setTransactions(_transactions);\n    }, e => {\n      if (!e.is_aborted) {\n        console.error('Unable to get transactions:', e);\n      }\n    });\n    return () => req.cancel();\n  }, [type]);\n  useEffect(() => {\n    const _rangeMap = {\n      today: () => {\n        const today = moment();\n        return [today.startOf('day').unix(), today.endOf('day').unix()];\n      },\n      yesterday: () => {\n        const yesterday = moment().subtract(1, 'days');\n        return [yesterday.startOf('day').unix(), yesterday.endOf('day').unix()];\n      },\n      week: () => {\n        return [moment().subtract(1, 'weeks').startOf('day').unix(), moment().endOf('day').unix()];\n      },\n      month: () => {\n        return [moment().subtract(30, 'days').startOf('day').unix(), moment().endOf('day').unix()];\n      },\n      custom: () => {\n        let {\n          from,\n          to\n        } = customRange;\n        return [moment(from).startOf('day').unix(), moment(to).endOf('day').unix()];\n      }\n    };\n\n    const [from, to] = _rangeMap[range]();\n\n    const _transactions = transactions.filter(t => {\n      return t.timestamp >= from && t.timestamp < to;\n    });\n\n    setTransactionsFiltered(_transactions); // eslint-disable-next-line\n  }, [range, customI, transactions]);\n  useEffect(() => {\n    document.body.style.overflow = overlayShown ? 'hidden' : 'auto';\n    return () => {\n      document.body.style.overflow = 'auto';\n    };\n  }, [overlayShown]);\n\n  const setRangeHandle = range => {\n    if (range === 'custom') {\n      return void setOverlay(true);\n    }\n\n    setRange(range);\n  };\n\n  const applyCustomRange = () => {\n    setOverlay(false);\n    setCustomI(customI + 1);\n    setRange('custom');\n  };\n\n  const Transaction = ({\n    type,\n    transaction\n  }) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transaction\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 3\n    }\n  }, type === 'debit' ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 6\n    }\n  }, transaction.requestTime), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"dist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 6\n    }\n  }, transaction.bankInfo), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"amount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 6\n    }\n  }, transaction.amount, \"\\u5143\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: `status stat-${transaction.status}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 6\n    }\n  }, transaction.status))) : null, type === 'deposit' ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 6\n    }\n  }, transaction.endTime), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"dist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 6\n    }\n  }, transaction.payType), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"amount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 6\n    }\n  }, transaction.amount, \"\\u5143\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: `status stat-${transaction.status}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 6\n    }\n  }, transaction.status))) : null, type === 'transfer' ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 6\n    }\n  }, transaction.requestTime), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"dist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 6\n    }\n  }, (transaction.platName || '').split('-->').join('\\n-->')), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"amount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 6\n    }\n  }, transaction.amount, \"\\u5143\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: `status stat-${transaction.tranStatus}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 6\n    }\n  }, transaction.tranStatus))) : null, type === 'washcode' ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content washcode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 6\n    }\n  }, transaction.add_date), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"dist\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 6\n    }\n  }, transaction.game_id), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"amount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 6\n    }\n  }, transaction.money, \"\\u5143\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: `status stat-ratio`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 6\n    }\n  }, transaction.ratio))) : null);\n\n  const monthMap = {\n    '1': '一月',\n    '2': '二月',\n    '3': '三月',\n    '4': '四月',\n    '5': '五月',\n    '6': '六月',\n    '7': '七月',\n    '8': '八月',\n    '9': '九月',\n    '10': '十月',\n    '11': '十一月',\n    '12': '十二月'\n  };\n\n  const DatePickerWrap = ({\n    type,\n    header,\n    min\n  }) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    onClick: e => openCustomRange({ ...customRangeOpened,\n      [type]: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 4\n    }\n  }, moment(customRange[type]).format('YYYY-MM-DD')), /*#__PURE__*/React.createElement(DatePicker, {\n    theme: \"ios\",\n    confirmText: \"\\u597D\\u5427\",\n    headerFormat: header,\n    value: customRange[type],\n    isOpen: customRangeOpened[type],\n    min: min,\n    dateConfig: {\n      year: {\n        format: 'YYYY'\n      },\n      month: {\n        format: v => monthMap[v.getMonth() + 1]\n      },\n      date: {\n        format: 'D'\n      }\n    },\n    onSelect: date => {\n      openCustomRange({ ...customRangeOpened,\n        [type]: false\n      });\n      setCustomRange({ ...customRange,\n        [type]: date\n      });\n    },\n    onCancel: e => openCustomRange({ ...customRangeOpened,\n      [type]: false\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 4\n    }\n  }));\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('transactions-sa', 'with-loader', {\n      loading\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"load-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transactions-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transactions-back-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"arrow-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 7\n    }\n  }, \"\\u4EA4\\u6613\\u8BB0\\u5F55\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"faq\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"faq\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transactions-menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/profile/transactions/deposit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 6\n    }\n  }, \"\\u5B58\\u6B3E\\u8BB0\\u5F55\"), /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/profile/transactions/transfer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 6\n    }\n  }, \"\\u8F6C\\u8D26\\u8BB0\\u5F55\"), /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/profile/transactions/washcode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 6\n    }\n  }, \"\\u53CD\\u6C34\\u8BB0\\u5F55\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transactions-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transactions-range\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(UITabs, {\n    tabs: [{\n      index: 'today',\n      name: '今天'\n    }, {\n      index: 'yesterday',\n      name: '昨天'\n    }, {\n      index: 'week',\n      name: '本周'\n    }, {\n      index: 'month',\n      name: '本月'\n    }, {\n      index: 'custom',\n      name: '自选'\n    }],\n    tab: range,\n    onSet: setRangeHandle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transactions-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 5\n    }\n  }, transactionsFiltered.map((transaction, i) => /*#__PURE__*/React.createElement(Transaction, {\n    type: type,\n    key: i,\n    transaction: transaction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 6\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx('transactions-overlay', {\n      shown: overlayShown\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transactions-overlay--inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"transactions-overlay--wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-range-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 8\n    }\n  }, \"\\u9009\\u62E9\\u65F6\\u95F4\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 10\n    }\n  }, \"\\u5F00\\u59CB\\u65E5\\u671F\"), /*#__PURE__*/React.createElement(DatePickerWrap, {\n    type: \"from\",\n    header: \"\\u9009\\u62E9\\u65F6\\u95F4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 10\n    }\n  }, \"\\u7ED3\\u675F\\u65E5\\u671F\"), /*#__PURE__*/React.createElement(DatePickerWrap, {\n    type: \"to\",\n    min: customRange.from,\n    header: \"\\u9009\\u62E9\\u7ED3\\u675F\\u65F6\\u95F4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 10\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"cancel\",\n    onClick: e => setOverlay(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 9\n    }\n  }, \"\\u53D6\\u6D88\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"update\",\n    onClick: e => applyCustomRange(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 9\n    }\n  }, \"\\u786E\\u8BA4\")))))));\n};\n\nexport default Transactions;","map":{"version":3,"sources":["/Users/cramj/Downloads/usportproject 2/src/pwa/view/profile/Transactions.jsx"],"names":["React","useEffect","useState","NavLink","Link","useParams","DatePicker","cx","moment","toDate","User","Transaction","Service","Icon","UITabs","Transactions","window","scrollTo","type","loading","setLoading","range","setRange","customI","setCustomI","customRange","setCustomRange","from","subtract","to","customRangeOpened","openCustomRange","overlayShown","setOverlay","transactions","setTransactions","transactionsFiltered","setTransactionsFiltered","req","read","record_type","promise","then","r","_transactions","info","map","t","timestamp","requestTime","endTime","add_date","e","is_aborted","console","error","cancel","_rangeMap","today","startOf","unix","endOf","yesterday","week","month","custom","filter","document","body","style","overflow","setRangeHandle","applyCustomRange","transaction","bankInfo","amount","status","payType","platName","split","join","tranStatus","game_id","money","ratio","monthMap","DatePickerWrap","header","min","format","year","v","getMonth","date","index","name","i","shown"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { NavLink, Link, useParams } from 'react-router-dom';\r\nimport DatePicker from 'react-mobile-datepicker';\r\nimport cx from 'classnames';\r\nimport * as moment from 'moment';\r\n\r\nimport { toDate } from '../../../util/';\r\nimport { User, Transaction as Service } from '../../../service/';\r\nimport { Icon, UITabs } from '../../../component/';\r\n\r\nconst Transactions = () => {\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\twindow.scrollTo(0, 0);\r\n\r\n\t}, []);\r\n\r\n\tconst { type } = useParams();\r\n\r\n\tconst [ loading, setLoading ] = useState(false);\r\n\tconst [ range, setRange ] = useState('today');\r\n\r\n\tconst [ customI, setCustomI ] = useState(0);\r\n\tconst [ customRange, setCustomRange ] = useState({\r\n\t\tfrom: moment().subtract(30, 'days').toDate(),\r\n\t\tto: moment().toDate()\r\n\t});\r\n\r\n\tconst [ customRangeOpened, openCustomRange ] = useState({\r\n\t\tfrom: false,\r\n\t\tto: false,\r\n\t});\r\n\r\n\tconst [ overlayShown, setOverlay ] = useState(false);\r\n\r\n\tconst [ transactions, setTransactions ] = useState([]);\r\n\tconst [ transactionsFiltered, setTransactionsFiltered ] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tvar req = Service.read({\r\n\t\t\trecord_type: type,\r\n\t\t\t...User.read(),\r\n\t\t});\r\n\r\n\t\tsetLoading(true);\r\n\t\tsetTransactions([]);\r\n\r\n\t\treq.promise.then(r => {\r\n\r\n\t\t\tconst _transactions = r.info.map(t => {\r\n\r\n\t\t\t\tt.timestamp = toDate(t.requestTime, true);\r\n\r\n\t\t\t\tif (t.endTime) {\r\n\t\t\t\t\tt.timestamp = toDate(t.endTime, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (t.add_date) {\r\n\t\t\t\t\tt.timestamp = toDate(t.add_date, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn t;\r\n\r\n\t\t\t});\r\n\r\n\t\t\tsetLoading(false);\r\n\t\t\tsetTransactions(_transactions);\r\n\r\n\t\t}, e => {\r\n\r\n\t\t\tif (!e.is_aborted) {\r\n\t\t\t\tconsole.error('Unable to get transactions:', e);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn () => req.cancel();\r\n\r\n\t}, [ type ]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconst _rangeMap = {\r\n\t\t\ttoday: () => {\r\n\t\t\t\tconst today = moment();\r\n\t\t\t\treturn [\r\n\t\t\t\t\ttoday.startOf('day').unix(),\r\n\t\t\t\t\ttoday.endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tyesterday: () => {\r\n\t\t\t\tconst yesterday = moment().subtract(1, 'days');\r\n\t\t\t\treturn [\r\n\t\t\t\t\tyesterday.startOf('day').unix(),\r\n\t\t\t\t\tyesterday.endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tweek: () => {\r\n\t\t\t\treturn [\r\n\t\t\t\t\tmoment().subtract(1, 'weeks').startOf('day').unix(),\r\n\t\t\t\t\tmoment().endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tmonth: () => {\r\n\t\t\t\treturn [\r\n\t\t\t\t\tmoment().subtract(30, 'days').startOf('day').unix(),\r\n\t\t\t\t\tmoment().endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\tcustom: () => {\r\n\t\t\t\tlet { from, to } = customRange;\r\n\t\t\t\treturn [\r\n\t\t\t\t\tmoment(from).startOf('day').unix(),\r\n\t\t\t\t\tmoment(to).endOf('day').unix()\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst [ from, to ] = _rangeMap[range]();\r\n\r\n\t\tconst _transactions = transactions.filter(t => {\r\n\t\t\treturn t.timestamp >= from && t.timestamp < to;\r\n\t\t});\r\n\r\n\t\tsetTransactionsFiltered(_transactions);\r\n\r\n\t// eslint-disable-next-line\r\n\t}, [ range, customI, transactions ]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tdocument.body.style.overflow = overlayShown ? 'hidden' : 'auto';\r\n\r\n\t\treturn () => {\r\n\t\t\tdocument.body.style.overflow = 'auto';\r\n\t\t};\r\n\r\n\t}, [ overlayShown ]);\r\n\r\n\tconst setRangeHandle = range => {\r\n\r\n\t\tif (range === 'custom') {\r\n\t\t\treturn void setOverlay(true);\r\n\t\t}\r\n\r\n\t\tsetRange(range);\r\n\r\n\t}\r\n\r\n\tconst applyCustomRange = () => {\r\n\r\n\t\tsetOverlay(false);\r\n\r\n\t\tsetCustomI(customI + 1);\r\n\r\n\t\tsetRange('custom');\r\n\r\n\t}\r\n\r\n\tconst Transaction = ({ type, transaction }) => (\r\n\t\t<div className=\"transaction\">\r\n\t\t\t{type === 'debit' ? (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<p className=\"date\">{transaction.requestTime}</p>\r\n\t\t\t\t\t<p className=\"dist\">{transaction.bankInfo}</p>\r\n\t\t\t\t\t<p className=\"amount\">{transaction.amount}元</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`status stat-${transaction.status}`}>\r\n\t\t\t\t\t<span>{transaction.status}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t\t) : null}\r\n\t\t\t{type === 'deposit' ? (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<p className=\"date\">{transaction.endTime}</p>\r\n\t\t\t\t\t<p className=\"dist\">{transaction.payType}</p>\r\n\t\t\t\t\t<p className=\"amount\">{transaction.amount}元</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`status stat-${transaction.status}`}>\r\n\t\t\t\t\t<span>{transaction.status}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t\t) : null}\r\n\t\t\t{type === 'transfer' ? (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<p className=\"date\">{transaction.requestTime}</p>\r\n\t\t\t\t\t<p className=\"dist\">{(transaction.platName||'').split('-->').join('\\n-->')}</p>\r\n\t\t\t\t\t<p className=\"amount\">{transaction.amount}元</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`status stat-${transaction.tranStatus}`}>\r\n\t\t\t\t\t<span>{transaction.tranStatus}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t\t) : null}\r\n\t\t\t{type === 'washcode' ? (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"content washcode\">\r\n\t\t\t\t\t<p className=\"date\">{transaction.add_date}</p>\r\n\t\t\t\t\t<p className=\"dist\">{transaction.game_id}</p>\r\n\t\t\t\t\t<p className=\"amount\">{transaction.money}元</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`status stat-ratio`}>\r\n\t\t\t\t\t<span>{transaction.ratio}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t\t) : null}\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst monthMap = {\r\n\t\t'1': '一月',\r\n\t\t'2': '二月',\r\n\t\t'3': '三月',\r\n\t\t'4': '四月',\r\n\t\t'5': '五月',\r\n\t\t'6': '六月',\r\n\t\t'7': '七月',\r\n\t\t'8': '八月',\r\n\t\t'9': '九月',\r\n\t\t'10': '十月',\r\n\t\t'11': '十一月',\r\n\t\t'12': '十二月',\r\n\t};\r\n\r\n\tconst DatePickerWrap = ({ type, header, min }) => (\r\n\t\t<>\r\n\t\t\t<p onClick={e => openCustomRange({\r\n\t\t\t\t...customRangeOpened,\r\n\t\t\t\t[type]: true,\r\n\t\t\t})}>{moment(customRange[type]).format('YYYY-MM-DD')}</p>\r\n\t\t\t<DatePicker\r\n\t\t\t\ttheme=\"ios\"\r\n\t\t\t\tconfirmText=\"好吧\"\r\n\t\t\t\theaderFormat={header}\r\n\t\t\t\tvalue={customRange[type]}\r\n\t\t\t\tisOpen={customRangeOpened[type]}\r\n\t\t\t\tmin={min}\r\n\t\t\t\tdateConfig={{\r\n\t\t\t\t\tyear: {\r\n\t\t\t\t\t\tformat: 'YYYY',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmonth: {\r\n\t\t\t\t\t\tformat: v => monthMap[v.getMonth() + 1],\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdate: {\r\n\t\t\t\t\t\tformat: 'D',\r\n\t\t\t\t\t},\r\n\t\t\t\t}}\r\n\t\t\t\tonSelect={date => {\r\n\t\t\t\t\topenCustomRange({\r\n\t\t\t\t\t\t...customRangeOpened,\r\n\t\t\t\t\t\t[type]: false,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetCustomRange({\r\n\t\t\t\t\t\t...customRange,\r\n\t\t\t\t\t\t[type]: date,\r\n\t\t\t\t\t});\r\n\t\t\t\t}}\r\n\t\t\t\tonCancel={e => openCustomRange({\r\n\t\t\t\t\t...customRangeOpened,\r\n\t\t\t\t\t[type]: false,\r\n\t\t\t\t})} />\r\n\t\t</>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div className={cx('transactions-sa', 'with-loader', { loading })}>\r\n\t\t\t<div className=\"load-spin\"></div>\r\n\t\t\t<div className=\"transactions-head\">\r\n\t\t\t\t<div className=\"transactions-back-wrap\">\r\n\t\t\t\t\t<Link to=\"/profile\">\r\n\t\t\t\t\t\t<Icon name=\"arrow-left\" />\r\n\t\t\t\t\t\t<p>交易记录</p>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<button className=\"faq\">\r\n\t\t\t\t\t\t<Icon name=\"faq\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"transactions-menu\">\r\n\t\t\t\t\t<NavLink to=\"/profile/transactions/deposit\">存款记录</NavLink>\r\n\t\t\t\t\t{/* <NavLink to=\"/profile/transactions/debit\">提款记录</NavLink> */}\r\n\t\t\t\t\t<NavLink to=\"/profile/transactions/transfer\">转账记录</NavLink>\r\n\t\t\t\t\t<NavLink to=\"/profile/transactions/washcode\">反水记录</NavLink>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"transactions-content\">\r\n\t\t\t\t<div className=\"transactions-range\">\r\n\t\t\t\t\t<UITabs tabs={[\r\n\t\t\t\t\t\t{ index: 'today', name: '今天' },\r\n\t\t\t\t\t\t{ index: 'yesterday', name: '昨天' },\r\n\t\t\t\t\t\t{ index: 'week', name: '本周' },\r\n\t\t\t\t\t\t{ index: 'month', name: '本月' },\r\n\t\t\t\t\t\t{ index: 'custom', name: '自选' },\r\n\t\t\t\t\t]} tab={range} onSet={setRangeHandle} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"transactions-list\">\r\n\t\t\t\t{transactionsFiltered.map((transaction, i) => \r\n\t\t\t\t\t<Transaction type={type} key={i} transaction={transaction} />\r\n\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className={cx('transactions-overlay', { shown: overlayShown })}>\r\n\t\t\t\t<div className=\"transactions-overlay--inner\">\r\n\t\t\t\t\t<div className=\"transactions-overlay--wrap\">\r\n\t\t\t\t\t\t<div className=\"custom-range-form\">\r\n\t\t\t\t\t\t\t<h2>选择时间</h2>\r\n\t\t\t\t\t\t\t<div className=\"form-wrap\">\r\n\t\t\t\t\t\t\t\t<div className=\"field\">\r\n\t\t\t\t\t\t\t\t\t<label>开始日期</label>\r\n\t\t\t\t\t\t\t\t\t<DatePickerWrap type=\"from\" header=\"选择时间\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"field\">\r\n\t\t\t\t\t\t\t\t\t<label>结束日期</label>\r\n\t\t\t\t\t\t\t\t\t<DatePickerWrap type=\"to\" min={customRange.from} header=\"选择结束时间\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-buttons\">\r\n\t\t\t\t\t\t\t\t<button className=\"cancel\" onClick={e => setOverlay(false)}>取消</button>\r\n\t\t\t\t\t\t\t\t<button className=\"update\" onClick={e => applyCustomRange()}>确认</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\nexport default Transactions;\r\n"]},"metadata":{},"sourceType":"module"}