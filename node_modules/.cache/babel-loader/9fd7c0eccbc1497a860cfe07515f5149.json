{"ast":null,"code":"var _jsxFileName = \"/Users/cramj/Documents/New PWA/GIT/src/pwa/view/Promotions.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { withAuth } from \"../util/\";\nimport { User, Promotions as Service } from \"../../service/\";\nimport \"../assets/scss/PromotionsSA.scss\";\n\nfunction Promotions() {\n  const [promotions, setPromotions] = useState([]);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    document.body.classList.add(\"promotions-page\");\n    return () => document.body.classList.remove(\"promotions-page\");\n  }, []);\n  useEffect(() => {\n    const req = Service.read_updated({ ...User.read()\n    });\n    req.promise.then(r => {\n      console.info(\"Got promotions:\", r);\n      setPromotions(r.info);\n    }, e => {\n      console.warn(\"Unable to get promotions:\", e);\n    });\n    return () => req.cancel();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promotions-sa\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promotions-sa-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promotions-sa-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }, \"\\u4FC3\\u9500\\u6D3B\\u52A8\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promotions-sa-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"decor-n0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"decor-n1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }), promotions.map((promotion, i) => /*#__PURE__*/React.createElement(Link, {\n    className: \"banner\",\n    to: `/promotion/${promotion.id}`,\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner-inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner-inner-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `https://${promotion.bannerurl}`,\n    alt: promotion.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, \"\\u79BB\\u6D3B\\u52A8\\u7ED3\\u675F: \", promotion.endTime, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"arrow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 19\n    }\n  }, \"\\u66F4\\u591A\\u5185\\u5BB9\"))))))));\n}\n\nexport default withAuth(Promotions, 0);","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/GIT/src/pwa/view/Promotions.js"],"names":["React","useState","useEffect","Link","withAuth","User","Promotions","Service","promotions","setPromotions","window","scrollTo","document","body","classList","add","remove","req","read_updated","read","promise","then","r","console","info","e","warn","cancel","map","promotion","i","id","bannerurl","title","endTime"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { withAuth } from \"../util/\";\r\nimport { User, Promotions as Service } from \"../../service/\";\r\n\r\nimport \"../assets/scss/PromotionsSA.scss\";\r\n\r\nfunction Promotions() {\r\n  const [promotions, setPromotions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n\r\n    document.body.classList.add(\"promotions-page\");\r\n\r\n    return () => document.body.classList.remove(\"promotions-page\");\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const req = Service.read_updated({\r\n      ...User.read(),\r\n    });\r\n\r\n    req.promise.then(\r\n      (r) => {\r\n        console.info(\"Got promotions:\", r);\r\n\r\n        setPromotions(r.info);\r\n      },\r\n      (e) => {\r\n        console.warn(\"Unable to get promotions:\", e);\r\n      }\r\n    );\r\n\r\n    return () => req.cancel();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"promotions-sa\">\r\n      <div className=\"promotions-sa-head\">\r\n        <div className=\"promotions-sa-title\">\r\n          <h1>促销活动</h1>\r\n        </div>\r\n      </div>\r\n      <div className=\"promotions-sa-content\">\r\n        <div className=\"decor-n0\"></div>\r\n        <div className=\"decor-n1\"></div>\r\n        {promotions.map((promotion, i) => (\r\n          <Link className=\"banner\" to={`/promotion/${promotion.id}`} key={i}>\r\n            <div className=\"banner-inner\">\r\n              {/* <div className=\"banner-title\">\r\n\t\t\t\t\t\t\t<h4>{promotion.title}</h4>\r\n\t\t\t\t\t\t</div> */}\r\n              <div className=\"banner-inner-wrap\">\r\n                <img\r\n                  src={`https://${promotion.bannerurl}`}\r\n                  alt={promotion.title}\r\n                />\r\n              </div>\r\n              <div className=\"banner-body\">\r\n                <p>\r\n                  离活动结束: {promotion.endTime}\r\n                  <span className=\"arrow\">更多内容</span>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withAuth(Promotions, 0);\r\n"]},"metadata":{},"sourceType":"module"}