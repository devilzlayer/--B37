{"ast":null,"code":"var _jsxFileName = \"/Users/cramj/Downloads/usportproject 2/src/view/Promotions.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport { StickyProvider, Sticky } from 'react-stickup';\nimport { withAuth } from '../util/';\nimport { Promotions as Service } from '../service/';\nimport '../assets/scss/Promotions.scss';\n\nfunction Promotions() {\n  const container = useRef(null);\n  const [promotions, setPromotions] = useState([]);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    document.body.classList.add('promotions-page');\n    return () => document.body.classList.remove('promotions-page');\n  }, []);\n  useEffect(() => {\n    const req = Service.read_updated();\n    req.promise.then(r => {\n      console.log(r);\n      setPromotions(r.info);\n    }, e => {});\n    return () => req.cancel();\n  }, []);\n  return /*#__PURE__*/React.createElement(StickyProvider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promotions\",\n    ref: container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"decor-n0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"decor-n1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promotions-flex-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Sticky, {\n    container: container,\n    defaultOffsetTop: 180,\n    overflowScroll: \"end\",\n    stickyProps: {\n      className: 'decor-n2'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promotions-inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 6\n    }\n  }, promotions.map((promotion, i) => /*#__PURE__*/React.createElement(Link, {\n    className: \"banner\",\n    to: `/promotion/${promotion.id}`,\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner-inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 10\n    }\n  }, promotion.title)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `https://${promotion.bannerurl}`,\n    alt: promotion.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"banner-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 10\n    }\n  }, \"\\u79BB\\u6D3B\\u52A8\\u7ED3\\u675F: \", promotion.endTime), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 10\n    }\n  }, \"\\u66F4\\u591A\\u5185\\u5BB9\")))))), /*#__PURE__*/React.createElement(Sticky, {\n    container: container,\n    defaultOffsetTop: 180,\n    overflowScroll: \"end\",\n    stickyProps: {\n      className: 'decor-n3'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  })))));\n}\n\nexport default withAuth(Promotions, 0);","map":{"version":3,"sources":["/Users/cramj/Downloads/usportproject 2/src/view/Promotions.js"],"names":["React","useState","useEffect","useRef","Link","StickyProvider","Sticky","withAuth","Promotions","Service","container","promotions","setPromotions","window","scrollTo","document","body","classList","add","remove","req","read_updated","promise","then","r","console","log","info","e","cancel","className","map","promotion","i","id","title","bannerurl","endTime"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,cAAT,EAAyBC,MAAzB,QAAuC,eAAvC;AAEA,SAASC,QAAT,QAAyB,UAAzB;AACA,SAASC,UAAU,IAAIC,OAAvB,QAAsC,aAAtC;AAEA,OAAO,gCAAP;;AAEA,SAASD,UAAT,GAAuB;AAEtB,QAAME,SAAS,GAAGP,MAAM,CAAC,IAAD,CAAxB;AACA,QAAM,CAAEQ,UAAF,EAAcC,aAAd,IAAgCX,QAAQ,CAAC,EAAD,CAA9C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AAEfW,IAAAA,MAAM,CAACC,QAAP,CAAgB,CAAhB,EAAmB,CAAnB;AAEAC,IAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,iBAA5B;AAEA,WAAO,MAAMH,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBE,MAAxB,CAA+B,iBAA/B,CAAb;AAEA,GARQ,EAQN,EARM,CAAT;AAUAjB,EAAAA,SAAS,CAAC,MAAM;AAEf,UAAMkB,GAAG,GAAGX,OAAO,CAACY,YAAR,EAAZ;AAEAD,IAAAA,GAAG,CAACE,OAAJ,CAAYC,IAAZ,CAAiBC,CAAC,IAAI;AAErBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AAEAZ,MAAAA,aAAa,CAACY,CAAC,CAACG,IAAH,CAAb;AAEA,KAND,EAMGC,CAAC,IAAI,CAAE,CANV;AAQA,WAAO,MAAMR,GAAG,CAACS,MAAJ,EAAb;AAEA,GAdQ,EAcN,EAdM,CAAT;AAgBA,sBACC,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAC,YAAf;AAA4B,IAAA,GAAG,EAAEnB,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,eAEC;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFD,eAGC;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAEA,SAAnB;AAA8B,IAAA,gBAAgB,EAAE,GAAhD;AAAqD,IAAA,cAAc,EAAC,KAApE;AAA0E,IAAA,WAAW,EAAE;AAAEoB,MAAAA,SAAS,EAAE;AAAb,KAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADD,eAIC;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEnB,UAAU,CAACoB,GAAX,CAAe,CAACC,SAAD,EAAYC,CAAZ,kBAChB,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,QAAhB;AAAyB,IAAA,EAAE,EAAG,cAAaD,SAAS,CAACE,EAAG,EAAxD;AAA2D,IAAA,GAAG,EAAED,CAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKD,SAAS,CAACG,KAAf,CADD,CADD,eAIC;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,GAAG,EAAG,WAAUH,SAAS,CAACI,SAAU,EAAzC;AAA4C,IAAA,GAAG,EAAEJ,SAAS,CAACG,KAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CAJD,eAOC;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAAWH,SAAS,CAACK,OAArB,CADD,eAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAFD,CAPD,CADD,CADC,CADF,CAJD,eAsBC,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAE3B,SAAnB;AAA8B,IAAA,gBAAgB,EAAE,GAAhD;AAAqD,IAAA,cAAc,EAAC,KAApE;AAA0E,IAAA,WAAW,EAAE;AAAEoB,MAAAA,SAAS,EAAE;AAAb,KAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CAtBD,CAHD,CADD,CADD;AAmCA;;AAED,eAAevB,QAAQ,CAACC,UAAD,EAAa,CAAb,CAAvB","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { StickyProvider, Sticky } from 'react-stickup';\r\n\r\nimport { withAuth } from '../util/';\r\nimport { Promotions as Service } from '../service/';\r\n\r\nimport '../assets/scss/Promotions.scss';\r\n\r\nfunction Promotions () {\r\n\r\n\tconst container = useRef(null);\r\n\tconst [ promotions, setPromotions ] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\twindow.scrollTo(0, 0);\r\n\r\n\t\tdocument.body.classList.add('promotions-page');\r\n\r\n\t\treturn () => document.body.classList.remove('promotions-page');\r\n\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tconst req = Service.read_updated();\r\n\r\n\t\treq.promise.then(r => {\r\n\r\n\t\t\tconsole.log(r);\r\n\r\n\t\t\tsetPromotions(r.info);\r\n\r\n\t\t}, e => {});\r\n\r\n\t\treturn () => req.cancel();\r\n\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<StickyProvider>\r\n\t\t\t<div className=\"promotions\" ref={container}>\r\n\t\t\t\t<div className=\"decor-n0\"></div>\r\n\t\t\t\t<div className=\"decor-n1\"></div>\r\n\t\t\t\t<div className=\"promotions-flex-wrap\">\r\n\t\t\t\t\t<Sticky container={container} defaultOffsetTop={180} overflowScroll=\"end\" stickyProps={{ className: 'decor-n2' }}>\r\n\t\t\t\t\t\t<div></div>\r\n\t\t\t\t\t</Sticky>\r\n\t\t\t\t\t<div className=\"promotions-inner\">\r\n\t\t\t\t\t\t{promotions.map((promotion, i) => (\r\n\t\t\t\t\t\t<Link className=\"banner\" to={`/promotion/${promotion.id}`} key={i}>\r\n\t\t\t\t\t\t\t<div className=\"banner-inner\">\r\n\t\t\t\t\t\t\t\t<div className=\"banner-title\">\r\n\t\t\t\t\t\t\t\t\t<h4>{promotion.title}</h4>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"banner-img\">\r\n\t\t\t\t\t\t\t\t\t<img src={`https://${promotion.bannerurl}`} alt={promotion.title} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"banner-body\">\r\n\t\t\t\t\t\t\t\t\t<p>离活动结束: {promotion.endTime}</p>\r\n\t\t\t\t\t\t\t\t\t<button>更多内容</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Sticky container={container} defaultOffsetTop={180} overflowScroll=\"end\" stickyProps={{ className: 'decor-n3' }}>\r\n\t\t\t\t\t\t<div></div>\r\n\t\t\t\t\t</Sticky>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</StickyProvider>\r\n\t);\r\n\r\n}\r\n\r\nexport default withAuth(Promotions, 0);\r\n"]},"metadata":{},"sourceType":"module"}