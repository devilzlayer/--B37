{"ast":null,"code":"var _jsxFileName = \"/Users/cramj/Documents/New PWA/GIT/src/pwa/view/profile/personal/Name.js\";\nimport React, { useState, useEffect, useContext, useRef } from \"react\";\nimport { mobileModel } from \"react-device-detect\";\nimport { useHistory } from \"react-router-dom\";\nimport { Wrap, Service } from \"../\";\nimport { FormField } from \"../../../../component\";\n\nconst Name = () => {\n  const history = useHistory();\n  const {\n    userAuth: {\n      data\n    },\n    setUserAuthFN\n  } = useContext(Service.User.Context);\n  const refName = useRef(null);\n  const [formname, setFormName] = useState(\"\");\n  const form = {\n    email: data.email,\n    birthday: data.birthday,\n    phone: data.telephone,\n    qq: data.qq,\n    wechat: data.wechat || \"\",\n    device: mobileModel,\n    //\"Huawei Mate 20 Pro\",\n    updates: [{\n      text: \"4.14.116\"\n    }, {\n      text: \"Thu Apr 30 18:27:58 CSTt 2020\"\n    }]\n  };\n  const [active, setActive] = useState(false);\n  const [disabled, setDisabled] = useState(false);\n  useEffect(() => {\n    if (formname !== \"\" && formname.length > 1 && formname.length < 5) setActive(true);else setActive(false);\n  }, [formname]);\n\n  const onChange = e => {\n    const nameinput = e.target.value;\n    setFormName(nameinput);\n  };\n\n  const update = () => {\n    console.info(\"You're updating account full name:\", formname);\n    Service.User.update({ ...form,\n      ...Service.User.read(),\n      realname: formname\n    }).promise.then(r => {\n      console.info(\"✅ You have successfully updated account full name:\", r.info);\n      setActive(false);\n      setDisabled(true);\n      Service.User.session({ ...Service.User.read()\n      }).promise.then(r => setUserAuthFN(1, r.info));\n    }, e => {\n      console.warn(\"Unable to update account full name:\", e);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Wrap, {\n    className: \"profile-general\",\n    name: \"\\u771F\\u5B9E\\u59D3\\u540D\",\n    sublevel: [true, () => history.push(\"/profile/personal\")],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, disabled && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"profile-valid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 20\n    }\n  }), /*#__PURE__*/React.createElement(FormField, {\n    field: {\n      label: \"真实姓名\"\n    },\n    input: {\n      id: \"name\",\n      name: \"name\",\n      type: \"text\",\n      placeholder: \"用于提现时安全核对\",\n      maxLength: 4,\n      ref: refName,\n      onChange,\n      onInput: () => {\n        if (refName.current.value > 4) refName.current.value.slice(0, 4);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `form-button ${active && !disabled && \"form-button-active\"}`,\n    onClick: active && !disabled ? update : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, \"\\u63D0\\u4EA4\"))));\n};\n\nexport default Name;","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/GIT/src/pwa/view/profile/personal/Name.js"],"names":["React","useState","useEffect","useContext","useRef","mobileModel","useHistory","Wrap","Service","FormField","Name","history","userAuth","data","setUserAuthFN","User","Context","refName","formname","setFormName","form","email","birthday","phone","telephone","qq","wechat","device","updates","text","active","setActive","disabled","setDisabled","length","onChange","e","nameinput","target","value","update","console","info","read","realname","promise","then","r","session","warn","push","label","id","name","type","placeholder","maxLength","ref","onInput","current","slice"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport { mobileModel } from \"react-device-detect\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { Wrap, Service } from \"../\";\r\nimport { FormField } from \"../../../../component\";\r\n\r\nconst Name = () => {\r\n  const history = useHistory();\r\n\r\n  const {\r\n    userAuth: { data },\r\n    setUserAuthFN,\r\n  } = useContext(Service.User.Context);\r\n\r\n  const refName = useRef(null);\r\n\r\n  const [formname, setFormName] = useState(\"\");\r\n  const form = {\r\n    email: data.email,\r\n    birthday: data.birthday,\r\n    phone: data.telephone,\r\n    qq: data.qq,\r\n    wechat: data.wechat || \"\",\r\n    device: mobileModel, //\"Huawei Mate 20 Pro\",\r\n    updates: [{ text: \"4.14.116\" }, { text: \"Thu Apr 30 18:27:58 CSTt 2020\" }],\r\n  };\r\n\r\n  const [active, setActive] = useState(false);\r\n  const [disabled, setDisabled] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (formname !== \"\" && formname.length > 1 && formname.length < 5)\r\n      setActive(true);\r\n    else setActive(false);\r\n  }, [formname]);\r\n\r\n  const onChange = (e) => {\r\n    const nameinput = e.target.value;\r\n    setFormName(nameinput);\r\n  };\r\n\r\n  const update = () => {\r\n    console.info(\"You're updating account full name:\", formname);\r\n\r\n    Service.User.update({\r\n      ...form,\r\n      ...Service.User.read(),\r\n      realname: formname,\r\n    }).promise.then(\r\n      (r) => {\r\n        console.info(\r\n          \"✅ You have successfully updated account full name:\",\r\n          r.info\r\n        );\r\n        setActive(false);\r\n        setDisabled(true);\r\n\r\n        Service.User.session({\r\n          ...Service.User.read(),\r\n        }).promise.then((r) => setUserAuthFN(1, r.info));\r\n      },\r\n      (e) => {\r\n        console.warn(\"Unable to update account full name:\", e);\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Wrap\r\n      className=\"profile-general\"\r\n      name=\"真实姓名\"\r\n      sublevel={[true, () => history.push(\"/profile/personal\")]}\r\n    >\r\n      {disabled && <span className=\"profile-valid\" />}\r\n      <FormField\r\n        field={{ label: \"真实姓名\" }}\r\n        input={{\r\n          id: \"name\",\r\n          name: \"name\",\r\n          type: \"text\",\r\n          placeholder: \"用于提现时安全核对\",\r\n          maxLength: 4,\r\n          ref: refName,\r\n          onChange,\r\n          onInput: () => {\r\n            if (refName.current.value > 4) refName.current.value.slice(0, 4);\r\n          },\r\n        }}\r\n      />\r\n      <div className=\"submit\">\r\n        <div\r\n          className={`form-button ${\r\n            active && !disabled && \"form-button-active\"\r\n          }`}\r\n          onClick={active && !disabled ? update : null}\r\n        >\r\n          <span>提交</span>\r\n        </div>\r\n      </div>\r\n    </Wrap>\r\n  );\r\n};\r\n\r\nexport default Name;\r\n"]},"metadata":{},"sourceType":"module"}