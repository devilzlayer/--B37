{"ast":null,"code":"import _objectSpread from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{map,isEmpty}from'lodash';import{Service}from'../';var CardItem=function CardItem(props){var label=props.label,time=props.time,value=props.value,ratio=props.ratio,status=props.status,className=props.className;return/*#__PURE__*/React.createElement(\"div\",{className:\"rebate-history-card-item \".concat(className?className:\"\")},/*#__PURE__*/React.createElement(\"div\",{className:\"cl-item rebate-history-card-text\"},/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-text\"},label),/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-time\"},time)),/*#__PURE__*/React.createElement(\"div\",{className:\"cl-item rebate-history-card-value\"},/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-amount\"},\"\\u8FD4\\u6C34\\u91D1\\u989D: \",/*#__PURE__*/React.createElement(\"span\",null,value)),/*#__PURE__*/React.createElement(\"p\",{className:\"cl-card-status\"},status,\" \",ratio&&/*#__PURE__*/React.createElement(\"span\",null,ratio))));};var RebateHistory=function RebateHistory(props){var id=props.id,refresh=props.refresh,onStop=props.onStop;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];useEffect(function(){if(refresh==id){setLoad(true);}},[refresh]);useEffect(function(){var fetch=function fetch(){// console.log(User.read())\nvar req=Service.Transaction.read(_objectSpread(_objectSpread({},Service.User.read()),{},{record_type:\"washcode\",type:\"record_list\"}));req.promise.then(function(result){// console.log(result);\nif(result.status===1){setItems(result.info);setLoad(false);onStop();}},function(e){console.log(\"Unable to response:\",e);});};fetch();},[load]);if(!isEmpty(items)){return/*#__PURE__*/React.createElement(\"div\",{className:\"rebate-history-card-body\"},map(items,function(obj,i){return/*#__PURE__*/React.createElement(CardItem,{key:i,label:obj.game_id,time:obj.add_date,value:obj.money,ratio:obj.ratio,status:\"返水比例\"});}));}return/*#__PURE__*/React.createElement(\"div\",{className:\"no-transactions\"},/*#__PURE__*/React.createElement(\"div\",{className:\"image-box\"}),/*#__PURE__*/React.createElement(\"span\",null,\"\\u6682\\u65E0\\u8BB0\\u5F55\"));};export default RebateHistory;","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/ubet-project (1)/src/view/profile/transferhistory/rebatehistory.js"],"names":["React","useEffect","useState","map","isEmpty","Service","CardItem","props","label","time","value","ratio","status","className","RebateHistory","id","refresh","onStop","items","setItems","load","setLoad","fetch","req","Transaction","read","User","record_type","type","promise","then","result","info","e","console","log","obj","i","game_id","add_date","money"],"mappings":"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","sourcesContent":["import React  ,{ useEffect, useState }from \"react\";\r\nimport { map , isEmpty} from 'lodash'\r\n\r\nimport { Service } from '../'\r\n\r\n\r\nconst CardItem = (props) => {\r\n    const { label, time, value, ratio, status, className } = props;\r\n    return (\r\n      <div className={`rebate-history-card-item ${className ? className : \"\"}`}>\r\n        <div className=\"cl-item rebate-history-card-text\">\r\n          <p className=\"cl-card-text\">{label}</p>\r\n          <p className=\"cl-card-time\">{time}</p>\r\n        </div>\r\n        <div className=\"cl-item rebate-history-card-value\">\r\n          <p className=\"cl-card-amount\">\r\n            返水金额: <span>{value}</span>\r\n          </p>\r\n          <p className=\"cl-card-status\">\r\n            {status} {ratio && <span>{ratio}</span>}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n};\r\n\r\nconst RebateHistory = (props) => {\r\n    const { id ,refresh , onStop } = props\r\n\r\n    const [items, setItems] = useState([]);\r\n    const [load, setLoad] = useState(false);\r\n\r\n    useEffect(() =>{\r\n      if(refresh == id ){\r\n        setLoad(true)\r\n      }\r\n    },[refresh])\r\n\r\n    useEffect(() => {\r\n        const fetch = () => {\r\n          // console.log(User.read())\r\n\r\n          const req = Service.Transaction.read({\r\n              ...Service.User.read(),\r\n              record_type: \"washcode\",\r\n              type: \"record_list\",\r\n          });\r\n\r\n          req.promise.then((result) => {\r\n              // console.log(result);\r\n              if (result.status === 1) {\r\n                  setItems(result.info);\r\n                  setLoad(false);\r\n                  onStop()\r\n\r\n              }\r\n          },(e) => {\r\n              console.log(\"Unable to response:\", e);\r\n          })\r\n        };\r\n        fetch();\r\n    }, [load]);\r\n\r\n    if(!isEmpty(items)){\r\n        return  <div className=\"rebate-history-card-body\">\r\n                    {\r\n                    map(items, (obj, i) => {\r\n                        return (\r\n                        <CardItem\r\n                            key={i}\r\n                            label={obj.game_id}\r\n                            time={obj.add_date}\r\n                            value={obj.money}\r\n                            ratio={obj.ratio}\r\n                            status={\"返水比例\"}\r\n                        />\r\n                        );\r\n                    })\r\n                    }\r\n\r\n                </div>\r\n    }\r\n\r\n    return  <div className=\"no-transactions\">\r\n                <div className=\"image-box\" />\r\n                <span>暂无记录</span>\r\n            </div>\r\n\r\n\r\n}\r\n\r\nexport default RebateHistory"]},"metadata":{},"sourceType":"module"}