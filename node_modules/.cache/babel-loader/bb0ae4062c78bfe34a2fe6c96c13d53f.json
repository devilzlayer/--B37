{"ast":null,"code":"var _jsxFileName = \"/Users/cramj/Documents/New PWA/ubet-project (1)/src/view/profile/Referral.js\";\nimport React, { useEffect, useState } from \"react\";\nimport QRCode from \"react-qr-code\";\nimport { Service } from \"./\";\nimport ToolTip from \"../../pwa/component/ToolTip\";\nimport Wrap from \"./Wrap\";\nimport \"../../assets/scss/profile/Referral.scss\";\n\nconst Referral = () => {\n  const [tool, setTool] = useState(false);\n  const [modal, setModal] = useState(\"\");\n  const {\n    account\n  } = Service.User.read();\n  const qrLink = `${window.location.origin}/?act=${account}`;\n\n  const copyToClipboard = e => {\n    // navigator.clipboard.writeText(qrLink);\n    const el = document.createElement(\"textarea\");\n    el.value = qrLink;\n    el.setAttribute(\"readonly\", \"\");\n    el.style.position = \"absolute\";\n    el.style.left = \"-9999px\";\n    document.body.appendChild(el);\n    el.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(el);\n    setTool(true);\n  };\n\n  useEffect(() => {\n    setTimeout(() => {\n      setTool(false);\n    }, 3000);\n  }, [tool]);\n  const [agents, setAgents] = useState([]);\n  const [promotions, setPromotions] = useState([]);\n  useEffect(() => {\n    const response = Service.Transaction.read({\n      record_type: \"agent\",\n      ...Service.User.read()\n    });\n    response.promise.then(r => {\n      // console.log(\"Referral Agent List\", r);\n      setAgents(r.info);\n    }, e => {// console.log(\"Unable to get records:\", e);\n    });\n    const res = Service.Transaction.read({\n      record_type: \"promotions\",\n      ...Service.User.read()\n    });\n    res.promise.then(r => {\n      console.log(\"Referral Promotions List\", r);\n      setPromotions(r.info);\n    }, e => {\n      console.log(\"Unable to get records:\", e);\n    });\n  }, []);\n\n  const referral = (account, regTime) => {\n    const req = Service.User.referralGift({\n      act: \"applyFriendsPro\",\n      acc: account,\n      regTime: regTime,\n      ...Service.User.read()\n    });\n    req.promise.then(r => {\n      console.log(\"Referral Success!\");\n      setModal(r.message);\n    }, e => {\n      console.log(\"Referral Fail!\", e);\n      setModal(e);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Wrap, {\n    className: \"profile-referral-desktop \",\n    title: \"邀请奖励\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-section section-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-wrap-inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-wrap-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-link-caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"\\u60A8\\u7684\\u4E13\\u5C5E\\u63A8\\u8350\\u94FE\\u63A5\\u53CA\\u4E8C\\u7EF4\\u7801:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-banner-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-banner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-link-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, qrLink), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"module-border-wrap\",\n    onClick: copyToClipboard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"module\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ToolTip, {\n    show: tool,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 19\n    }\n  }, \"\\u590D\\u5236\\u94FE\\u63A5\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-qr-code-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-qr-code-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(QRCode, {\n    value: qrLink,\n    size: 155,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-qr-code-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, \"\\u4ED6\\u4EBA\\u626B\\u4E00\\u626B\\u4E8C\\u7EF4\\u7801\\u5373\\u53EF\\u6210\\u4E3A\\u60A8\\u7684\\u63A8\\u8350\\u597D\\u53CB\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"special\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, \"\\u8BF7\\u4F7F\\u7528\\u6D4F\\u89C8\\u5668\\u626B\\u63CF\\u4E8C\\u7EF4\\u7801(\\u5982UC,QQ\\u7B49\\u6D4F\\u89C8\\u5668)\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, \"\\u597D\\u53CB\\u6CE8\\u518C\\u8BB0\\u5F55\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }, \"\\u597D\\u53CB\\u8D26\\u53F7\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, \"\\u6CE8\\u518C\\u65F6\\u95F4\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text smaller\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }, \"\\u64CD\\u4F5C\"))), agents.length !== 0 ? agents.map(({\n    regTime,\n    account\n  }, i) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-body\",\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }, account)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }, regTime)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text special smaller\",\n    onClick: () => referral(account, regTime),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  }, \"\\u7533\\u8BF7\\u793C\\u91D1\")))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 23\n    }\n  }, \"\\u6682\\u65E0\\u8BB0\\u5F55\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, \"\\u597D\\u53CB\\u63A8\\u8350\\u5F69\\u91D1\\u7533\\u8BF7\\u8BB0\\u5F55 \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, \"\\u5F69\\u91D1\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text smaller\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 21\n    }\n  }, \"\\u597D\\u53CB\\u8D26\\u53F7\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text smaller\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 21\n    }\n  }, \"\\u7533\\u8BF7\\u72B6\\u6001\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 21\n    }\n  }, \"\\u7533\\u8BF7\\u65F6\\u95F4\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 21\n    }\n  }, \"\\u5907\\u6CE8\"))), promotions.length !== 0 ? promotions.map((data, i) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-body\",\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 25\n    }\n  }, data.apply_money)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text smaller\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 25\n    }\n  }, data.invite_person)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text smaller\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 25\n    }\n  }, data.state)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }, data.add_time)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  }, data.check_info ? data.check_info : \"--\")))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"referral-tab-text large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 23\n    }\n  }, \"\\u6682\\u65E0\\u8BB0\\u5F55\")))))))));\n};\n\nexport default Referral;","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/ubet-project (1)/src/view/profile/Referral.js"],"names":["React","useEffect","useState","QRCode","Service","ToolTip","Wrap","Referral","tool","setTool","modal","setModal","account","User","read","qrLink","window","location","origin","copyToClipboard","e","el","document","createElement","value","setAttribute","style","position","left","body","appendChild","select","execCommand","removeChild","setTimeout","agents","setAgents","promotions","setPromotions","response","Transaction","record_type","promise","then","r","info","res","console","log","referral","regTime","req","referralGift","act","acc","message","length","map","i","data","apply_money","invite_person","state","add_time","check_info"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport QRCode from \"react-qr-code\";\r\n\r\nimport { Service } from \"./\";\r\nimport ToolTip from \"../../pwa/component/ToolTip\";\r\n\r\nimport Wrap from \"./Wrap\";\r\n\r\nimport \"../../assets/scss/profile/Referral.scss\";\r\n\r\nconst Referral = () => {\r\n  const [tool, setTool] = useState(false);\r\n  const [modal, setModal] = useState(\"\");\r\n\r\n  const { account } = Service.User.read();\r\n\r\n  const qrLink = `${window.location.origin}/?act=${account}`;\r\n\r\n  const copyToClipboard = (e) => {\r\n    // navigator.clipboard.writeText(qrLink);\r\n    const el = document.createElement(\"textarea\");\r\n    el.value = qrLink;\r\n    el.setAttribute(\"readonly\", \"\");\r\n    el.style.position = \"absolute\";\r\n    el.style.left = \"-9999px\";\r\n    document.body.appendChild(el);\r\n    el.select();\r\n    document.execCommand(\"copy\");\r\n    document.body.removeChild(el);\r\n    setTool(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      setTool(false);\r\n    }, 3000);\r\n  }, [tool]);\r\n\r\n  const [agents, setAgents] = useState([]);\r\n\r\n  const [promotions, setPromotions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const response = Service.Transaction.read({\r\n      record_type: \"agent\",\r\n      ...Service.User.read(),\r\n    });\r\n    response.promise.then(\r\n      (r) => {\r\n        // console.log(\"Referral Agent List\", r);\r\n        setAgents(r.info);\r\n      },\r\n      (e) => {\r\n        // console.log(\"Unable to get records:\", e);\r\n      }\r\n    );\r\n\r\n    const res = Service.Transaction.read({\r\n      record_type: \"promotions\",\r\n      ...Service.User.read(),\r\n    });\r\n    res.promise.then(\r\n      (r) => {\r\n        console.log(\"Referral Promotions List\", r);\r\n        setPromotions(r.info);\r\n      },\r\n      (e) => {\r\n        console.log(\"Unable to get records:\", e);\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  const referral = (account, regTime) => {\r\n    const req = Service.User.referralGift({\r\n      act: \"applyFriendsPro\",\r\n      acc: account,\r\n      regTime: regTime,\r\n      ...Service.User.read(),\r\n    });\r\n\r\n    req.promise.then(\r\n      (r) => {\r\n        console.log(\"Referral Success!\");\r\n        setModal(r.message);\r\n      },\r\n      (e) => {\r\n        console.log(\"Referral Fail!\", e);\r\n        setModal(e);\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Wrap className=\"profile-referral-desktop \" title={\"邀请奖励\"}>\r\n      <div className=\"profile-section section-box\">\r\n        <div className=\"referral-wrap-inner\">\r\n          <div className=\"referral-wrap-content\">\r\n            <div className=\"referral-link-caption\">\r\n              您的专属推荐链接及二维码:\r\n            </div>\r\n            <div className=\"referral-banner-wrap\">\r\n              <div className=\"referral-banner\" />\r\n            </div>\r\n\r\n            <div className=\"referral-link-text\">\r\n              <p>{qrLink}</p>\r\n              <div className=\"module-border-wrap\" onClick={copyToClipboard}>\r\n                <div className=\"module\">\r\n                  <ToolTip show={tool} />\r\n                  <span>复制链接</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"referral-qr-code-wrap\">\r\n              <div className=\"referral-qr-code-image\">\r\n                <QRCode value={qrLink} size={155} />\r\n              </div>\r\n              <div className=\"referral-qr-code-text\">\r\n                <p>他人扫一扫二维码即可成为您的推荐好友</p>\r\n                <p className=\"special\">\r\n                  请使用浏览器扫描二维码(如UC,QQ等浏览器)\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"referral-tab\">\r\n              <div className=\"referral-tab-caption\">好友注册记录</div>\r\n              <div className=\"referral-tab-wrap\">\r\n                <div className=\"referral-tab-head\">\r\n                  <div className=\"referral-tab-text\">\r\n                    <span>好友账号</span>\r\n                  </div>\r\n                  <div className=\"referral-tab-text\">\r\n                    <span>注册时间</span>\r\n                  </div>\r\n                  <div className=\"referral-tab-text smaller\">\r\n                    <span>操作</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {agents.length !== 0 ? (\r\n                  agents.map(({ regTime, account }, i) => (\r\n                    <div className=\"referral-tab-body\" key={i}>\r\n                      <div className=\"referral-tab-text\">\r\n                        <span>{account}</span>\r\n                      </div>\r\n                      <div className=\"referral-tab-text\">\r\n                        <span>{regTime}</span>\r\n                      </div>\r\n                      <div\r\n                        className=\"referral-tab-text special smaller\"\r\n                        onClick={() => referral(account, regTime)}\r\n                      >\r\n                        <span>申请礼金</span>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <div className=\"referral-tab-body\">\r\n                    <div className=\"referral-tab-text large\">\r\n                      <span>暂无记录</span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"referral-tab\">\r\n              <div className=\"referral-tab-caption\">好友推荐彩金申请记录 </div>\r\n              <div className=\"referral-tab-wrap\">\r\n                <div className=\"referral-tab-head\">\r\n                  <div className=\"referral-tab-text xs\">\r\n                    <span>彩金</span>\r\n                  </div>\r\n                  <div className=\"referral-tab-text smaller\">\r\n                    <span>好友账号</span>\r\n                  </div>\r\n                  <div className=\"referral-tab-text smaller\">\r\n                    <span>申请状态</span>\r\n                  </div>\r\n                  <div className=\"referral-tab-text medium\">\r\n                    <span>申请时间</span>\r\n                  </div>\r\n                  <div className=\"referral-tab-text xs\">\r\n                    <span>备注</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {promotions.length !== 0 ? (\r\n                  promotions.map((data, i) => (\r\n                    <div className=\"referral-tab-body\" key={i}>\r\n                      <div className=\"referral-tab-text xs\">\r\n                        <span>{data.apply_money}</span>\r\n                      </div>\r\n                      <div className=\"referral-tab-text smaller\">\r\n                        <span>{data.invite_person}</span>\r\n                      </div>\r\n                      <div className=\"referral-tab-text smaller\">\r\n                        <span>{data.state}</span>\r\n                      </div>\r\n                      <div className=\"referral-tab-text medium\">\r\n                        <span>{data.add_time}</span>\r\n                      </div>\r\n                      <div className=\"referral-tab-text xs\">\r\n                        <span>{data.check_info ? data.check_info : \"--\"}</span>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <div className=\"referral-tab-body\">\r\n                    <div className=\"referral-tab-text large\">\r\n                      <span>暂无记录</span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Wrap>\r\n  );\r\n};\r\n\r\nexport default Referral;\r\n"]},"metadata":{},"sourceType":"module"}