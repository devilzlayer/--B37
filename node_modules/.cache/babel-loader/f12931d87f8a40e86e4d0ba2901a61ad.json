{"ast":null,"code":"import _objectSpread from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from\"react\";import{useHistory}from\"react-router-dom\";import{Link}from\"react-router-dom\";import{User,Transaction}from\"../../service\";import{map,find}from\"lodash\";import Slider from\"react-slick\";import\"slick-carousel/slick/slick.css\";import\"slick-carousel/slick/slick-theme.css\";import{Wrap}from\"../view/profile/\";import{vipSlideValue,vipProgress}from\"./vip/values\";import\"../assets/scss/Vip.scss\";import{withAuth}from\"../util/\";var Vip=function Vip(){var history=useHistory();var slideItem=useRef(null);var slideBanner=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),vipCount=_useState4[0],setVipCount=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),vipLevel=_useState6[0],setVipLevel=_useState6[1];var _useState7=useState(0.0),_useState8=_slicedToArray(_useState7,2),vipAmount=_useState8[0],setVipAmount=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),viProgVal=_useState10[0],setViProgVal=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),tab=_useState12[0],setTab=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),roll=_useState14[0],setRoll=_useState14[1];var _useState15=useState([0,1,2,3,4,5,6,7,8,9,10]),_useState16=_slicedToArray(_useState15,2),banners=_useState16[0],setBanners=_useState16[1];useEffect(function(){setLoading(true);var response=Transaction.read(_objectSpread(_objectSpread({},User.read()),{},{type:\"get_vip_level\"}));response.promise.then(function(r){// console.log(r)\nsetLoading(false);if(r.status===1){var vlvp=Number(r.info.viplevel);var vamn=Number(r.info.accountnum);setVipCount(vlvp);setVipLevel(vlvp);var vpP=find(vipProgress,function(obj){return obj.level===vlvp;});setVipAmount(vamn);var valPer=vamn*100/vpP.amount;setViProgVal(valPer);if(vlvp<10){setVipLevel(Number(vlvp)+1);}}},function(e){// console.log(e)\nsetLoading(false);});},[]);var bannerSetting={};var bodySetting={};if(vipCount!=null){bannerSetting={dots:false,arrows:false,infinite:false,slidesToShow:1,centerMode:true,centerPadding:\"50px\",className:\"vip-slider\",accessibility:false,beforeChange:function beforeChange(oldIndex,newIndex){slideItem.current.slickGoTo(newIndex);},initialSlide:vipCount};bodySetting={dots:false,arrows:false,swipe:false,draggable:false,infinite:false,speed:500,className:\"vip-slider-body\",slidesToShow:1,slidesToScroll:1,accessibility:false,initialSlide:vipCount};var checkScrollTop=function checkScrollTop(){// console.log(window.pageYOffset)\nif(window.pageYOffset>80){setRoll(true);}else{setRoll(false);}};window.addEventListener(\"scroll\",checkScrollTop);return/*#__PURE__*/React.createElement(Wrap,{className:\"vip-wrap privilege \".concat(roll?\"roll\":\"\"),centerName:\"VIP\\u8BE6\\u60C5\",faq:false,isLoading:loading},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-wrap-inner-bg\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-wrap-inner-top-header tab-\".concat(tab)},/*#__PURE__*/React.createElement(Link,{to:\"vip\",className:\"vip-wrap-inner-h-text active\"},\"VIP\\u7279\\u6743\",tab===0?/*#__PURE__*/React.createElement(\"div\",{className:\"vip-wrap-inner-h-switch\"}):null),/*#__PURE__*/React.createElement(Link,{to:\"vip-details\",className:\"vip-wrap-inner-h-text\"},\"VIP\\u8BE6\\u60C5\")),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-wrap-inner\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-wrap-inner-container\"},/*#__PURE__*/React.createElement(Slider,Object.assign({},bannerSetting,{ref:slideBanner}),map(vipSlideValue,function(obj,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"vip-wrap-inner-width\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-wrap-inner-vip-banner vip-banner\".concat(i,\" \").concat(vipCount>=i?\"unlocked\":null)}));})),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-wrap-top-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-wrap-t-b-range\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-wrap-range-span vp-\".concat(vipCount)},\"VIP\",vipCount),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-wrap-range-span vp-\".concat(vipLevel)},\"VIP\",vipLevel),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-wrap-range-line\"},/*#__PURE__*/React.createElement(\"span\",{className:\"vip-per-val\",style:{left:viProgVal}},viProgVal,\"%\"),/*#__PURE__*/React.createElement(\"span\",{className:\"vip-per-range\",style:{width:\"\".concat(viProgVal,\"%\")}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-wrap-t-b-caption\"},\"\\u60A8\\u5DF2\\u5B8C\\u6210\",vipAmount,\"\\u6D41\\u6C34 \\uFF08\\u6BCF\\u65E516\\u70B9\\u66F4\\u65B0\\uFF09\")),/*#__PURE__*/React.createElement(Slider,Object.assign({},bodySetting,{ref:slideItem}),map(vipSlideValue,function(obj,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"vip-section-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-section-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-title\"},/*#__PURE__*/React.createElement(\"h2\",null,\"VIP\\u7279\\u6743\"),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-b-item rocket\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-b-box\"},/*#__PURE__*/React.createElement(\"i\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-b-item-cont\"},/*#__PURE__*/React.createElement(\"span\",{className:\"value\"},obj.item1,\" \",/*#__PURE__*/React.createElement(\"small\",null,\"\\u5143\")),/*#__PURE__*/React.createElement(\"span\",{className:\"text\"},\"\\u5347\\u7EA7\\u793C\\u91D1\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-b-item pocket\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-b-box\"},/*#__PURE__*/React.createElement(\"i\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-b-item-cont\"},/*#__PURE__*/React.createElement(\"span\",{className:\"value\"},obj.item2,\" \",/*#__PURE__*/React.createElement(\"small\",null,\"\\u5143\")),/*#__PURE__*/React.createElement(\"span\",{className:\"text\"},\"\\u6BCF\\u6708\\u7EA2\\u5305\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-b-item graph\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-b-box\"},/*#__PURE__*/React.createElement(\"i\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-b-item-cont\"},/*#__PURE__*/React.createElement(\"span\",{className:\"value\"},obj.item3,\" \",/*#__PURE__*/React.createElement(\"small\",null,\"\\u6B21\")),/*#__PURE__*/React.createElement(\"span\",{className:\"text\"},\"\\u63D0\\u6B3E\\u6B21\\u6570\\u63D0\\u5347\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-b-item coins\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-b-box\"},/*#__PURE__*/React.createElement(\"i\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-b-item-cont\"},/*#__PURE__*/React.createElement(\"span\",{className:\"value\"},obj.item4,\"\\u4E07\",/*#__PURE__*/React.createElement(\"small\",null,\"/\\u65E5\")),/*#__PURE__*/React.createElement(\"span\",{className:\"text\"},\"\\u63D0\\u6B3E\\u989D\\u5EA6\\u63D0\\u5347\"))))))),i>=5&&/*#__PURE__*/React.createElement(\"div\",{className:\"vip-section-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-title\"},/*#__PURE__*/React.createElement(\"h2\",null,\"VIP\\u7279\\u6743\"),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-item-special\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-item-special-gift-image\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-item-special-value\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u751F\\u65E5\\u793C\\u5305\"),/*#__PURE__*/React.createElement(\"span\",{className:\"value\"},/*#__PURE__*/React.createElement(\"small\",null,\"\\uFFE5\"),obj.special)))))),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-section-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-title\"},/*#__PURE__*/React.createElement(\"h2\",null,\"VIP\\u4F18\\u60E0\"),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item-title\"},obj.grid1,\"%\"),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item-text\"},\"\\u4F53\\u80B2\\u8FD4\\u6C34\")),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item-title\"},obj.grid2,\"%\"),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item-text\"},\"\\u7535\\u7ADE\\u8FD4\\u6C34\")),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item-title\"},obj.grid3,\"%\"),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item-text\"},\"\\u7BEE\\u7403\\u8FD4\\u6C34\")),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item-title\"},obj.grid4,\"%\"),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item-text\"},\"\\u771F\\u4EBA\\u8FD4\\u6C34\")),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item-title\"},obj.grid5,\"%\"),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item-text\"},\"\\u68CB\\u724C\\u8FD4\\u6C34\")),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item-title\"},obj.grid6,\"%\"),/*#__PURE__*/React.createElement(\"div\",{className:\"vip-s-i-body-cont-item-text\"},\"\\u7535\\u5B50\\u8FD4\\u6C34\")))))));})))));}return null;};export default withAuth(Vip,1);","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/ubet-project (1)/src/pwa/view/Vip.js"],"names":["React","useEffect","useState","useRef","useHistory","Link","User","Transaction","map","find","Slider","Wrap","vipSlideValue","vipProgress","withAuth","Vip","history","slideItem","slideBanner","loading","setLoading","vipCount","setVipCount","vipLevel","setVipLevel","vipAmount","setVipAmount","viProgVal","setViProgVal","tab","setTab","roll","setRoll","banners","setBanners","response","read","type","promise","then","r","status","vlvp","Number","info","viplevel","vamn","accountnum","vpP","obj","level","valPer","amount","e","bannerSetting","bodySetting","dots","arrows","infinite","slidesToShow","centerMode","centerPadding","className","accessibility","beforeChange","oldIndex","newIndex","current","slickGoTo","initialSlide","swipe","draggable","speed","slidesToScroll","checkScrollTop","window","pageYOffset","addEventListener","i","left","width","item1","item2","item3","item4","special","grid1","grid2","grid3","grid4","grid5","grid6"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { User, Transaction } from \"../../service\";\r\n\r\nimport { map, find } from \"lodash\";\r\nimport Slider from \"react-slick\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\nimport { Wrap } from \"../view/profile/\";\r\n\r\nimport { vipSlideValue, vipProgress } from \"./vip/values\";\r\nimport \"../assets/scss/Vip.scss\";\r\nimport { withAuth } from \"../util/\";\r\n\r\nconst Vip = () => {\r\n  const history = useHistory();\r\n  const slideItem = useRef(null);\r\n  const slideBanner = useRef(null);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [vipCount, setVipCount] = useState(null);\r\n  const [vipLevel, setVipLevel] = useState(1);\r\n  const [vipAmount, setVipAmount] = useState(0.0);\r\n  const [viProgVal, setViProgVal] = useState(0);\r\n\r\n  const [tab, setTab] = useState(0);\r\n  const [roll, setRoll] = useState(0);\r\n  const [banners, setBanners] = useState([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const response = Transaction.read({\r\n      ...User.read(),\r\n      type: \"get_vip_level\",\r\n    });\r\n\r\n    response.promise.then(\r\n      (r) => {\r\n        // console.log(r)\r\n        setLoading(false);\r\n        if (r.status === 1) {\r\n          const vlvp = Number(r.info.viplevel);\r\n          const vamn = Number(r.info.accountnum);\r\n\r\n          setVipCount(vlvp);\r\n          setVipLevel(vlvp);\r\n          const vpP = find(vipProgress, (obj) => obj.level === vlvp);\r\n          setVipAmount(vamn);\r\n          const valPer = (vamn * 100) / vpP.amount;\r\n          setViProgVal(valPer);\r\n\r\n          if (vlvp < 10) {\r\n            setVipLevel(Number(vlvp) + 1);\r\n          }\r\n        }\r\n      },\r\n      (e) => {\r\n        // console.log(e)\r\n        setLoading(false);\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  let bannerSetting = {};\r\n  let bodySetting = {};\r\n\r\n  if (vipCount != null) {\r\n    bannerSetting = {\r\n      dots: false,\r\n      arrows: false,\r\n      infinite: false,\r\n      slidesToShow: 1,\r\n      centerMode: true,\r\n      centerPadding: \"50px\",\r\n      className: \"vip-slider\",\r\n      accessibility: false,\r\n      beforeChange: (oldIndex, newIndex) => {\r\n        slideItem.current.slickGoTo(newIndex);\r\n      },\r\n      initialSlide: vipCount,\r\n    };\r\n\r\n    bodySetting = {\r\n      dots: false,\r\n      arrows: false,\r\n      swipe: false,\r\n      draggable: false,\r\n      infinite: false,\r\n      speed: 500,\r\n      className: \"vip-slider-body\",\r\n      slidesToShow: 1,\r\n      slidesToScroll: 1,\r\n      accessibility: false,\r\n      initialSlide: vipCount,\r\n    };\r\n\r\n    const checkScrollTop = () => {\r\n      // console.log(window.pageYOffset)\r\n      if (window.pageYOffset > 80) {\r\n        setRoll(true);\r\n      } else {\r\n        setRoll(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"scroll\", checkScrollTop);\r\n\r\n    return (\r\n      <Wrap\r\n        className={`vip-wrap privilege ${roll ? \"roll\" : \"\"}`}\r\n        centerName=\"VIP详情\"\r\n        faq={false}\r\n        isLoading={loading}\r\n      >\r\n        <div className=\"vip-wrap-inner-bg\" />\r\n        <div className={`vip-wrap-inner-top-header tab-${tab}`}>\r\n          <Link to=\"vip\" className={`vip-wrap-inner-h-text active`}>\r\n            VIP特权\r\n            {tab === 0 ? <div className={`vip-wrap-inner-h-switch`} /> : null}\r\n          </Link>\r\n          <Link to=\"vip-details\" className={`vip-wrap-inner-h-text`}>\r\n            VIP详情\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"vip-wrap-inner\">\r\n          <div className=\"vip-wrap-inner-container\">\r\n            {/* <div className=\"vip-wrap-inner-vip-banner vip-banner4\" /> */}\r\n            <Slider {...bannerSetting} ref={slideBanner}>\r\n              {map(vipSlideValue, (obj, i) => (\r\n                <div key={i} className=\"vip-wrap-inner-width\">\r\n                  <div\r\n                    className={`vip-wrap-inner-vip-banner vip-banner${i} ${vipCount >= i ? `unlocked` : null}`}\r\n                  />\r\n                </div>\r\n              ))}\r\n            </Slider>\r\n\r\n            <div className=\"vip-wrap-top-box\">\r\n              <div className=\"vip-wrap-t-b-range\">\r\n                <div className={`vip-wrap-range-span vp-${vipCount}`}>\r\n                  VIP{vipCount}\r\n                </div>\r\n                <div className={`vip-wrap-range-span vp-${vipLevel}`}>\r\n                  VIP{vipLevel}\r\n                </div>\r\n                <div className=\"vip-wrap-range-line\">\r\n                  <span className=\"vip-per-val\" style={{ left: viProgVal }}>\r\n                    {viProgVal}%\r\n                  </span>\r\n                  <span\r\n                    className=\"vip-per-range\"\r\n                    style={{ width: `${viProgVal}%` }}\r\n                  ></span>\r\n                </div>\r\n              </div>\r\n              <div className=\"vip-wrap-t-b-caption\">\r\n                您已完成{vipAmount}流水 （每日16点更新）\r\n              </div>\r\n            </div>\r\n\r\n            <Slider {...bodySetting} ref={slideItem}>\r\n              {map(vipSlideValue, (obj, i) => {\r\n                return (\r\n                  <div key={i} className=\"vip-section-container\">\r\n                    <div className=\"vip-section-item\">\r\n                      <div className=\"vip-s-i-title\">\r\n                        <h2>VIP特权</h2>\r\n\r\n                        <div className=\"vip-s-i-body\">\r\n                          <div className=\"vip-s-i-b-item rocket\">\r\n                            <div className=\"vip-s-i-b-box\">\r\n                              <i />\r\n                              <div className=\"vip-b-item-cont\">\r\n                                <span className=\"value\">\r\n                                  {obj.item1} <small>元</small>\r\n                                </span>\r\n                                <span className=\"text\">升级礼金</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"vip-s-i-b-item pocket\">\r\n                            <div className=\"vip-s-i-b-box\">\r\n                              <i />\r\n                              <div className=\"vip-b-item-cont\">\r\n                                <span className=\"value\">\r\n                                  {obj.item2} <small>元</small>\r\n                                </span>\r\n                                <span className=\"text\">每月红包</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"vip-s-i-b-item graph\">\r\n                            <div className=\"vip-s-i-b-box\">\r\n                              <i />\r\n                              <div className=\"vip-b-item-cont\">\r\n                                <span className=\"value\">\r\n                                  {obj.item3} <small>次</small>\r\n                                </span>\r\n                                <span className=\"text\">提款次数提升</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"vip-s-i-b-item coins\">\r\n                            <div className=\"vip-s-i-b-box\">\r\n                              <i />\r\n                              <div className=\"vip-b-item-cont\">\r\n                                <span className=\"value\">\r\n                                  {obj.item4}万<small>/日</small>\r\n                                </span>\r\n                                <span className=\"text\">提款额度提升</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    {i >= 5 && (\r\n                      <div className=\"vip-section-item\">\r\n                        <div className=\"vip-s-i-title\">\r\n                          <h2>VIP特权</h2>\r\n                          <div className=\"vip-s-i-body\">\r\n                            <div className=\"vip-item-special\">\r\n                              <div className=\"vip-item-special-gift-image\" />\r\n                              <div className=\"vip-item-special-value\">\r\n                                <span>生日礼包</span>\r\n                                <span className=\"value\">\r\n                                  <small>￥</small>\r\n                                  {obj.special}\r\n                                </span>\r\n                              </div>\r\n                              {/* <div className=\"vip-item-special-button\">立即领取</div> */}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"vip-section-item\">\r\n                      <div className=\"vip-s-i-title\">\r\n                        <h2>VIP优惠</h2>\r\n\r\n                        <div className=\"vip-s-i-body\">\r\n                          <div className=\"vip-s-i-body-cont-box\">\r\n                            <div className=\"vip-s-i-body-cont-item\">\r\n                              <div className=\"vip-s-i-body-cont-item-title\">\r\n                                {obj.grid1}%\r\n                              </div>\r\n                              <div className=\"vip-s-i-body-cont-item-text\">\r\n                                体育返水\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"vip-s-i-body-cont-item\">\r\n                              <div className=\"vip-s-i-body-cont-item-title\">\r\n                                {obj.grid2}%\r\n                              </div>\r\n                              <div className=\"vip-s-i-body-cont-item-text\">\r\n                                电竞返水\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"vip-s-i-body-cont-item\">\r\n                              <div className=\"vip-s-i-body-cont-item-title\">\r\n                                {obj.grid3}%\r\n                              </div>\r\n                              <div className=\"vip-s-i-body-cont-item-text\">\r\n                                篮球返水\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"vip-s-i-body-cont-item\">\r\n                              <div className=\"vip-s-i-body-cont-item-title\">\r\n                                {obj.grid4}%\r\n                              </div>\r\n                              <div className=\"vip-s-i-body-cont-item-text\">\r\n                                真人返水\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"vip-s-i-body-cont-item\">\r\n                              <div className=\"vip-s-i-body-cont-item-title\">\r\n                                {obj.grid5}%\r\n                              </div>\r\n                              <div className=\"vip-s-i-body-cont-item-text\">\r\n                                棋牌返水\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"vip-s-i-body-cont-item\">\r\n                              <div className=\"vip-s-i-body-cont-item-title\">\r\n                                {obj.grid6}%\r\n                              </div>\r\n                              <div className=\"vip-s-i-body-cont-item-text\">\r\n                                电子返水\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </Slider>\r\n          </div>\r\n        </div>\r\n      </Wrap>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport default withAuth(Vip, 1);\r\n"]},"metadata":{},"sourceType":"module"}