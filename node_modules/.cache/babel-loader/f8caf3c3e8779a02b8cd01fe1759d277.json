{"ast":null,"code":"var _jsxFileName = \"/Users/cramj/Documents/New PWA/ubet-project (1)/src/pwa/view/Home.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport Ticker from \"react-ticker\";\nimport { Promotions } from \"../../service\";\nimport { withAuth } from \"../util/\";\nimport { SliderSA, ContentSA, UserSA, PromoOverSA, TickerOverSA } from \"../component/\";\nimport { User } from '../../service/';\n\nconst Home = ({\n  location,\n  history\n}) => {\n  const {\n    state\n  } = location;\n  const {\n    userAuth\n  } = useContext(User.Context);\n  const [promoOver, setPromoOver] = useState(false);\n  const [tickerOver, setTickerOver] = useState(false);\n  const [ticker, setTicker] = useState({\n    text: \"\",\n    news: []\n  });\n  useEffect(() => {\n    const q = Promotions.getAnnouncements({\n      num: 1\n    });\n    q.promise.then(r => {\n      // console.log(r)\n      setTicker(t => ({ ...t,\n        text: r.info.map(n => n.content).join(\" \"),\n        news: r.info.map(n => ({\n          title: n.content,\n          text: n.edit_time\n        }))\n      }));\n    }, e => {\n      if (!e.is_aborted) {\n        console.warn(e);\n      }\n    });\n    return () => q.cancel();\n  }, []);\n  useEffect(() => {\n    if (state === null || state === void 0 ? void 0 : state.from_login) {\n      // setPromoOver(true);\n      history.replace();\n    }\n  }, [history, state]);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    document.body.classList.add(\"pwa-home-page\");\n    return () => document.body.classList.remove(\"pwa-home-page\");\n  }, []);\n\n  const onSetTick = () => {\n    if (!userAuth.data) {\n      history.push('login');\n      return false;\n    }\n\n    setTickerOver(true);\n  }; // console.log(ticker)\n\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-sa-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SliderSA, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-sa-ticker\",\n    onClick: onSetTick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, ticker.text ? /*#__PURE__*/React.createElement(Ticker, {\n    speed: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, () => /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 38\n    }\n  }, ticker.text)) : null), /*#__PURE__*/React.createElement(UserSA, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(ContentSA, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }), promoOver ? /*#__PURE__*/React.createElement(PromoOverSA, {\n    onClose: () => setPromoOver(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 20\n    }\n  }) : null, tickerOver ? /*#__PURE__*/React.createElement(TickerOverSA, {\n    onClose: () => setTickerOver(false),\n    news: ticker.news,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }) : null);\n}; // export default Home\n\n\nexport default withAuth(Home, 0);","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/ubet-project (1)/src/pwa/view/Home.js"],"names":["React","useState","useEffect","useContext","Ticker","Promotions","withAuth","SliderSA","ContentSA","UserSA","PromoOverSA","TickerOverSA","User","Home","location","history","state","userAuth","Context","promoOver","setPromoOver","tickerOver","setTickerOver","ticker","setTicker","text","news","q","getAnnouncements","num","promise","then","r","t","info","map","n","content","join","title","edit_time","e","is_aborted","console","warn","cancel","from_login","replace","window","scrollTo","document","body","classList","add","remove","onSetTick","data","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect , useContext } from \"react\";\r\nimport Ticker from \"react-ticker\";\r\n\r\nimport { Promotions } from \"../../service\";\r\nimport { withAuth } from \"../util/\";\r\nimport {\r\n  SliderSA,\r\n  ContentSA,\r\n  UserSA,\r\n  PromoOverSA,\r\n  TickerOverSA,\r\n} from \"../component/\";\r\nimport { User } from '../../service/';\r\n\r\n\r\nconst Home = ({ location, history }) => {\r\n  const { state } = location;\r\n  const { userAuth } = useContext(User.Context);\r\n  const [promoOver, setPromoOver] = useState(false);\r\n  const [tickerOver, setTickerOver] = useState(false);\r\n\r\n  const [ticker, setTicker] = useState({\r\n    text: \"\",\r\n    news: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    const q = Promotions.getAnnouncements({ num: 1 });\r\n\r\n    q.promise.then( (r) => {\r\n        // console.log(r)\r\n        setTicker((t) => ({\r\n          ...t,\r\n          text: r.info.map((n) => n.content).join(\" \"),\r\n          news: r.info.map((n) => ({ title: n.content, text: n.edit_time })),\r\n        }));\r\n      },\r\n      (e) => {\r\n        if (!e.is_aborted) {\r\n          console.warn(e);\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => q.cancel();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (state?.from_login) {\r\n      // setPromoOver(true);\r\n      history.replace();\r\n    }\r\n  }, [history, state]);\r\n\r\n  useEffect(() => {\r\n\r\n    window.scrollTo(0, 0);\r\n    document.body.classList.add(\"pwa-home-page\");\r\n    return () => document.body.classList.remove(\"pwa-home-page\");\r\n\r\n  }, []);\r\n\r\n\r\n  const onSetTick = () =>{\r\n    if(!userAuth.data){\r\n      history.push('login')\r\n      return false\r\n    }\r\n    setTickerOver(true)\r\n\r\n  }\r\n\r\n\r\n  // console.log(ticker)\r\n  return (\r\n    <>\r\n      <div className=\"app-sa-head\">\r\n        <SliderSA />\r\n        <div className=\"app-sa-ticker\" onClick={onSetTick}>\r\n          {ticker.text ? (\r\n            <Ticker speed={3}>{() => <p>{ticker.text}</p>}</Ticker>\r\n          ) : null}\r\n        </div>\r\n        <UserSA />\r\n      </div>\r\n      <ContentSA />\r\n      {promoOver ? <PromoOverSA onClose={() => setPromoOver(false)} /> : null}\r\n      {tickerOver ? (\r\n        <TickerOverSA onClose={() => setTickerOver(false)} news={ticker.news} />\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n\r\n// export default Home\r\nexport default withAuth(Home,0 );\r\n"]},"metadata":{},"sourceType":"module"}