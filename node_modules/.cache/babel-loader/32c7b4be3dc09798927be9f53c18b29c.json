{"ast":null,"code":"import _objectSpread from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/cramj/Documents/New PWA/ubet-project (1)/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import{User,Transaction}from\"../../service\";import Settings from'./Settings';var Switch=function Switch(){return/*#__PURE__*/React.createElement(\"label\",{className:\"switch\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"slider round\"}));};var Wrap=function Wrap(props){var className=props.className,children=props.children,noHead=props.noHead,title=props.title;var _useContext=useContext(User.Context),setUserAuthFN=_useContext.setUserAuthFN,_useContext$userAuth$=_useContext.userAuth.data,account=_useContext$userAuth$.account,balance=_useContext$userAuth$.balance,realName=_useContext$userAuth$.realName,phone_verify=_useContext$userAuth$.phone_verify,telephone=_useContext$userAuth$.telephone,birthday=_useContext$userAuth$.birthday,email=_useContext$userAuth$.email;var _useContext2=useContext(User.Context),userAuth=_useContext2.userAuth;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),type=_useState2[0],setType=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),avatar=_useState4[0],setAvatar=_useState4[1];useEffect(function(){var response=Transaction.read(_objectSpread(_objectSpread({},User.read()),{},{type:\"get_imgurl\"}));response.promise.then(function(r){// console.log(r)\nif(r.info){var URL=\"https://u2daszapp.u2d8899.com/newpwa/\".concat(r.info);setAvatar(URL);}},function(e){console.log(\"No Image found\");});},[userAuth]);var onSetType=function onSetType(event){if(event===\"name\"){if(realName){setUserAuthFN(userAuth.status,userAuth.data,{csr:true});return false;}}if(event===\"phone\"){if(phone_verify==1){setUserAuthFN(userAuth.status,userAuth.data,{csr:true});return false;}}if(event===\"birthday\"){if(birthday){setUserAuthFN(userAuth.status,userAuth.data,{csr:true});return false;}}if(event===\"email\"){if(email){setUserAuthFN(userAuth.status,userAuth.data,{csr:true});return false;}}setType(event);};// console.log(userAuth.data)\nreturn/*#__PURE__*/React.createElement(React.Fragment,null,!noHead&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"profile-section section-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-section-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-section-avatar\"},/*#__PURE__*/React.createElement(\"i\",{style:{backgroundImage:\"url(\".concat(avatar,\")\")}}),/*#__PURE__*/React.createElement(\"div\",{className:\"details\"},/*#__PURE__*/React.createElement(\"div\",{className:\"name\"},account),/*#__PURE__*/React.createElement(\"div\",null,\"\\u8D26\\u6237\\u4F59\\u989D\\uFF1A\",/*#__PURE__*/React.createElement(\"span\",null,\"\\xA5\",balance)))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-section-menu\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-section-menu-item\",onClick:function onClick(){return onSetType('name');}},/*#__PURE__*/React.createElement(\"i\",{className:\"icon1\"}),\"\\u57FA\\u672C\\u8D44\\u6599:\",/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(realName?null:\"empty\")},realName?realName:\"尚未填满\")),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-section-menu-item\",onClick:function onClick(){return onSetType('phone');}},/*#__PURE__*/React.createElement(\"i\",{className:\"icon2\"}),\"\\u624B\\u673A\\u53F7\\u7801:\",/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(telephone?phone_verify===0?\"unverified\":null:\"empty\")},telephone?telephone.substring(0,4)+\"****\"+telephone.substring(8):\"尚未填满\")),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-section-menu-item\",onClick:function onClick(){return onSetType('password');}},/*#__PURE__*/React.createElement(\"i\",{className:\"icon3\"}),\"\\u4FEE\\u6539\\u5BC6\\u7801: \",/*#__PURE__*/React.createElement(\"span\",null,\"\\u53BB\\u4FEE\\u6539\")),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-section-menu-item\",onClick:function onClick(){return onSetType('birthday');}},/*#__PURE__*/React.createElement(\"i\",{className:\"icon4\"}),\"\\u51FA\\u751F\\u65E5\\u671F:\",/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(birthday?null:\"empty\")},birthday?birthday:\"尚未填满\")),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-section-menu-item\",onClick:function onClick(){return onSetType('email');}},/*#__PURE__*/React.createElement(\"i\",{className:\"icon5\"}),\"\\u90AE\\u7BB1\\u5730\\u5740:\",/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(email?null:\"empty\")},email?email:\"尚未填满\")),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-section-menu-item\"},/*#__PURE__*/React.createElement(\"i\",{className:\"icon6\"}),\"\\u591C\\u95F4\\u6A21\\u5F0F\",/*#__PURE__*/React.createElement(Switch,null))))),/*#__PURE__*/React.createElement(Settings,{type:type,onHide:function onHide(){return setType(null);}})),title?/*#__PURE__*/React.createElement(\"div\",{className:\"profile-section-subtitle\"},title):null,/*#__PURE__*/React.createElement(\"div\",{className:\"profile-wrap-section \".concat(className)},children));};export default Wrap;","map":{"version":3,"sources":["/Users/cramj/Documents/New PWA/ubet-project (1)/src/view/profile/Wrap.js"],"names":["React","useState","useEffect","useContext","User","Transaction","Settings","Switch","Wrap","props","className","children","noHead","title","Context","setUserAuthFN","userAuth","data","account","balance","realName","phone_verify","telephone","birthday","email","type","setType","avatar","setAvatar","response","read","promise","then","r","info","URL","e","console","log","onSetType","event","status","csr","backgroundImage","substring"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\n\r\nimport { User, Transaction } from \"../../service\";\r\nimport Settings from './Settings'\r\n\r\nconst Switch = () => {\r\n  return (\r\n    <label className=\"switch\">\r\n      <input type=\"checkbox\" />\r\n      <span className=\"slider round\"></span>\r\n    </label>\r\n  );\r\n};\r\n\r\nconst Wrap = (props) => {\r\n  const { className, children, noHead, title } = props;\r\n  const {\r\n    setUserAuthFN,\r\n    userAuth: {\r\n      data: {\r\n        account,\r\n        balance,\r\n        realName,\r\n        phone_verify,\r\n        telephone,\r\n        birthday,\r\n        email, \r\n      },\r\n    },\r\n  } = useContext(User.Context);\r\n\r\n  const { userAuth} = useContext(User.Context);\r\n  const [type, setType] = useState(null);\r\n  const [avatar, setAvatar] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const response = Transaction.read({\r\n      ...User.read(),\r\n      type: \"get_imgurl\",\r\n    });\r\n    response.promise.then(\r\n      (r) => {\r\n        // console.log(r)\r\n        if (r.info) {\r\n          const URL = `https://u2daszapp.u2d8899.com/newpwa/${r.info}`;\r\n          setAvatar(URL);\r\n        }\r\n      },\r\n      (e) => {\r\n        console.log(\"No Image found\");\r\n      }\r\n    );\r\n  }, [userAuth]);\r\n\r\n\r\n  const onSetType = (event) =>{\r\n    \r\n\r\n    if(event === \"name\"){\r\n      if(realName){\r\n        setUserAuthFN(userAuth.status, userAuth.data, { csr : true });\r\n        return false\r\n      }\r\n    }\r\n    if(event === \"phone\" ){\r\n      if(phone_verify == 1){\r\n        setUserAuthFN(userAuth.status, userAuth.data, { csr : true });\r\n        return false\r\n      }\r\n    }\r\n\r\n    if(event === \"birthday\" ){\r\n      if(birthday){\r\n        setUserAuthFN(userAuth.status, userAuth.data, { csr : true });\r\n        return false\r\n      }\r\n    }\r\n    if(event === \"email\" ){\r\n      if(email){\r\n        setUserAuthFN(userAuth.status, userAuth.data, { csr : true });\r\n        return false\r\n      }\r\n    }\r\n \r\n    \r\n    setType(event)\r\n    \r\n  }\r\n\r\n  // console.log(userAuth.data)\r\n  return (\r\n    <>\r\n      {!noHead && (\r\n        <>\r\n\r\n        <div className=\"profile-section section-box\">\r\n          <div className=\"profile-section-header\">\r\n            <div className=\"profile-section-avatar\">\r\n              <i style={{ backgroundImage: `url(${avatar})` }} />\r\n              <div className=\"details\">\r\n                <div className=\"name\">{account}</div>\r\n                <div>\r\n                  账户余额：<span>¥{balance}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"profile-section-menu\">\r\n              <div className=\"profile-section-menu-item\" onClick={()=>onSetType('name')}>\r\n                <i className=\"icon1\" />\r\n                基本资料:\r\n                <span className={`${realName ? null : \"empty\"}`}>\r\n                  {realName ? realName : \"尚未填满\"}\r\n                </span>\r\n              </div>\r\n              <div className=\"profile-section-menu-item\" onClick={()=>onSetType('phone')}>\r\n                <i className=\"icon2\" />\r\n                手机号码:\r\n                <span\r\n                  className={`${\r\n                    telephone\r\n                      ? phone_verify === 0\r\n                        ? \"unverified\"\r\n                        : null\r\n                      : \"empty\"\r\n                  }`}\r\n                >\r\n                  {telephone\r\n                    ? telephone.substring(0, 4) +\r\n                      \"****\" +\r\n                      telephone.substring(8)\r\n                    : \"尚未填满\"}\r\n                </span>\r\n              </div>\r\n              <div className=\"profile-section-menu-item\" onClick={()=>onSetType('password')}>\r\n                <i className=\"icon3\" />\r\n                修改密码: <span>去修改</span>\r\n              </div>\r\n              <div className=\"profile-section-menu-item\" onClick={()=>onSetType('birthday')}>\r\n                <i className=\"icon4\" />\r\n                出生日期:\r\n                <span className={`${birthday ? null : \"empty\"}`}>\r\n                  {birthday ? birthday : \"尚未填满\"}\r\n                </span>\r\n              </div>\r\n              <div className=\"profile-section-menu-item\" onClick={()=>onSetType('email')}>\r\n                <i className=\"icon5\" />\r\n                邮箱地址:\r\n                <span className={`${email ? null : \"empty\"}`}>\r\n                  {email ? email : \"尚未填满\"}\r\n                </span>\r\n              </div>\r\n              <div className=\"profile-section-menu-item\">\r\n                <i className=\"icon6\" />\r\n                夜间模式\r\n                <Switch />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <Settings type={type} onHide={() => setType(null)}/>\r\n\r\n        </>\r\n      )}\r\n      {title ? <div className={`profile-section-subtitle`}>{title}</div> : null}\r\n      <div className={`profile-wrap-section ${className}`}>{children}</div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Wrap;\r\n"]},"metadata":{},"sourceType":"module"}